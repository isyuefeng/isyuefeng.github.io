<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>springcloud02</title>
      <link href="2021/05/springcloud02/"/>
      <url>2021/05/springcloud02/</url>
      
        <content type="html"><![CDATA[<hr><!--<div class="note blue icon modern"><i class="note-icon fas fa-bullhorn"></i><p>æç¤ºæ¡†</p></div><div class="note green icon modern"><i class="note-icon fa fa-rocket"></i><p>ğŸ“š <a href="">æ–‡æ¡£ç›®å½•</a>              </p><p>ğŸš€ å¿«é€Ÿå¼€å§‹ - ğŸ“‘ ä¸»é¢˜é¡µé¢ - ğŸ›  ä¸»é¢˜é…ç½®-1 - âš”ï¸ ä¸»é¢˜é…ç½®-2 - â“ ä¸»é¢˜é—®ç­” - âš¡ï¸ è¿›é˜¶æ•™ç¨‹ - âœ¨ æ›´æ–°æ—¥èªŒ - ğŸ¤ æ‰“èµ</p></div><div class="note red icon modern"><i class="note-icon fas fa-skull-crossbones"></i><p>å±é™©æ¡†</p></div>--><hr><h1 id="1-Spring-Cloud-Feign"><a href="#1-Spring-Cloud-Feign" class="headerlink" title="1.Spring Cloud Feign"></a>1.Spring Cloud Feign</h1><h2 id="1-1Feignç®€ä»‹"><a href="#1-1Feignç®€ä»‹" class="headerlink" title="1.1Feignç®€ä»‹"></a>1.1Feignç®€ä»‹</h2><p>Feign [feÉªn] è¯‘æ–‡ ä¼ªè£…ã€‚Feignæ˜¯ä¸€ä¸ªå£°æ˜å¼WebServiceå®¢æˆ·ç«¯.ä½¿ç”¨Feignèƒ½è®©ç¼–å†™WebServiceå®¢æˆ·ç«¯æ›´åŠ ç®€å•,å®ƒçš„ä½¿ç”¨æ–¹æ³•æ˜¯å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œç„¶ååœ¨ä¸Šé¢æ·»åŠ æ³¨è§£ã€‚ä¸å†éœ€è¦æ‹¼æ¥URLï¼Œå‚æ•°ç­‰æ“ä½œã€‚é¡¹ç›®ä¸»é¡µï¼š<a href="https://github.com/OpenFeign/feign">https://github.com/OpenFeign/feign</a> ã€‚</p><ul><li>é›†æˆRibbonçš„è´Ÿè½½å‡è¡¡åŠŸèƒ½</li><li>é›†æˆäº†Hystrixçš„ç†”æ–­å™¨åŠŸèƒ½</li><li>æ”¯æŒè¯·æ±‚å‹ç¼©</li><li>å¤§å¤§ç®€åŒ–äº†è¿œç¨‹è°ƒç”¨çš„ä»£ç ï¼ŒåŒæ—¶åŠŸèƒ½è¿˜å¢å¼ºå•¦</li><li>Feignä»¥æ›´åŠ ä¼˜é›…çš„æ–¹å¼ç¼–å†™è¿œç¨‹è°ƒç”¨ä»£ç ï¼Œå¹¶ç®€åŒ–é‡å¤ä»£ç </li></ul><h2 id="1-2å¿«é€Ÿå…¥é—¨"><a href="#1-2å¿«é€Ÿå…¥é—¨" class="headerlink" title="1.2å¿«é€Ÿå…¥é—¨"></a>1.2å¿«é€Ÿå…¥é—¨</h2><p>(1)å¯¼å…¥ä¾èµ–</p><p>åœ¨<code>user-consumer</code>ä¸­æ·»åŠ <code>spring-cloud-starter-openfeign</code>ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®feign--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>(2)åˆ›å»ºFeignå®¢æˆ·ç«¯</p><p>åœ¨<code>user-consumer</code>ä¸­åˆ›å»º<code>com.yuefeng.feign.UserClient</code>æ¥å£ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yuefeng.feign;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.yuefeng.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.openfeign.FeignClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yf</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2021/5/17</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="meta">@FeignClient(value = &quot;user-provider&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">findById</span><span class="params">(<span class="meta">@PathVariable(value = &quot;id&quot;)</span>Integer id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="note warning flat"><p>Feignä¼šé€šè¿‡åŠ¨æ€ä»£ç†ï¼Œå¸®æˆ‘ä»¬ç”Ÿæˆå®ç°ç±»ã€‚<br>æ³¨è§£@FeignClientå£°æ˜Feignçš„å®¢æˆ·ç«¯ï¼Œæ³¨è§£valueæŒ‡æ˜æœåŠ¡åç§°<br>æ¥å£å®šä¹‰çš„æ–¹æ³•ï¼Œé‡‡ç”¨SpringMVCçš„æ³¨è§£ã€‚Feignä¼šæ ¹æ®æ³¨è§£å¸®æˆ‘ä»¬ç”ŸæˆURLåœ°å€<br>æ³¨è§£@RequestMappingä¸­çš„/userï¼Œä¸è¦å¿˜è®°ã€‚å› ä¸ºFeignéœ€è¦æ‹¼æ¥å¯è®¿é—®åœ°å€</p></div><p>(3)ç¼–å†™æ§åˆ¶å±‚</p><p>åœ¨<code>user-consumer</code>ä¸­åˆ›å»º<code>com.yuefeng.controller.ConsumerFeignController</code>ï¼Œåœ¨Controllerä¸­ä½¿ç”¨@Autowiredæ³¨å…¥FeignClient,ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/feign&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConsumerFeignController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserClient userClient;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/****</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨Feignè°ƒç”¨user-providerçš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">queryById</span><span class="params">(<span class="meta">@PathVariable(value = &quot;id&quot;)</span>Integer id)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userClient.findById(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4)å¼€å¯Feign</p><p>ä¿®æ”¹<code>user-consumer</code>çš„å¯åŠ¨ç±»ï¼Œåœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ <code>@EnableFeignClients</code>æ³¨è§£ï¼Œå¼€å¯Feign.</p><p><img src="../../../img/md_img/springcloud02/image-20210517113729221.png" alt="image-20210517113729221"></p><h2 id="1-3è´Ÿè½½å‡è¡¡"><a href="#1-3è´Ÿè½½å‡è¡¡" class="headerlink" title="1.3è´Ÿè½½å‡è¡¡"></a>1.3è´Ÿè½½å‡è¡¡</h2><p>Feignè‡ªèº«å·²ç»é›†æˆäº†Ribbonï¼Œå› æ­¤ä½¿ç”¨Feignçš„æ—¶å€™ï¼Œä¸éœ€è¦é¢å¤–å¼•å…¥ä¾èµ–ã€‚</p><p><img src="../../../img/md_img/springcloud02/1563261807063.png" alt="1563261807063"></p><p>Feignå†…ç½®çš„ribboné»˜è®¤è®¾ç½®äº†è¯·æ±‚è¶…æ—¶æ—¶é•¿ï¼Œé»˜è®¤æ˜¯1000ï¼Œå¯ä»¥ä¿®æ”¹</p><p>ribbonå†…éƒ¨æœ‰é‡è¯•æœºåˆ¶ï¼Œä¸€æ—¦è¶…æ—¶ï¼Œä¼šè‡ªåŠ¨é‡æ–°å‘èµ·è¯·æ±‚ã€‚å¦‚æœä¸å¸Œæœ›é‡è¯•å¯ä»¥å…³é—­é…ç½®ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¿®æ”¹æœåŠ¡åœ°å€è½®è¯¢ç­–ç•¥ï¼Œé»˜è®¤æ˜¯è½®è¯¢ï¼Œé…ç½®ä¹‹åå˜éšæœº</span></span><br><span class="line"><span class="attr">user-provider:</span></span><br><span class="line">  <span class="attr">ribbon:</span></span><br><span class="line">    <span class="comment">#è½®è¯¢</span></span><br><span class="line">    <span class="attr">NFLoadBalancerRuleClassName:</span> <span class="string">com.netflix.loadbalancer.RoundRobinRule</span></span><br><span class="line">    <span class="attr">ConnectTimeout:</span> <span class="number">10000</span> <span class="comment"># è¿æ¥è¶…æ—¶æ—¶é—´</span></span><br><span class="line">    <span class="attr">ReadTimeout:</span> <span class="number">2000</span> <span class="comment"># æ•°æ®è¯»å–è¶…æ—¶æ—¶é—´</span></span><br><span class="line">    <span class="attr">MaxAutoRetries:</span> <span class="number">1</span> <span class="comment"># æœ€å¤§é‡è¯•æ¬¡æ•°(ç¬¬ä¸€ä¸ªæœåŠ¡)</span></span><br><span class="line">    <span class="attr">MaxAutoRetriesNextServer:</span> <span class="number">0</span> <span class="comment"># æœ€å¤§é‡è¯•ä¸‹ä¸€ä¸ªæœåŠ¡æ¬¡æ•°(é›†ç¾¤çš„æƒ…å†µæ‰ä¼šç”¨åˆ°)</span></span><br><span class="line">    <span class="attr">OkToRetryOnAllOperations:</span> <span class="literal">false</span> <span class="comment"># æ— è®ºæ˜¯è¯·æ±‚è¶…æ—¶æˆ–è€…socket read timeoutéƒ½è¿›è¡Œé‡è¯•</span></span><br></pre></td></tr></table></figure><h2 id="1-4ç†”æ–­å™¨æ”¯æŒ"><a href="#1-4ç†”æ–­å™¨æ”¯æŒ" class="headerlink" title="1.4ç†”æ–­å™¨æ”¯æŒ"></a>1.4ç†”æ–­å™¨æ”¯æŒ</h2><p>feignæ•´åˆHystrixç†”æ–­å™¨</p><p>Feigné»˜è®¤ä¹Ÿæœ‰å¯¹Hystrixçš„é›†æˆ!</p><p><img src="../../../img/md_img/springcloud02/1563263001726.png" alt="1563263001726"></p><p>å®ç°æ­¥éª¤ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1.</span> <span class="string">åœ¨é…ç½®æ–‡ä»¶application.ymlä¸­å¼€å¯feignç†”æ–­å™¨æ”¯æŒ</span></span><br><span class="line"><span class="meta">2.</span> <span class="string">ç¼–å†™FallBackå¤„ç†ç±»ï¼Œå®ç°FeignClientå®¢æˆ·ç«¯</span></span><br><span class="line"><span class="meta">3.</span> <span class="string">åœ¨@FeignClientæ³¨è§£ä¸­ï¼ŒæŒ‡å®šFallBackå¤„ç†ç±»ã€‚</span></span><br><span class="line"><span class="meta">4.</span> <span class="string">æµ‹è¯•</span></span><br></pre></td></tr></table></figure><p>(1)å¼€å¯Hystrix</p><p>åœ¨é…ç½®æ–‡ä»¶application.ymlä¸­å¼€å¯feignç†”æ–­å™¨æ”¯æŒï¼šé»˜è®¤å…³é—­</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">feign</span>:<span class="string"></span></span><br><span class="line">  <span class="attr">hystrix</span>:<span class="string"></span></span><br><span class="line">    <span class="attr">enabled</span>: <span class="string">true # å¼€å¯Feignçš„ç†”æ–­åŠŸèƒ½</span></span><br></pre></td></tr></table></figure><p>(2)ç†”æ–­é™çº§ç±»åˆ›å»º</p><p>ä¿®æ”¹<code>user-consumer</code>,åˆ›å»ºä¸€ä¸ªç±»<code>com.yuefeng.feign.fallback.UserClientFallback</code>ï¼Œå®ç°åˆšæ‰ç¼–å†™çš„UserClientï¼Œä½œä¸ºFallBackçš„å¤„ç†ç±»,ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserClientFallback</span> <span class="keyword">implements</span> <span class="title">UserClient</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/***</span></span><br><span class="line"><span class="comment">     * æœåŠ¡é™çº§å¤„ç†æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">findById</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setUsername(<span class="string">&quot;Fallbackï¼ŒæœåŠ¡é™çº§ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(3)æŒ‡å®šFallbackå¤„ç†ç±»</p><p>åœ¨@FeignClientæ³¨è§£ä¸­ï¼ŒæŒ‡å®šFallBackå¤„ç†ç±»</p><p><img src="../../../img/md_img/springcloud02/1563263626561.png" alt="1563263626561"></p><h2 id="1-5è¯·æ±‚å‹ç¼©-äº†è§£"><a href="#1-5è¯·æ±‚å‹ç¼©-äº†è§£" class="headerlink" title="1.5è¯·æ±‚å‹ç¼©(äº†è§£)"></a>1.5è¯·æ±‚å‹ç¼©(äº†è§£)</h2><p>SpringCloudFeignæ”¯æŒå¯¹è¯·æ±‚å’Œå“åº”è¿›è¡ŒGZIPå‹ç¼©ï¼Œä»¥å‡å°‘é€šä¿¡è¿‡ç¨‹ä¸­çš„æ€§èƒ½æŸè€—ã€‚</p><p>é€šè¿‡é…ç½®å¼€å¯è¯·æ±‚ä¸å“åº”çš„å‹ç¼©åŠŸèƒ½ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">feign:</span></span><br><span class="line"><span class="attr">compression:</span></span><br><span class="line">        <span class="attr">request:</span></span><br><span class="line">            <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment"># å¼€å¯è¯·æ±‚å‹ç¼©</span></span><br><span class="line">        <span class="attr">response:</span></span><br><span class="line">            <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment"># å¼€å¯å“åº”å‹ç¼©</span></span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥å¯¹è¯·æ±‚çš„æ•°æ®ç±»å‹ï¼Œä»¥åŠè§¦å‘å‹ç¼©çš„å¤§å°ä¸‹é™è¿›è¡Œè®¾ç½®</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  Feigné…ç½®</span></span><br><span class="line"><span class="attr">feign:</span></span><br><span class="line"><span class="attr">compression:</span></span><br><span class="line"><span class="attr">request:</span></span><br><span class="line"><span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment"># å¼€å¯è¯·æ±‚å‹ç¼©</span></span><br><span class="line"><span class="attr">mime-types:</span><span class="string">text/html,application/xml,application/json</span> <span class="comment"># è®¾ç½®å‹ç¼©çš„æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="attr">min-request-size:</span> <span class="number">2048</span> <span class="comment"># è®¾ç½®è§¦å‘å‹ç¼©çš„å¤§å°ä¸‹é™</span></span><br><span class="line"><span class="comment">#ä»¥ä¸Šæ•°æ®ç±»å‹ï¼Œå‹ç¼©å¤§å°ä¸‹é™å‡ä¸ºé»˜è®¤å€¼</span></span><br></pre></td></tr></table></figure><h2 id="1-6Feignçš„æ—¥å¿—çº§åˆ«é…ç½®"><a href="#1-6Feignçš„æ—¥å¿—çº§åˆ«é…ç½®" class="headerlink" title="1.6Feignçš„æ—¥å¿—çº§åˆ«é…ç½®"></a>1.6Feignçš„æ—¥å¿—çº§åˆ«é…ç½®</h2><p>é€šè¿‡loggin.level.xx=debugæ¥è®¾ç½®æ—¥å¿—çº§åˆ«ã€‚ç„¶è€Œè¿™ä¸ªå¯¹Feignå®¢æˆ·ç«¯ä¸ä¼šäº§ç”Ÿæ•ˆæœã€‚å› ä¸º@FeignClientæ³¨è§£ä¿®é¥°çš„å®¢æˆ·ç«¯åœ¨è¢«ä»£ç†æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Feign.Loggerå®ä¾‹ã€‚æˆ‘ä»¬éœ€è¦é¢å¤–é€šè¿‡é…ç½®ç±»çš„æ–¹å¼æŒ‡å®šè¿™ä¸ªæ—¥å¿—çš„çº§åˆ«æ‰å¯ä»¥ã€‚</p><p><strong>å®ç°æ­¥éª¤ï¼š</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1.</span> <span class="string">åœ¨application.ymlé…ç½®æ–‡ä»¶ä¸­å¼€å¯æ—¥å¿—çº§åˆ«é…ç½®</span></span><br><span class="line"><span class="meta">2.</span> <span class="string">ç¼–å†™é…ç½®ç±»ï¼Œå®šä¹‰æ—¥å¿—çº§åˆ«beanã€‚</span></span><br><span class="line"><span class="meta">3.</span> <span class="string">åœ¨æ¥å£çš„@FeignClientä¸­æŒ‡å®šé…ç½®ç±»</span></span><br><span class="line"><span class="meta">4.</span> <span class="string">é‡å¯é¡¹ç›®ï¼Œæµ‹è¯•è®¿é—®</span></span><br></pre></td></tr></table></figure><p><strong>å®ç°è¿‡ç¨‹ï¼š</strong></p><p>(1)æ™®é€šæ—¥å¿—ç­‰çº§é…ç½®</p><p>åœ¨<code>user-consumer</code>çš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®com.yuefengåŒ…ä¸‹çš„æ—¥å¿—çº§åˆ«éƒ½ä¸ºdebug</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># com.yuefeng åŒ…ä¸‹çš„æ—¥å¿—çº§åˆ«éƒ½ä¸ºDebug</span></span><br><span class="line"><span class="attr">logging</span>:<span class="string"></span></span><br><span class="line">  <span class="attr">level</span>:<span class="string"></span></span><br><span class="line">    <span class="meta">com.yuefeng</span>: <span class="string">debug</span></span><br></pre></td></tr></table></figure><p>(2)Feignæ—¥å¿—ç­‰çº§é…ç½®</p><p>åœ¨<code>user-consumer</code>ä¸­åˆ›å»º<code>com.yuefeng.feign.util.FeignConfig</code>,å®šä¹‰æ—¥å¿—çº§åˆ«</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FeignConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/***</span></span><br><span class="line"><span class="comment">     * æ—¥å¿—çº§åˆ«</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Logger.<span class="function">Level <span class="title">feignLoggerLevel</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Logger.Level.FULL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¥å¿—çº§åˆ«è¯´æ˜ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Feignæ”¯æŒ4ä¸­çº§åˆ«ï¼š</span></span><br><span class="line"><span class="attr">NONEï¼šä¸è®°å½•ä»»ä½•æ—¥å¿—ï¼Œé»˜è®¤å€¼</span></span><br><span class="line"><span class="attr">BASICï¼šä»…è®°å½•è¯·æ±‚çš„æ–¹æ³•ï¼ŒURLä»¥åŠå“åº”çŠ¶æ€ç å’Œæ‰§è¡Œæ—¶é—´</span></span><br><span class="line"><span class="attr">HEADERSï¼šåœ¨BASICåŸºç¡€ä¸Šï¼Œé¢å¤–è®°å½•äº†è¯·æ±‚å’Œå“åº”çš„å¤´ä¿¡æ¯</span></span><br><span class="line"><span class="attr">FULLï¼šè®°å½•æ‰€æœ‰è¯·æ±‚å’Œå“åº”çš„æ˜ç»†ï¼ŒåŒ…æ‹¬å¤´ä¿¡æ¯ã€è¯·æ±‚ä½“ã€å…ƒæ•°æ®</span></span><br></pre></td></tr></table></figure><p>(3)æŒ‡å®šé…ç½®ç±»</p><p>ä¿®æ”¹<code>user-consumer</code>çš„<code>com.yuefeng.feign.UserClient</code>æŒ‡å®šä¸Šé¢çš„é…ç½®ç±»ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><p><img src="../../../img/md_img/springcloud02/1563267991954.png" alt="1563267991954"></p><p>é‡å¯é¡¹ç›®ï¼Œå³å¯çœ‹åˆ°æ¯æ¬¡è®¿é—®çš„æ—¥å¿—</p><h2 id="1-7-å°ç»“"><a href="#1-7-å°ç»“" class="headerlink" title="1.7 å°ç»“"></a>1.7 å°ç»“</h2><ul><li><p>Feignçš„ä½œç”¨:ä¸å†ä½¿ç”¨æ‹¼æ¥URLçš„æ–¹å¼å®ç°è¿œç¨‹è°ƒç”¨ï¼Œä»¥æ¥å£è°ƒç”¨çš„æ–¹å¼å®ç°è¿œç¨‹è°ƒç”¨ï¼Œç®€åŒ–äº†è¿œç¨‹è°ƒç”¨çš„å®ç°æ–¹å¼ï¼Œå¢å¼ºäº†è¿œç¨‹è°ƒç”¨çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼šå¢åŠ äº†è´Ÿè½½å‡è¡¡ã€ç†”æ–­ã€å‹ç¼©ã€æ—¥å¿—å¯ç”¨ã€‚</p></li><li><p>æŒæ¡Feignçš„ä½¿ç”¨è¿‡ç¨‹</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1.å¼•å…¥Feignä¾èµ–åŒ…</span></span><br><span class="line"><span class="attr">2.åˆ›å»ºFeignæ¥å£,feignæ¥å£ä¸­éœ€è¦æŒ‡å®šè°ƒç”¨çš„æœåŠ¡åå­—</span></span><br><span class="line"><span class="attr">3.ä½¿ç”¨@EnabledFeignClientså¯ç”¨FeignåŠŸèƒ½</span></span><br></pre></td></tr></table></figure></li><li><p>æŒæ¡Feignçš„è´Ÿè½½å‡è¡¡é…ç½®</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®</span></span><br><span class="line"><span class="meta">&#123;spring.application.name&#125;</span>:<span class="string">ribbon:è´Ÿè½½å‡è¡¡å±æ€§é…ç½®</span></span><br></pre></td></tr></table></figure></li><li><p>æŒæ¡Feignçš„ç†”æ–­é…ç½®</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1.åœ¨application.ymlä¸­å¼€å¯Hystrix</span></span><br><span class="line"><span class="attr">2.ç»™Feignæ¥å£åˆ›å»ºä¸€ä¸ªå®ç°ç±»</span></span><br><span class="line"><span class="attr">3.ç»™FeignæŒ‡å®šfallbackç±»</span></span><br></pre></td></tr></table></figure></li><li><p>æŒæ¡Feignçš„å‹ç¼©é…ç½®</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">åœ¨application.ymlä¸­æŒ‡å®šå‹ç¼©å±æ€§å³å¯</span></span><br></pre></td></tr></table></figure></li><li><p>æŒæ¡Feignçš„æ—¥å¿—é…ç½®</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1.åœ¨application.ymlä¸­å¼€å¯æ™®é€šæ—¥å¿—ç­‰çº§</span></span><br><span class="line"><span class="attr">2.åˆ›å»ºä¸€ä¸ªç±»ï¼Œå®šä¹‰Feignæ—¥å¿—ç­‰çº§</span></span><br><span class="line"><span class="attr">3.åœ¨Feignæ¥å£ä¸­æŒ‡å®šå®šä¹‰æ—¥å¿—çš„é…ç½®</span></span><br></pre></td></tr></table></figure><h1 id="2-Spring-Cloud-Gateway"><a href="#2-Spring-Cloud-Gateway" class="headerlink" title="2.Spring Cloud Gateway"></a>2.Spring Cloud Gateway</h1></li></ul><h2 id="2-1Gateway-ç®€ä»‹"><a href="#2-1Gateway-ç®€ä»‹" class="headerlink" title="2.1Gateway ç®€ä»‹"></a>2.1Gateway ç®€ä»‹</h2><p>Spring Cloud Gateway æ˜¯Spring Cloudå›¢é˜Ÿçš„ä¸€ä¸ªå…¨æ–°é¡¹ç›®ï¼ŒåŸºäºSpring 5.0ã€SpringBoot2.0ã€Project Reactor ç­‰æŠ€æœ¯å¼€å‘çš„ç½‘å…³ã€‚ ==æ—¨åœ¨ä¸ºå¾®æœåŠ¡æ¶æ„æä¾›ä¸€ç§ç®€å•æœ‰æ•ˆç»Ÿä¸€çš„APIè·¯ç”±ç®¡ç†æ–¹å¼ã€‚==</p><p>Spring Cloud Gateway ä½œä¸ºSpringCloudç”Ÿæ€ç³»ç»Ÿä¸­çš„ç½‘å…³ï¼Œç›®æ ‡æ˜¯æ›¿ä»£Netflix Zuulã€‚Gatewayä¸ä»…æä¾›ç»Ÿä¸€è·¯ç”±æ–¹å¼ï¼Œå¹¶ä¸”==åŸºäºFilteré“¾çš„æ–¹å¼æä¾›ç½‘å…³çš„åŸºæœ¬åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼šå®‰å…¨ï¼Œç›‘æ§/æŒ‡æ ‡ï¼Œå’Œé™æµã€‚==</p><p><strong>æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¾®æœåŠ¡ï¼Œéœ€è¦æ³¨å†Œåˆ°Eureka</strong></p><p><strong>ç½‘å…³çš„æ ¸å¿ƒåŠŸèƒ½ï¼š</strong>è¿‡æ»¤ã€è·¯ç”±</p><p><strong>æ ¸å¿ƒæ¦‚å¿µï¼š</strong>é€šè¿‡ç”»å›¾è§£é‡Š</p><ul><li><strong>è·¯ç”±(route)ï¼š</strong></li><li><strong>æ–­è¨€Predicateå‡½æ•°ï¼š</strong>è·¯ç”±è½¬å‘è§„åˆ™</li><li><strong>è¿‡æ»¤å™¨(Filter)ï¼š</strong></li></ul><h2 id="2-2å¿«é€Ÿå…¥é—¨"><a href="#2-2å¿«é€Ÿå…¥é—¨" class="headerlink" title="2.2å¿«é€Ÿå…¥é—¨"></a>2.2å¿«é€Ÿå…¥é—¨</h2><p>(1)åˆ›å»ºä¸€ä¸ªå­å·¥ç¨‹gateway-service</p><p>å·¥ç¨‹åæ ‡ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gateway-service<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yuefeng<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br></pre></td></tr></table></figure><p>(2)pom.xmlä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springcloud-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yuefeng<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gateway-service<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ç½‘å…³ä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Eurekaå®¢æˆ·ç«¯ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>(3)å¯åŠ¨ç±»</p><p>åˆ›å»ºå¯åŠ¨ç±»<code>com.yuefeng.GatewayApplication</code>,ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span><span class="comment">// å¼€å¯Eurekaå®¢æˆ·ç«¯å‘ç°åŠŸèƒ½</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GatewayApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(GatewayApplication.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(4)application.ymlé…ç½®</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ³¨é‡Šç‰ˆæœ¬</span></span><br><span class="line"><span class="attr">server</span>:<span class="string"></span></span><br><span class="line">  <span class="attr">port</span>: <span class="string">18084</span></span><br><span class="line"><span class="attr">spring</span>:<span class="string"></span></span><br><span class="line">  <span class="attr">application</span>:<span class="string"></span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">api-gateway # åº”ç”¨å</span></span><br><span class="line"><span class="comment"># EurekaæœåŠ¡ä¸­å¿ƒé…ç½®</span></span><br><span class="line"><span class="attr">eureka</span>:<span class="string"></span></span><br><span class="line">  <span class="attr">client</span>:<span class="string"></span></span><br><span class="line">    <span class="meta">service-url</span>:<span class="string"></span></span><br><span class="line"><span class="comment">      # æ³¨å†ŒEureka Serveré›†ç¾¤</span></span><br><span class="line">      <span class="attr">defaultZone</span>: <span class="string">http://127.0.0.1:7001/eureka</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡ç½‘å…³é…ç½®ä¸€ä¸ªè·¯ç”±åŠŸèƒ½ï¼Œç”¨æˆ·è®¿é—®ç½‘å…³çš„æ—¶å€™,å¦‚æœç”¨æˆ·è¯·æ±‚çš„è·¯å¾„æ˜¯ä»¥<code>/user</code>å¼€å§‹ï¼Œåˆ™è·¯ç”±åˆ°<code>user-provider</code>æœåŠ¡å»,ä¿®æ”¹application.ymlé…ç½®å³å¯å®ç°ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring</span>:<span class="string"></span></span><br><span class="line">  <span class="attr">application</span>:<span class="string"></span></span><br><span class="line"><span class="comment">    # åº”ç”¨å</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">api-gateway</span></span><br><span class="line">  <span class="attr">cloud</span>:<span class="string"></span></span><br><span class="line">    <span class="attr">gateway</span>:<span class="string"></span></span><br><span class="line">      <span class="attr">routes</span>:<span class="string"></span></span><br><span class="line"><span class="comment">        #idå”¯ä¸€æ ‡è¯†ï¼Œå¯è‡ªå®šä¹‰</span></span><br><span class="line">        <span class="meta">-</span> <span class="string">id: user-service-route</span></span><br><span class="line"><span class="comment">          #è·¯ç”±çš„æœåŠ¡åœ°å€</span></span><br><span class="line">          <span class="attr">uri</span>: <span class="string">http://localhost:18081</span></span><br><span class="line"><span class="comment">          # è·¯ç”±æ‹¦æˆªçš„åœ°å€é…ç½®ï¼ˆæ–­è¨€ï¼‰</span></span><br><span class="line">          <span class="attr">predicates</span>:<span class="string"></span></span><br><span class="line">            <span class="meta">-</span> <span class="string">Path=/user/**</span></span><br></pre></td></tr></table></figure><h2 id="2-3è·¯ç”±é…ç½®"><a href="#2-3è·¯ç”±é…ç½®" class="headerlink" title="2.3è·¯ç”±é…ç½®"></a>2.3è·¯ç”±é…ç½®</h2><p>é€šè¿‡ç½‘å…³é…ç½®ä¸€ä¸ªè·¯ç”±åŠŸèƒ½ï¼Œç”¨æˆ·è®¿é—®ç½‘å…³çš„æ—¶å€™,å¦‚æœç”¨æˆ·è¯·æ±‚çš„è·¯å¾„æ˜¯ä»¥<code>/user</code>å¼€å§‹ï¼Œåˆ™è·¯ç”±åˆ°<code>user-provider</code>æœåŠ¡å»,ä¿®æ”¹application.ymlé…ç½®å³å¯å®ç°ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring</span>:<span class="string"></span></span><br><span class="line">  <span class="attr">application</span>:<span class="string"></span></span><br><span class="line"><span class="comment">    # åº”ç”¨å</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">api-gateway</span></span><br><span class="line">  <span class="attr">cloud</span>:<span class="string"></span></span><br><span class="line">    <span class="attr">gateway</span>:<span class="string"></span></span><br><span class="line">      <span class="attr">routes</span>:<span class="string"></span></span><br><span class="line"><span class="comment">        #idå”¯ä¸€æ ‡è¯†ï¼Œå¯è‡ªå®šä¹‰</span></span><br><span class="line">        <span class="meta">-</span> <span class="string">id: user-service-route</span></span><br><span class="line"><span class="comment">          #è·¯ç”±çš„æœåŠ¡åœ°å€</span></span><br><span class="line">          <span class="attr">uri</span>: <span class="string">http://localhost:18081</span></span><br><span class="line"><span class="comment">          # è·¯ç”±æ‹¦æˆªçš„åœ°å€é…ç½®ï¼ˆæ–­è¨€ï¼‰</span></span><br><span class="line">          <span class="attr">predicates</span>:<span class="string"></span></span><br><span class="line">            <span class="meta">-</span> <span class="string">Path=/user/**</span></span><br></pre></td></tr></table></figure><p>å¯åŠ¨GatewayApplicationæµ‹è¯•</p><p>è®¿é—®<code>http://localhost:18084/user/find/2</code>ä¼šè®¿é—®<code>user-provider</code>æœåŠ¡</p><h2 id="2-4åŠ¨æ€è·¯ç”±"><a href="#2-4åŠ¨æ€è·¯ç”±" class="headerlink" title="2.4åŠ¨æ€è·¯ç”±"></a>2.4åŠ¨æ€è·¯ç”±</h2><p><img src="../../../img/md_img/springcloud02/1563270055671.png" alt="1563270055671"></p><p>åˆšæ‰è·¯ç”±è§„åˆ™ä¸­ï¼Œæˆ‘ä»¬æŠŠè·¯å¾„å¯¹åº”æœåŠ¡åœ°å€å†™æ­»äº†ï¼å¦‚æœæœåŠ¡æä¾›è€…é›†ç¾¤çš„è¯ï¼Œè¿™æ ·åšä¸åˆç†ã€‚åº”è¯¥æ˜¯<strong>æ ¹æ®æœåŠ¡åç§°</strong>ï¼Œå»Eurekaæ³¨å†Œä¸­å¿ƒæŸ¥æ‰¾æœåŠ¡å¯¹åº”çš„æ‰€æœ‰å®ä¾‹åˆ—è¡¨ï¼Œç„¶åè¿›è¡ŒåŠ¨æ€è·¯ç”±ï¼</p><p><strong>ä¿®æ”¹æ˜ å°„é…ç½®ï¼šé€šè¿‡æœåŠ¡åç§°è·å–ï¼š</strong></p><p>ä¿®æ”¹application.yml</p><p>å› ä¸ºå·²ç»é…ç½®äº†Eurekaå®¢æˆ·ç«¯ï¼Œå¯ä»¥ä»Eurekaè·å–æœåŠ¡çš„åœ°å€ä¿¡æ¯ï¼Œä¿®æ”¹application.ymlæ–‡ä»¶å¦‚ä¸‹:</p><p><img src="../../../img/md_img/springcloud02/1563270306529.png" alt="1563270306529"></p><p>ä¸Šå›¾ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring</span>:<span class="string"></span></span><br><span class="line">  <span class="attr">application</span>:<span class="string"></span></span><br><span class="line"><span class="comment">    # åº”ç”¨å</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">api-gateway</span></span><br><span class="line">  <span class="attr">cloud</span>:<span class="string"></span></span><br><span class="line">    <span class="attr">gateway</span>:<span class="string"></span></span><br><span class="line">      <span class="attr">routes</span>:<span class="string"></span></span><br><span class="line"><span class="comment">        #idå”¯ä¸€æ ‡è¯†ï¼Œå¯è‡ªå®šä¹‰</span></span><br><span class="line">        <span class="meta">-</span> <span class="string">id: user-service-route</span></span><br><span class="line"><span class="comment">          #è·¯ç”±çš„æœåŠ¡åœ°å€</span></span><br><span class="line"><span class="comment">          #uri: http://localhost:18081</span></span><br><span class="line"><span class="comment">          #lbåè®®è¡¨ç¤ºä»Eurekaæ³¨å†Œä¸­å¿ƒè·å–æœåŠ¡è¯·æ±‚åœ°å€</span></span><br><span class="line"><span class="comment">          #user-providerè®¿é—®çš„æœåŠ¡åç§°ã€‚</span></span><br><span class="line"><span class="comment">          #è·¯ç”±åœ°å€å¦‚æœé€šè¿‡lbåè®®åŠ æœåŠ¡åç§°æ—¶ï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨è´Ÿè½½å‡è¡¡è®¿é—®å¯¹åº”æœåŠ¡</span></span><br><span class="line">          <span class="attr">uri</span>: <span class="string">lb://user-provider</span></span><br><span class="line"><span class="comment">          # è·¯ç”±æ‹¦æˆªçš„åœ°å€é…ç½®ï¼ˆæ–­è¨€ï¼‰</span></span><br><span class="line">          <span class="attr">predicates</span>:<span class="string"></span></span><br><span class="line">            <span class="meta">-</span> <span class="string">Path=/user/**</span></span><br></pre></td></tr></table></figure><p>è·¯ç”±é…ç½®ä¸­uriæ‰€ç”¨çš„åè®®ä¸ºlbæ—¶ï¼Œgatewayå°†æŠŠuser-providerè§£æä¸ºå®é™…çš„ä¸»æœºå’Œç«¯å£ï¼Œå¹¶é€šè¿‡Ribbonè¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚</p><h2 id="2-5-è¿‡æ»¤å™¨"><a href="#2-5-è¿‡æ»¤å™¨" class="headerlink" title="2.5 è¿‡æ»¤å™¨"></a>2.5 è¿‡æ»¤å™¨</h2><p>è¿‡æ»¤å™¨ä½œä¸ºGatewayçš„é‡è¦åŠŸèƒ½ã€‚å¸¸ç”¨äºè¯·æ±‚é‰´æƒã€æœåŠ¡è°ƒç”¨æ—¶é•¿ç»Ÿè®¡ã€ä¿®æ”¹è¯·æ±‚æˆ–å“åº”headerã€é™æµã€å»é™¤è·¯å¾„ç­‰ç­‰â€¦</p><h3 id="2-5-1-è¿‡æ»¤å™¨çš„åˆ†ç±»"><a href="#2-5-1-è¿‡æ»¤å™¨çš„åˆ†ç±»" class="headerlink" title="2.5.1 è¿‡æ»¤å™¨çš„åˆ†ç±»"></a>2.5.1 è¿‡æ»¤å™¨çš„åˆ†ç±»</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">é»˜è®¤è¿‡æ»¤å™¨ï¼šå‡ºå‚è‡ªå¸¦ï¼Œå®ç°å¥½äº†æ‹¿æ¥å°±ç”¨ï¼Œä¸éœ€è¦å®ç°</span></span><br><span class="line">  <span class="attr">å…¨å±€é»˜è®¤è¿‡æ»¤å™¨</span></span><br><span class="line">  <span class="attr">å±€éƒ¨é»˜è®¤è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="attr">è‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼šæ ¹æ®éœ€æ±‚è‡ªå·±å®ç°ï¼Œå®ç°åéœ€é…ç½®ï¼Œç„¶åæ‰èƒ½ç”¨å“¦ã€‚</span></span><br><span class="line">  <span class="attr">å…¨å±€è¿‡æ»¤å™¨ï¼šä½œç”¨åœ¨æ‰€æœ‰è·¯ç”±ä¸Šã€‚</span></span><br><span class="line">  <span class="attr">å±€éƒ¨è¿‡æ»¤å™¨ï¼šé…ç½®åœ¨å…·ä½“è·¯ç”±ä¸‹ï¼Œåªä½œç”¨åœ¨å½“å‰è·¯ç”±ä¸Šã€‚</span></span><br></pre></td></tr></table></figure><p>é»˜è®¤è¿‡æ»¤å™¨å‡ åä¸ªï¼Œå¸¸è§å¦‚ä¸‹ï¼š</p><table><thead><tr><th>è¿‡æ»¤å™¨åç§°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>AddRequestHeader</td><td>å¯¹åŒ¹é…ä¸Šçš„è¯·æ±‚åŠ ä¸ŠHeader</td></tr><tr><td>AddRequestParameters</td><td>å¯¹åŒ¹é…ä¸Šçš„è¯·æ±‚è·¯ç”±</td></tr><tr><td>AddResponseHeader</td><td>å¯¹ä»ç½‘å…³è¿”å›çš„å“åº”æ·»åŠ Header</td></tr><tr><td>StripPrefix</td><td>å¯¹åŒ¹é…ä¸Šçš„è¯·æ±‚è·¯å¾„å»é™¤å‰ç¼€</td></tr></tbody></table><p>è¯¦ç»†è¯´æ˜å®˜æ–¹<a href="https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.1.1.RELEASE/single/spring-cloud-gateway.html#_gatewayfilter_factories">é“¾æ¥</a></p><h3 id="2-5-2-é»˜è®¤è¿‡æ»¤å™¨é…ç½®"><a href="#2-5-2-é»˜è®¤è¿‡æ»¤å™¨é…ç½®" class="headerlink" title="2.5.2 é»˜è®¤è¿‡æ»¤å™¨é…ç½®"></a>2.5.2 é»˜è®¤è¿‡æ»¤å™¨é…ç½®</h3><p>é»˜è®¤è¿‡æ»¤å™¨æœ‰ä¸¤ä¸ªï¼šå…¨å±€é»˜è®¤è¿‡æ»¤å™¨å’Œå±€éƒ¨é»˜è®¤è¿‡æ»¤å™¨ã€‚</p><p><strong>å…¨å±€è¿‡æ»¤å™¨ï¼šå¯¹è¾“å‡ºå“åº”å¤´è®¾ç½®å±æ€§</strong></p><p>å¯¹è¾“å‡ºçš„å“åº”è®¾ç½®å…¶å¤´éƒ¨å±æ€§åç§°ä¸ºX-Response-Default-MyName,å€¼ä¸ºyuefeng</p><p>ä¿®æ”¹é…ç½®æ–‡ä»¶</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">     <span class="comment"># é…ç½®å…¨å±€é»˜è®¤è¿‡æ»¤å™¨</span></span><br><span class="line">      <span class="attr">default-filters:</span></span><br><span class="line">      <span class="comment"># å¾€å“åº”è¿‡æ»¤å™¨ä¸­åŠ å…¥ä¿¡æ¯</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">AddResponseHeader=X-Response-Default-MyName,yuefeng</span></span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æµè§ˆå™¨å“åº”å¤´ä¿¡æ¯!</p><p><strong>å±€éƒ¨è¿‡æ»¤å™¨ï¼š</strong>é€šè¿‡å±€éƒ¨é»˜è®¤è¿‡æ»¤å™¨ï¼Œä¿®æ”¹è¯·æ±‚è·¯å¾„ã€‚å±€éƒ¨è¿‡æ»¤å™¨åœ¨è¿™é‡Œä»‹ç»ä¸¤ç§ï¼šæ·»åŠ è·¯å¾„å‰ç¼€ã€å»é™¤è·¯å¾„å‰ç¼€ã€‚</p><p><strong>ç¬¬ä¸€ï¼šæ·»åŠ è·¯å¾„å‰ç¼€ï¼š</strong></p><p>åœ¨gatewayä¸­å¯ä»¥é€šè¿‡é…ç½®è·¯ç”±çš„è¿‡æ»¤å™¨PrefixPath å®ç°æ˜ å°„è·¯å¾„ä¸­çš„å‰ç¼€</p><p>é…ç½®è¯·æ±‚åœ°å€æ·»åŠ è·¯å¾„å‰ç¼€è¿‡æ»¤å™¨</p><p><img src="../../../img/md_img/springcloud02/1563271983446.png" alt="1563271983446"></p><p>ä¸Šå›¾é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="comment"># åº”ç”¨å</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">api-gateway</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="comment">#idå”¯ä¸€æ ‡è¯†ï¼Œå¯è‡ªå®šä¹‰</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">user-service-route</span></span><br><span class="line">          <span class="comment">#è·¯ç”±çš„æœåŠ¡åœ°å€</span></span><br><span class="line">          <span class="comment">#uri: http://localhost:18081</span></span><br><span class="line">          <span class="comment">#lbåè®®è¡¨ç¤ºä»Eurekaæ³¨å†Œä¸­å¿ƒè·å–æœåŠ¡è¯·æ±‚åœ°å€</span></span><br><span class="line">          <span class="comment">#user-providerè®¿é—®çš„æœåŠ¡åç§°ã€‚</span></span><br><span class="line">          <span class="comment">#è·¯ç”±åœ°å€å¦‚æœé€šè¿‡lbåè®®åŠ æœåŠ¡åç§°æ—¶ï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨è´Ÿè½½å‡è¡¡è®¿é—®å¯¹åº”æœåŠ¡</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://user-provider</span></span><br><span class="line">          <span class="comment"># è·¯ç”±æ‹¦æˆªçš„åœ°å€é…ç½®ï¼ˆæ–­è¨€ï¼‰</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/**</span></span><br><span class="line">          <span class="attr">filters:</span></span><br><span class="line">            <span class="comment"># è¯·æ±‚åœ°å€æ·»åŠ è·¯å¾„å‰ç¼€è¿‡æ»¤å™¨</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">PrefixPath=/user</span></span><br><span class="line">      <span class="attr">default-filters:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">AddResponseHeader=X-Response-Default-MyName,yuefeng</span></span><br></pre></td></tr></table></figure><p>è·¯ç”±åœ°å€ä¿¡æ¯ï¼š</p><table><thead><tr><th>é…ç½®</th><th>è®¿é—®åœ°å€</th><th>è·¯ç”±åœ°å€</th></tr></thead><tbody><tr><td>PrefixPath=/user</td><td><a href="http://localhost:18084/find/2">http://localhost:18084/find/2</a></td><td><a href="http://localhost:18081/user/find/2">http://localhost:18081/user/find/2</a></td></tr></tbody></table><p><strong>ç¬¬äºŒï¼šå»é™¤è·¯å¾„å‰ç¼€ï¼š</strong></p><p>åœ¨gatewayä¸­é€šè¿‡é…ç½®è·¯ç”±è¿‡æ»¤å™¨StripPrefixï¼Œå®ç°æ˜ å°„è·¯å¾„ä¸­åœ°å€çš„å»é™¤ã€‚é€šè¿‡StripPrefix=1æ¥æŒ‡å®šè·¯ç”±è¦å»æ‰çš„å‰ç¼€ä¸ªæ•°ã€‚å¦‚ï¼šè·¯å¾„/api/user/1å°†ä¼šè¢«è·¯ç”±åˆ°/user/1ã€‚</p><p>é…ç½®å»é™¤è·¯å¾„å‰ç¼€è¿‡æ»¤å™¨</p><p><img src="../../../img/md_img/springcloud02/1563272403821.png" alt="1563272403821"></p><p>ä¸Šå›¾é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="comment"># åº”ç”¨å</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">api-gateway</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="comment">#idå”¯ä¸€æ ‡è¯†ï¼Œå¯è‡ªå®šä¹‰</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">user-service-route</span></span><br><span class="line">          <span class="comment">#è·¯ç”±çš„æœåŠ¡åœ°å€</span></span><br><span class="line">          <span class="comment">#uri: http://localhost:18081</span></span><br><span class="line">          <span class="comment">#lbåè®®è¡¨ç¤ºä»Eurekaæ³¨å†Œä¸­å¿ƒè·å–æœåŠ¡è¯·æ±‚åœ°å€</span></span><br><span class="line">          <span class="comment">#user-providerè®¿é—®çš„æœåŠ¡åç§°ã€‚</span></span><br><span class="line">          <span class="comment">#è·¯ç”±åœ°å€å¦‚æœé€šè¿‡lbåè®®åŠ æœåŠ¡åç§°æ—¶ï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨è´Ÿè½½å‡è¡¡è®¿é—®å¯¹åº”æœåŠ¡</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://user-provider</span></span><br><span class="line">          <span class="comment"># è·¯ç”±æ‹¦æˆªçš„åœ°å€é…ç½®ï¼ˆæ–­è¨€ï¼‰</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/**</span></span><br><span class="line">          <span class="attr">filters:</span></span><br><span class="line">            <span class="comment"># è¯·æ±‚åœ°å€æ·»åŠ è·¯å¾„å‰ç¼€è¿‡æ»¤å™¨</span></span><br><span class="line">            <span class="comment">#- PrefixPath=/user</span></span><br><span class="line">            <span class="comment"># å»é™¤è·¯å¾„å‰ç¼€è¿‡æ»¤å™¨</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">StripPrefix=1</span></span><br><span class="line">      <span class="attr">default-filters:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">AddResponseHeader=X-Response-Default-MyName,yuefeng</span></span><br></pre></td></tr></table></figure><p>è·¯ç”±åœ°å€ä¿¡æ¯ï¼š</p><table><thead><tr><th>é…ç½®</th><th>è®¿é—®åœ°å€</th><th>è·¯ç”±åœ°å€</th></tr></thead><tbody><tr><td>StripPrefix=1</td><td><a href="http://localhost:18084/api/user/find/2">http://localhost:18084/api/user/find/2</a></td><td><a href="http://localhost:18081/user/find/2">http://localhost:18081/user/find/2</a></td></tr><tr><td>StripPrefix=2</td><td><a href="http://localhost:18084/api/r/user/find/2">http://localhost:18084/api/r/user/find/2</a></td><td><a href="http://localhost:18081/user/find/2">http://localhost:18081/user/find/2</a></td></tr></tbody></table><h3 id="2-5-3-è‡ªå®šä¹‰è¿‡æ»¤å™¨æ¡ˆä¾‹"><a href="#2-5-3-è‡ªå®šä¹‰è¿‡æ»¤å™¨æ¡ˆä¾‹" class="headerlink" title="2.5.3 è‡ªå®šä¹‰è¿‡æ»¤å™¨æ¡ˆä¾‹"></a>2.5.3 è‡ªå®šä¹‰è¿‡æ»¤å™¨æ¡ˆä¾‹</h3><p>è‡ªå®šä¹‰è¿‡æ»¤å™¨ä¹Ÿæœ‰ä¸¤ä¸ªï¼šå…¨å±€è‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼Œå’Œå±€éƒ¨è‡ªå®šä¹‰è¿‡æ»¤å™¨ã€‚</p><p>è‡ªå®šä¹‰å…¨å±€è¿‡æ»¤å™¨çš„æ¡ˆä¾‹ï¼Œè‡ªå®šä¹‰å±€éƒ¨è¿‡æ»¤å™¨çš„æ¡ˆä¾‹ã€‚</p><p><strong>è‡ªå®šä¹‰å…¨å±€è¿‡æ»¤å™¨çš„æ¡ˆä¾‹ï¼š</strong>æ¨¡æ‹Ÿç™»é™†æ ¡éªŒã€‚</p><p>åŸºæœ¬é€»è¾‘ï¼šå¦‚æœè¯·æ±‚ä¸­æœ‰Tokenå‚æ•°ï¼Œåˆ™è®¤ä¸ºè¯·æ±‚æœ‰æ•ˆæ”¾è¡Œï¼Œå¦‚æœæ²¡æœ‰åˆ™æ‹¦æˆªæç¤ºæˆæƒæ— æ•ˆ</p><h4 id="2-5-3-1-å…¨å±€è¿‡æ»¤å™¨è‡ªå®šä¹‰ï¼š"><a href="#2-5-3-1-å…¨å±€è¿‡æ»¤å™¨è‡ªå®šä¹‰ï¼š" class="headerlink" title="2.5.3.1 å…¨å±€è¿‡æ»¤å™¨è‡ªå®šä¹‰ï¼š"></a>2.5.3.1 å…¨å±€è¿‡æ»¤å™¨è‡ªå®šä¹‰ï¼š</h4><p><strong>å®ç°æ­¥éª¤ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.åœ¨gateway-serviceå·¥ç¨‹ç¼–å†™å…¨å±€è¿‡æ»¤å™¨ç±»GlobalFilter,Ordered</span><br><span class="line">2.ç¼–å†™ä¸šåŠ¡é€»è¾‘ä»£ç </span><br><span class="line">3.è®¿é—®æ¥å£æµ‹è¯•ï¼ŒåŠ tokenå’Œä¸åŠ tokenã€‚</span><br></pre></td></tr></table></figure><p><strong>å®ç°è¿‡ç¨‹ï¼š</strong></p><p>åœ¨<code>gateway-service</code>ä¸­åˆ›å»º<code>com.yuefeng.filter.LoginGlobalFilter</code>å…¨å±€è¿‡æ»¤å™¨ç±»,ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginGlobalFilter</span> <span class="keyword">implements</span> <span class="title">GlobalFilter</span>, <span class="title">Ordered</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/***</span></span><br><span class="line"><span class="comment">     * è¿‡æ»¤æ‹¦æˆª</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> exchange</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> chain</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Mono&lt;Void&gt; <span class="title">filter</span><span class="params">(ServerWebExchange exchange, GatewayFilterChain chain)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//è·å–è¯·æ±‚å‚æ•°</span></span><br><span class="line">        String token = exchange.getRequest().getQueryParams().getFirst(<span class="string">&quot;token&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¦‚æœtokenä¸ºç©ºï¼Œåˆ™è¡¨ç¤ºæ²¡æœ‰ç™»å½•</span></span><br><span class="line">        <span class="keyword">if</span>(StringUtils.isEmpty(token))&#123;</span><br><span class="line">            <span class="comment">//æ²¡ç™»å½•,çŠ¶æ€è®¾ç½®403</span></span><br><span class="line">            exchange.getResponse().setStatusCode(HttpStatus.PAYLOAD_TOO_LARGE);</span><br><span class="line">            <span class="comment">//ç»“æŸè¯·æ±‚</span></span><br><span class="line">            <span class="keyword">return</span> exchange.getResponse().setComplete();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ”¾è¡Œ</span></span><br><span class="line">        <span class="keyword">return</span> chain.filter(exchange);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/***</span></span><br><span class="line"><span class="comment">     * å®šä¹‰è¿‡æ»¤å™¨æ‰§è¡Œé¡ºåº</span></span><br><span class="line"><span class="comment">     * è¿”å›å€¼è¶Šå°ï¼Œè¶Šé å‰æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getOrder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ï¼šä¸æºå¸¦token  <code>&lt;http://localhost:18084/api/user/find/2&gt;</code>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="../../../img/md_img/springcloud02/1563273974252.png" alt="1563273974252"></p><p>æµ‹è¯•ï¼šæºå¸¦token <code>&lt;http://localhost:18084/api/user/find/2?token=abc&gt;</code> æ­¤æ—¶å¯ä»¥æ­£å¸¸è®¿é—®ã€‚</p><h4 id="2-5-3-2-å±€éƒ¨è¿‡æ»¤å™¨å®šä¹‰"><a href="#2-5-3-2-å±€éƒ¨è¿‡æ»¤å™¨å®šä¹‰" class="headerlink" title="2.5.3.2 å±€éƒ¨è¿‡æ»¤å™¨å®šä¹‰"></a>2.5.3.2 å±€éƒ¨è¿‡æ»¤å™¨å®šä¹‰</h4><p>è‡ªå®šä¹‰å±€éƒ¨è¿‡æ»¤å™¨ï¼Œè¯¥è¿‡æ»¤å™¨åœ¨æ§åˆ¶å°è¾“å‡ºé…ç½®æ–‡ä»¶ä¸­æŒ‡å®šåç§°çš„è¯·æ±‚å‚æ•°åŠå‚æ•°çš„å€¼,ä»¥åŠåˆ¤æ–­æ˜¯å¦æºå¸¦è¯·æ±‚ä¸­å‚æ•°,æ‰“å°.</p><p><strong>å®ç°æ­¥éª¤ï¼š</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1.</span> <span class="string">åœ¨gateway-serviceä¸­ç¼–å†™MyParamGatewayFilterFactoryç±»</span></span><br><span class="line"><span class="meta">2.</span> <span class="string">å®ç°ä¸šåŠ¡ä»£ç ï¼šå¾ªç¯è¯·æ±‚å‚æ•°ä¸­æ˜¯å¦åŒ…å«nameï¼Œå¦‚æœåŒ…å«åˆ™è¾“å‡ºå‚æ•°å€¼,å¹¶æ‰“å°åœ¨ç¬¬ä¸‰æ­¥é…ç½®çš„å‚æ•°åå’Œå€¼</span></span><br><span class="line"><span class="meta">3.</span> <span class="string">ä¿®æ”¹é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="meta">4.</span> <span class="string">è®¿é—®è¯·æ±‚æµ‹è¯•ï¼Œå¸¦nameå‚æ•°</span></span><br></pre></td></tr></table></figure><p><strong>å®ç°è¿‡ç¨‹ï¼š</strong></p><p>åœ¨gateway_serviceä¸­ç¼–å†™MyParamGatewayFilterFactoryç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyParamGatewayFilterFactory</span> <span class="keyword">extends</span> <span class="title">AbstractNameValueGatewayFilterFactory</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤„ç†è¿‡ç¨‹  é»˜è®¤éœ€è¦åœ¨é…ç½®é…ç½®æ–‡ä»¶ä¸­é…ç½® NAME ,VALUE</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> config</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> GatewayFilter <span class="title">apply</span><span class="params">(NameValueConfig config)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> GatewayFilter() &#123;</span><br><span class="line">            <span class="comment">//- MyParam=name,value</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Mono&lt;Void&gt; <span class="title">filter</span><span class="params">(ServerWebExchange exchange, GatewayFilterChain chain)</span> </span>&#123;</span><br><span class="line">                String name111 = config.getName();<span class="comment">//è·å–å‚æ•°ånameçš„å€¼</span></span><br><span class="line">                String value111 = config.getValue();<span class="comment">//è·å–å‚æ•°åvalueçš„å€¼</span></span><br><span class="line">                System.out.println(<span class="string">&quot;è·å–é…ç½®ä¸­çš„å‚æ•°çš„NAMEå€¼:&quot;</span> + name111);</span><br><span class="line">                System.out.println(<span class="string">&quot;è·å–é…ç½®ä¸­çš„å‚æ•°çš„VALUEå€¼:&quot;</span> + value111);</span><br><span class="line">                <span class="comment">//è·å–å‚æ•°å€¼</span></span><br><span class="line">                String name = exchange.getRequest().getQueryParams().getFirst(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">                <span class="keyword">if</span> (!StringUtils.isEmpty(name)) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;å“ˆå“ˆ:&quot;</span> + name);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//æ·»åŠ åˆ°å¤´ä¿¡æ¯æˆ–è€…ä½œä¸ºå‚æ•°ä¼ é€’ç­‰ç­‰.</span></span><br><span class="line">                <span class="keyword">return</span> chain.filter(exchange);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹application.ymlé…ç½®æ–‡ä»¶</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">filters:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">MyParam=name,yuefeng</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•è®¿é—®ï¼Œæ£€æŸ¥åå°æ˜¯å¦è¾“å‡ºnameå’Œyuefengï¼›è®¿é—®<code>&lt;http://localhost:18084/api/user/find/2?name=yuefeng&amp;tomen=aaa&gt;</code>ä¼šè¾“å‡ºã€‚</p><h3 id="2-5-4-å¾®æœåŠ¡æ¶æ„åŠ å…¥Gatewayå"><a href="#2-5-4-å¾®æœåŠ¡æ¶æ„åŠ å…¥Gatewayå" class="headerlink" title="2.5.4 å¾®æœåŠ¡æ¶æ„åŠ å…¥Gatewayå"></a>2.5.4 å¾®æœåŠ¡æ¶æ„åŠ å…¥Gatewayå</h3><p><img src="../../../img/md_img/springcloud02/abc.jpg"></p><ul><li>ä¸ç®¡æ˜¯æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œè¿˜æ˜¯æœåŠ¡å†…éƒ¨è°ƒç”¨ã€‚ä¸€åˆ‡å¯¹æœåŠ¡çš„è¯·æ±‚éƒ½å¯ç»è¿‡ç½‘å…³ã€‚</li><li>ç½‘å…³å®ç°é‰´æƒã€åŠ¨æ€è·¯ç”±ç­‰ç­‰æ“ä½œã€‚</li><li>Gatewayå°±æ˜¯æˆ‘ä»¬æœåŠ¡çš„ç»Ÿä¸€å…¥å£</li></ul><h2 id="2-4-å°ç»“"><a href="#2-4-å°ç»“" class="headerlink" title="2.4 å°ç»“"></a>2.4 å°ç»“</h2><ul><li><p>ç½‘å…³çš„ä½œç”¨</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1.ä¸ºå¾®æœåŠ¡æ¶æ„æä¾›ä¸€ç§ç®€å•æœ‰æ•ˆç»Ÿä¸€çš„APIè·¯ç”±ç®¡ç†æ–¹å¼</span></span><br><span class="line"><span class="attr">2.å¯ä»¥åœ¨ç½‘å…³ä¸­å®ç°å¾®æœåŠ¡é‰´æƒã€å®‰å…¨æ§åˆ¶ã€è¯·æ±‚ç›‘æ§ã€é™æµ</span></span><br></pre></td></tr></table></figure></li><li><p>ä¼šé…ç½®åŠ¨æ€è·¯ç”±</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ä½¿ç”¨lbé…ç½®ï¼Œèƒ½æ ¹æ®æœåŠ¡åå­—åŠ¨æ€è¯·æ±‚ã€‚</span></span><br></pre></td></tr></table></figure></li><li><p>ä¼šé…ç½®è¿‡æ»¤å™¨</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">é»˜è®¤è¿‡æ»¤å™¨ï¼šdefault-filters</span>:<span class="string"></span></span><br></pre></td></tr></table></figure></li><li><p>èƒ½è‡ªå®šä¹‰å…¨å±€è¿‡æ»¤å™¨</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ç¼–å†™è¿‡æ»¤å™¨ç±»ï¼Œå®ç°GlobalFilterå’ŒOrderedï¼Œåœ¨filteræ–¹æ³•ä¸­å®ç°è¿‡æ»¤ã€‚</span></span><br></pre></td></tr></table></figure><h1 id="3-Spring-Cloud-Config"><a href="#3-Spring-Cloud-Config" class="headerlink" title="3.Spring Cloud Config"></a>3.Spring Cloud Config</h1></li></ul><h2 id="3-1-Configç®€ä»‹"><a href="#3-1-Configç®€ä»‹" class="headerlink" title="3.1 Configç®€ä»‹"></a>3.1 Configç®€ä»‹</h2><p>åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œç”±äºæœåŠ¡æ•°é‡éå¸¸å¤šï¼Œé…ç½®æ–‡ä»¶åˆ†æ•£åœ¨ä¸åŒå¾®æœåŠ¡é¡¹ç›®ä¸­ï¼Œç®¡ç†æå…¶ä¸æ–¹ä¾¿ã€‚ä¸ºäº†æ–¹ä¾¿é…ç½®æ–‡ä»¶é›†ä¸­ç®¡ç†ï¼Œéœ€è¦åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒç»„ä»¶ã€‚åœ¨Spring Cloudä¸­ï¼Œæä¾›äº†Spring Cloud Configï¼Œå®ƒæ”¯æŒé…ç½®æ–‡ä»¶æ”¾åœ¨é…ç½®æœåŠ¡çš„æœ¬åœ°ï¼Œä¹Ÿæ”¯æŒé…ç½®æ–‡ä»¶æ”¾åœ¨è¿œç¨‹ä»“åº“Git(GitHubã€ç äº‘)ã€‚é…ç½®ä¸­å¿ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¾®æœåŠ¡ï¼ŒåŒæ ·éœ€è¦æ³¨å†Œåˆ°EurekaæœåŠ¡ä¸­å¿ƒï¼</p><p><img src="../../../img/md_img/springcloud02/1558282481764-1621502523335.png" alt="1558282481764"></p><p>â€‹                                                                            ã€é…ç½®ä¸­å¿ƒçš„æ¶æ„å›¾ã€‘</p><h2 id="3-2Gité…ç½®ç®¡ç†"><a href="#3-2Gité…ç½®ç®¡ç†" class="headerlink" title="3.2Gité…ç½®ç®¡ç†"></a>3.2Gité…ç½®ç®¡ç†</h2><h3 id="3-2-1è¿œç¨‹Gitä»“åº“"><a href="#3-2-1è¿œç¨‹Gitä»“åº“" class="headerlink" title="3.2.1è¿œç¨‹Gitä»“åº“"></a>3.2.1è¿œç¨‹Gitä»“åº“</h3><ul><li>çŸ¥åçš„Gitè¿œç¨‹ä»“åº“æœ‰å›½å¤–çš„GitHubå’Œå›½å†…çš„ç äº‘(gitee)ï¼›</li><li>GitHubä¸»æœåŠ¡åœ¨å¤–ç½‘ï¼Œè®¿é—®ç»å¸¸ä¸ç¨³å®šï¼Œå¦‚æœå¸Œæœ›æœåŠ¡ç¨³å®šï¼Œå¯ä»¥ä½¿ç”¨ç äº‘ï¼›</li><li>ç äº‘è®¿é—®åœ°å€ï¼š<a href="http://gitee.com/">http://gitee.com</a></li></ul><h3 id="3-2-2-åˆ›å»ºè¿œç¨‹ä»“åº“"><a href="#3-2-2-åˆ›å»ºè¿œç¨‹ä»“åº“" class="headerlink" title="3.2.2 åˆ›å»ºè¿œç¨‹ä»“åº“"></a>3.2.2 åˆ›å»ºè¿œç¨‹ä»“åº“</h3><p>é¦–å…ˆä½¿ç”¨ç äº‘ä¸Šçš„gitä»“åº“éœ€è¦å…ˆæ³¨å†Œè´¦æˆ·</p><p>è´¦æˆ·æ³¨å†Œå®Œæˆï¼Œç„¶åä½¿ç”¨è´¦æˆ·ç™»å½•ç äº‘æ§åˆ¶å°å¹¶åˆ›å»ºå…¬å¼€ä»“åº“</p><p><img src="../../../img/md_img/springcloud02/1563278785689.png" alt="1563278785689"></p><p>é…ç½®ä»“åº“ åç§°å’Œè·¯å¾„</p><p><img src="../../../img/md_img/springcloud02/1563278922857.png" alt="1563278922857"></p><h3 id="3-2-3-åˆ›å»ºé…ç½®æ–‡ä»¶"><a href="#3-2-3-åˆ›å»ºé…ç½®æ–‡ä»¶" class="headerlink" title="3.2.3 åˆ›å»ºé…ç½®æ–‡ä»¶"></a>3.2.3 åˆ›å»ºé…ç½®æ–‡ä»¶</h3><p>åœ¨æ–°å»ºçš„ä»“åº“ä¸­åˆ›å»ºéœ€è¦è¢«ç»Ÿä¸€é…ç½®ç®¡ç†çš„é…ç½®æ–‡ä»¶</p><p><img src="../../../img/md_img/springcloud02/1563278978078.png" alt="1563278978078"></p><p>æ–‡ä»¶å‘½åæœ‰è§„åˆ™ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">é…ç½®æ–‡ä»¶çš„å‘½åæ–¹å¼ï¼š&#123;application&#125;-&#123;profile&#125;.ymlæˆ–&#123;application&#125;-&#123;profile&#125;.properties</span></span><br><span class="line"><span class="attr">applicationä¸ºåº”ç”¨åç§°</span></span><br><span class="line"><span class="attr">profileç”¨äºåŒºåˆ†å¼€å‘ç¯å¢ƒdevï¼Œæµ‹è¯•ç¯å¢ƒtestï¼Œç”Ÿäº§ç¯å¢ƒproç­‰</span></span><br><span class="line">  <span class="meta">å¼€å‘ç¯å¢ƒ</span> <span class="string">user-dev.yml</span></span><br><span class="line">  <span class="meta">æµ‹è¯•ç¯å¢ƒ</span> <span class="string">user-test.yml</span></span><br><span class="line">  <span class="meta">ç”Ÿäº§ç¯å¢ƒ</span> <span class="string">user-pro.yml</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ªuser-provider-dev.ymlæ–‡ä»¶</p><p>å°†user-providerå·¥ç¨‹é‡Œçš„é…ç½®æ–‡ä»¶application.ymlå†…å®¹å¤åˆ¶è¿›å»ã€‚</p><p><img src="../../../img/md_img/springcloud02/1563279131699.png" alt="1563279131699"></p><p>åˆ›å»ºå®Œuser-provider-dev.ymlé…ç½®æ–‡ä»¶ä¹‹åï¼Œgiteeä¸­çš„ä»“åº“å¦‚ä¸‹ï¼š </p><p><img src="../../../img/md_img/springcloud02/1563279208501.png" alt="1563279208501"></p><h4 id="1-æ­å»ºé…ç½®ä¸­å¿ƒå¾®æœåŠ¡"><a href="#1-æ­å»ºé…ç½®ä¸­å¿ƒå¾®æœåŠ¡" class="headerlink" title="1. æ­å»ºé…ç½®ä¸­å¿ƒå¾®æœåŠ¡"></a>1. æ­å»ºé…ç½®ä¸­å¿ƒå¾®æœåŠ¡</h4><p><strong>å®ç°æ­¥éª¤ï¼š</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1.</span> <span class="string">åˆ›å»ºé…ç½®ä¸­å¿ƒSpringBooté¡¹ç›®config_server</span></span><br><span class="line"><span class="meta">2.</span> <span class="string">é…ç½®åæ ‡ä¾èµ–</span></span><br><span class="line"><span class="meta">3.</span> <span class="string">å¯åŠ¨ç±»æ·»åŠ å¼€å¯é…ç½®ä¸­å¿ƒæœåŠ¡æ³¨è§£</span></span><br><span class="line"><span class="meta">4.</span> <span class="string">é…ç½®æœåŠ¡ä¸­å¿ƒapplication.ymlæ–‡ä»¶</span></span><br><span class="line"><span class="meta">5.</span> <span class="string">å¯åŠ¨æµ‹è¯•</span></span><br></pre></td></tr></table></figure><p><strong>å®ç°è¿‡ç¨‹ï¼š</strong></p><p>(1)åˆ›å»ºå·¥ç¨‹</p><p>å·¥ç¨‹åæ ‡</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;artifactId&gt;config-server&lt;/artifactId&gt;</span></span><br><span class="line"><span class="attr">&lt;groupId&gt;com.yuefeng&lt;/groupId&gt;</span></span><br><span class="line"><span class="attr">&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;</span></span><br></pre></td></tr></table></figure><p>(2)pom.xmlä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springcloud-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yuefeng<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>config-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Eurekaå®¢æˆ·ç«¯ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--é…ç½®ä¸­å¿ƒ--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-config-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>(3)åˆ›å»ºå¯åŠ¨ç±»</p><p>åœ¨<code>config-server</code>å·¥ç¨‹ä¸­åˆ›å»ºå¯åŠ¨ç±»<code>com.yuefeng.ConfigServerApplication</code>,ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span><span class="comment">//å¼€å¯Eurekaå®¢æˆ·ç«¯å‘ç°åŠŸèƒ½</span></span><br><span class="line"><span class="meta">@EnableConfigServer</span><span class="comment">//å¼€å¯é…ç½®æœåŠ¡æ”¯æŒ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConfigServerApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(ConfigServerApplication.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(4)application.ymlé…ç½®æ–‡ä»¶</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ³¨é‡Šç‰ˆæœ¬</span></span><br><span class="line"><span class="attr">server</span>:<span class="string"></span></span><br><span class="line">  <span class="attr">port</span>: <span class="string">18085 # ç«¯å£å·</span></span><br><span class="line"><span class="attr">spring</span>:<span class="string"></span></span><br><span class="line">  <span class="attr">application</span>:<span class="string"></span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">config-server # åº”ç”¨å</span></span><br><span class="line">  <span class="attr">cloud</span>:<span class="string"></span></span><br><span class="line">    <span class="attr">config</span>:<span class="string"></span></span><br><span class="line">      <span class="attr">server</span>:<span class="string"></span></span><br><span class="line">        <span class="attr">git</span>:<span class="string"></span></span><br><span class="line"><span class="comment">          # é…ç½®giteeçš„ä»“åº“åœ°å€</span></span><br><span class="line">          <span class="attr">uri</span>: <span class="string">https://gitee.com/skllll/config.git</span></span><br><span class="line"><span class="comment"># EurekaæœåŠ¡ä¸­å¿ƒé…ç½®</span></span><br><span class="line"><span class="attr">eureka</span>:<span class="string"></span></span><br><span class="line">  <span class="attr">client</span>:<span class="string"></span></span><br><span class="line">    <span class="meta">service-url</span>:<span class="string"></span></span><br><span class="line"><span class="comment">      # æ³¨å†ŒEureka Serveré›†ç¾¤</span></span><br><span class="line">      <span class="attr">defaultZone</span>: <span class="string">http://127.0.0.1:7001/eureka</span></span><br><span class="line"><span class="comment"># com.yuefeng åŒ…ä¸‹çš„æ—¥å¿—çº§åˆ«éƒ½ä¸ºDebug</span></span><br><span class="line"><span class="attr">logging</span>:<span class="string"></span></span><br><span class="line">  <span class="attr">level</span>:<span class="string"></span></span><br><span class="line">    <span class="attr">com</span>: <span class="string">debug</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šä¸Šè¿°spring.cloud.config.server.git.uriæ˜¯åœ¨ç äº‘åˆ›å»ºçš„ä»“åº“åœ°å€</p><p>(5)æµ‹è¯•</p><p>å¯åŠ¨<code>config-server</code>ï¼Œè®¿é—®<code>&lt;http://localhost:18085/user-provider-dev.yml&gt;</code>ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="../../../img/md_img/springcloud02/1563276201436.png" alt=" "></p><p>å¯ä»¥æŸ¥çœ‹åˆ°ç äº‘ä¸Šçš„æ–‡ä»¶æ•°æ®ï¼Œå¹¶ä¸”å¯ä»¥åœ¨giteeä¸Šä¿®æ”¹user-dev.ymlï¼Œç„¶ååˆ·æ–°ä¸Šè¿°æµ‹è¯•åœ°å€ä¹Ÿèƒ½åŠæ—¶æ›´æ–°æ•°æ®</p><h4 id="2-æœåŠ¡å»è·å–é…ç½®ä¸­å¿ƒé…ç½®"><a href="#2-æœåŠ¡å»è·å–é…ç½®ä¸­å¿ƒé…ç½®" class="headerlink" title="2.æœåŠ¡å»è·å–é…ç½®ä¸­å¿ƒé…ç½®"></a>2.æœåŠ¡å»è·å–é…ç½®ä¸­å¿ƒé…ç½®</h4><p><strong>ç›®æ ‡ï¼šæ”¹é€ user-providerå·¥ç¨‹ï¼Œé…ç½®æ–‡ä»¶ä¸å†ç”±å¾®æœåŠ¡é¡¹ç›®æä¾›ï¼Œè€Œæ˜¯ä»é…ç½®ä¸­å¿ƒè·å–ã€‚</strong></p><p><strong>å®ç°æ­¥éª¤ï¼š</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1.</span> <span class="string">æ·»åŠ é…ç½®ä¸­å¿ƒå®¢æˆ·ç«¯å¯åŠ¨ä¾èµ–</span></span><br><span class="line"><span class="meta">2.</span> <span class="string">ä¿®æ”¹æœåŠ¡æä¾›è€…çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="meta">3.</span> <span class="string">å¯åŠ¨æœåŠ¡</span></span><br><span class="line"><span class="meta">4.</span> <span class="string">æµ‹è¯•æ•ˆæœ</span></span><br></pre></td></tr></table></figure><p><strong>å®ç°è¿‡ç¨‹ï¼š</strong></p><p>(1)æ·»åŠ ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--spring cloud é…ç½®ä¸­å¿ƒ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-config<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>(2)ä¿®æ”¹é…ç½®</p><p>åˆ é™¤user-providerå·¥ç¨‹çš„application.ymlæ–‡ä»¶</p><p>åˆ›å»ºuser-providerå·¥ç¨‹bootstrap.ymlé…ç½®æ–‡ä»¶ï¼Œé…ç½®å†…å®¹å¦‚ä¸‹</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ³¨é‡Šç‰ˆæœ¬</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">user-provider</span> <span class="comment"># ä¸è¿œç¨‹ä»“åº“ä¸­çš„é…ç½®æ–‡ä»¶çš„applicationä¿æŒä¸€è‡´ï¼Œ&#123;application&#125;-&#123;profile&#125;.yml</span></span><br><span class="line">      <span class="attr">profile:</span> <span class="string">dev</span> <span class="comment"># è¿œç¨‹ä»“åº“ä¸­çš„é…ç½®æ–‡ä»¶çš„profileä¿æŒä¸€è‡´</span></span><br><span class="line">      <span class="attr">label:</span> <span class="string">master</span> <span class="comment"># è¿œç¨‹ä»“åº“ä¸­çš„ç‰ˆæœ¬ä¿æŒä¸€è‡´</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment"># ä½¿ç”¨é…ç½®ä¸­å¿ƒ</span></span><br><span class="line">        <span class="attr">service-id:</span> <span class="string">config-server</span> <span class="comment"># é…ç½®ä¸­å¿ƒæœåŠ¡id</span></span><br><span class="line"><span class="comment">#å‘EurekaæœåŠ¡ä¸­å¿ƒé›†ç¾¤æ³¨å†ŒæœåŠ¡</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://127.0.0.1:7001/eureka</span></span><br></pre></td></tr></table></figure><p>å…³äºapplication.ymlå’Œbootstrap.ymlæ–‡ä»¶çš„è¯´æ˜ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- bootstrap.ymlæ–‡ä»¶æ˜¯SpringBootçš„é»˜è®¤é…ç½®æ–‡ä»¶ï¼Œè€Œä¸”å…¶åŠ è½½æ—¶é—´ç›¸æ¯”äºapplication.ymlæ›´æ—©ã€‚</span><br><span class="line">- bootstrap.ymlå’Œapplication.ymléƒ½æ˜¯é»˜è®¤é…ç½®æ–‡ä»¶ï¼Œä½†å®šä½ä¸åŒ</span><br><span class="line">  - bootstrap.ymlå¯ä»¥ç†è§£æˆç³»ç»Ÿçº§åˆ«çš„ä¸€äº›å‚æ•°é…ç½®ï¼Œä¸€èˆ¬ä¸ä¼šå˜åŠ¨</span><br><span class="line">  - application.ymlç”¨æ¥å®šä¹‰åº”ç”¨çº§åˆ«çš„å‚æ•°</span><br><span class="line">- æ­é…spring-cloud-configä½¿ç”¨application.ymlçš„é…ç½®å¯ä»¥åŠ¨æ€æ›¿æ¢ã€‚</span><br><span class="line">- bootstrap.ymlç›¸å½“äºé¡¹ç›®å¯åŠ¨çš„å¼•å¯¼æ–‡ä»¶ï¼Œå†…å®¹ç›¸å¯¹å›ºå®š</span><br><span class="line">- application.ymlæ–‡ä»¶æ˜¯å¾®æœåŠ¡çš„å¸¸è§„é…ç½®å‚æ•°ï¼Œå˜åŒ–æ¯”è¾ƒé¢‘ç¹</span><br></pre></td></tr></table></figure><p>å¯åŠ¨æµ‹è¯•ï¼š</p><p>å¯åŠ¨æœåŠ¡ä¸­å¿ƒã€é…ç½®ä¸­å¿ƒã€ç”¨æˆ·ä¸­å¿ƒuser_service<img src="../../../img/md_img/springcloud02/1558275102243.png" alt="1558275102243"></p><p>å¦‚æœå¯åŠ¨æ²¡æŠ¥é”™ï¼Œå…¶å®å·²ç»ä½¿ç”¨ä¸Šé…ç½®ä¸­å¿ƒå†…å®¹äº†</p><p>å¯ä»¥åœ¨æœåŠ¡ä¸­å¿ƒæŸ¥çœ‹ä¹Ÿå¯ä»¥æ£€éªŒuser_serviceçš„æœåŠ¡<img src="../../../img/md_img/springcloud02/1558275137843.png" alt="1558275137843"></p><h4 id="3-é…ç½®ä¸­å¿ƒå­˜åœ¨çš„é—®é¢˜"><a href="#3-é…ç½®ä¸­å¿ƒå­˜åœ¨çš„é—®é¢˜" class="headerlink" title="3.é…ç½®ä¸­å¿ƒå­˜åœ¨çš„é—®é¢˜"></a>3.é…ç½®ä¸­å¿ƒå­˜åœ¨çš„é—®é¢˜</h4><p>(1)ä¿®æ”¹ç äº‘é…ç½®æ–‡ä»¶</p><p>ä¿®æ”¹åœ¨ç äº‘ä¸Šçš„user-provider-dev.ymlæ–‡ä»¶ï¼Œæ·»åŠ ä¸€ä¸ªå±æ€§test.message,å¦‚ä¸‹æ“ä½œï¼š</p><p><img src="../../../img/md_img/springcloud02/1563276549136.png" alt="1563276549136"></p><p>(2)è¯»å–é…ç½®æ–‡ä»¶æ•°æ®</p><p>åœ¨<code>user-provider</code>å·¥ç¨‹ä¸­åˆ›å»ºä¸€ä¸ª<code>com.yuefeng.controller.LoadConfigController</code>è¯»å–é…ç½®æ–‡ä»¶ä¿¡æ¯ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/config&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoadConfigController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;test.message&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/***</span></span><br><span class="line"><span class="comment">     * å“åº”é…ç½®æ–‡ä»¶ä¸­çš„æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/load&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">load</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> msg;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯åŠ¨è¿è¡Œ<code>user-provider</code>ï¼Œè®¿é—®<code>&lt;http://localhost:18081/config/load&gt;</code></p><p><img src="../../../img/md_img/springcloud02/1563276955927.png" alt="1563276955927"></p><p>ä¿®æ”¹ç äº‘ä¸Šçš„é…ç½®åï¼Œå‘ç°é¡¹ç›®ä¸­çš„æ•°æ®ä»ç„¶æ²¡æœ‰å˜åŒ–,åªæœ‰é¡¹ç›®é‡å¯åæ‰ä¼šå˜åŒ–ã€‚</p><h2 id="3-3-å°ç»“"><a href="#3-3-å°ç»“" class="headerlink" title="3.3 å°ç»“"></a>3.3 å°ç»“</h2><ul><li><p>é…ç½®ä¸­å¿ƒçš„ä½œç”¨:å°†å„ä¸ªå¾®æœåŠ¡çš„é…ç½®æ–‡ä»¶é›†ä¸­åˆ°ä¸€èµ·è¿›è¡Œç»Ÿä¸€ç®¡ç†ã€‚</p></li><li><p>èƒ½æ­å»ºé…ç½®ä¸­å¿ƒ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">éœ€è¦åœ¨application.ymlé…ç½®æ–‡ä»¶ä¸­æŒ‡å®šéœ€è¦è¿œç¨‹æ›´æ–°çš„ä»“åº“åœ°å€ã€‚</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹å¾®æœåŠ¡ï¼Œä»é…ç½®ä¸­å¿ƒè·å–ä¿®æ”¹çš„é…ç½®</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">åˆ›å»ºbootstrap.ymlï¼Œå¹¶åœ¨bootstrap.ymlä¸­é…ç½®</span></span><br><span class="line"><span class="comment"># æ³¨é‡Šç‰ˆæœ¬</span></span><br><span class="line"><span class="attr">spring</span>:<span class="string"></span></span><br><span class="line">  <span class="attr">cloud</span>:<span class="string"></span></span><br><span class="line">    <span class="attr">config</span>:<span class="string"></span></span><br><span class="line">      <span class="attr">name</span>: <span class="string">user-provider # ä¸è¿œç¨‹ä»“åº“ä¸­çš„é…ç½®æ–‡ä»¶çš„applicationä¿æŒä¸€è‡´ï¼Œ&#123;application&#125;-&#123;profile&#125;.yml</span></span><br><span class="line">      <span class="attr">profile</span>: <span class="string">dev # è¿œç¨‹ä»“åº“ä¸­çš„é…ç½®æ–‡ä»¶çš„profileä¿æŒä¸€è‡´</span></span><br><span class="line">      <span class="attr">label</span>: <span class="string">master # è¿œç¨‹ä»“åº“ä¸­çš„ç‰ˆæœ¬ä¿æŒä¸€è‡´</span></span><br><span class="line">      <span class="attr">discovery</span>:<span class="string"></span></span><br><span class="line">        <span class="attr">enabled</span>: <span class="string">true # ä½¿ç”¨é…ç½®ä¸­å¿ƒ</span></span><br><span class="line">        <span class="meta">service-id</span>: <span class="string">config-server # é…ç½®ä¸­å¿ƒæœåŠ¡id</span></span><br><span class="line"><span class="comment">#å‘EurekaæœåŠ¡ä¸­å¿ƒé›†ç¾¤æ³¨å†ŒæœåŠ¡</span></span><br><span class="line"><span class="attr">eureka</span>:<span class="string"></span></span><br><span class="line">  <span class="attr">client</span>:<span class="string"></span></span><br><span class="line">    <span class="meta">service-url</span>:<span class="string"></span></span><br><span class="line">      <span class="attr">defaultZone</span>: <span class="string">http://127.0.0.1:7001/eureka</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> SPringcloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springcloud01</title>
      <link href="2021/05/springcloud01/"/>
      <url>2021/05/springcloud01/</url>
      
        <content type="html"><![CDATA[<hr><!--<div class="note blue icon modern"><i class="note-icon fas fa-bullhorn"></i><p>æç¤ºæ¡†</p></div><div class="note green icon modern"><i class="note-icon fa fa-rocket"></i><p>ğŸ“š <a href="">æ–‡æ¡£ç›®å½•</a>              </p><p>ğŸš€ å¿«é€Ÿå¼€å§‹ - ğŸ“‘ ä¸»é¢˜é¡µé¢ - ğŸ›  ä¸»é¢˜é…ç½®-1 - âš”ï¸ ä¸»é¢˜é…ç½®-2 - â“ ä¸»é¢˜é—®ç­” - âš¡ï¸ è¿›é˜¶æ•™ç¨‹ - âœ¨ æ›´æ–°æ—¥èªŒ - ğŸ¤ æ‰“èµ</p></div><div class="note red icon modern"><i class="note-icon fas fa-skull-crossbones"></i><p>å±é™©æ¡†</p></div>--><hr><h1 id="1-SpringCloudä»‹ç»"><a href="#1-SpringCloudä»‹ç»" class="headerlink" title="1. SpringCloudä»‹ç»"></a>1. SpringCloudä»‹ç»</h1><h2 id="1-1-SpringCloudç®€ä»‹"><a href="#1-1-SpringCloudç®€ä»‹" class="headerlink" title="1.1 SpringCloudç®€ä»‹"></a>1.1 SpringCloudç®€ä»‹</h2><p>Spring Bootæ“…é•¿çš„æ˜¯é›†æˆï¼ŒæŠŠä¸–ç•Œä¸Šæœ€å¥½çš„æ¡†æ¶é›†æˆåˆ°è‡ªå·±é¡¹ç›®ä¸­</p><p><strong>Spring Cloudæœ¬èº«ä¹Ÿæ˜¯åŸºäºSpringBootå¼€å‘è€Œæ¥ï¼ŒSpringCloudæ˜¯ä¸€ç³»åˆ—æ¡†æ¶çš„æœ‰åºé›†åˆ,ä¹Ÿæ˜¯æŠŠéå¸¸æµè¡Œçš„å¾®æœåŠ¡çš„æŠ€æœ¯æ•´åˆåˆ°ä¸€èµ·ï¼Œæ˜¯å±äºå¾®æœåŠ¡æ¶æ„çš„ä¸€ç«™å¼æŠ€æœ¯è§£å†³æ–¹æ¡ˆã€‚</strong></p><p>Spring CloudåŒ…å«äº†ï¼š</p><p>æ³¨å†Œä¸­å¿ƒï¼šEurekaã€consulã€Zookeeper</p><p>è´Ÿè½½å‡è¡¡ï¼šRibbon</p><p>ç†”æ–­å™¨ï¼šHystrix</p><p>æœåŠ¡é€šä¿¡ï¼šFeign</p><p>ç½‘å…³ï¼šGateway</p><p>é…ç½®ä¸­å¿ƒ ï¼šconfig</p><p>æ¶ˆæ¯æ€»çº¿ï¼šBus</p><p>é›†ç¾¤çŠ¶æ€ç­‰ç­‰â€¦.åŠŸèƒ½ã€‚</p><p>Spring Cloudåè°ƒåˆ†å¸ƒå¼ç¯å¢ƒä¸­å„ä¸ªå¾®æœåŠ¡ï¼Œä¸ºå„ç±»æœåŠ¡æä¾›æ”¯æŒã€‚</p><p><img src="../../../img/md_img/springcloud01/1555072329184.png"></p><p>(2)Spring Cloudçš„ç‰ˆæœ¬</p><p><img src="../../../img/md_img/springcloud01/1563019084631.png" alt="1563019084631"></p><p>ç‰ˆæœ¬è¯´æ˜ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">SpringCloudæ˜¯ä¸€ç³»åˆ—æ¡†æ¶ç»„åˆï¼Œä¸ºäº†é¿å…ä¸æ¡†æ¶ç‰ˆæœ¬äº§ç”Ÿæ··æ·†ï¼Œé‡‡ç”¨æ–°çš„ç‰ˆæœ¬å‘½åæ–¹å¼ï¼Œå½¢å¼ä¸ºå¤§ç‰ˆæœ¬å+å­ç‰ˆæœ¬åç§°</span></span><br><span class="line">  <span class="attr">å¤§ç‰ˆæœ¬åç”¨ä¼¦æ•¦åœ°é“ç«™å</span></span><br><span class="line">  <span class="attr">å­ç‰ˆæœ¬åç§°ä¸‰ç§</span></span><br><span class="line">    <span class="attr">SNAPSHOTï¼šå¿«ç…§ç‰ˆæœ¬ï¼Œå°é²œç‰ˆï¼Œéšæ—¶å¯èƒ½ä¿®æ”¹</span></span><br><span class="line">    <span class="attr">Mç‰ˆæœ¬ï¼ŒMileStoneï¼ŒM1è¡¨ç¤ºç¬¬ä¸€ä¸ªé‡Œç¨‹ç¢‘ç‰ˆæœ¬ï¼Œä¸€èˆ¬åŒæ—¶æ ‡æ³¨PREï¼Œè¡¨ç¤ºé¢„è§ˆç‰ˆ</span></span><br><span class="line">    <span class="meta">SRï¼ŒService</span> <span class="string">Releaseï¼ŒSR1è¡¨ç¤ºç¬¬ä¸€ä¸ªæ­£å¼ç‰ˆæœ¬ï¼ŒåŒæ—¶æ ‡æ³¨GA(Generally Available)ï¼Œç¨³å®šç‰ˆ</span></span><br></pre></td></tr></table></figure><h2 id="1-2-SpringCloudä¸SpringBootç‰ˆæœ¬åŒ¹é…å…³ç³»"><a href="#1-2-SpringCloudä¸SpringBootç‰ˆæœ¬åŒ¹é…å…³ç³»" class="headerlink" title="1.2 SpringCloudä¸SpringBootç‰ˆæœ¬åŒ¹é…å…³ç³»"></a>1.2 SpringCloudä¸SpringBootç‰ˆæœ¬åŒ¹é…å…³ç³»</h2><table><thead><tr><th>SpringBoot</th><th>SpringCloud</th></tr></thead><tbody><tr><td>1.2.x</td><td>Angelç‰ˆæœ¬</td></tr><tr><td>1.3.x</td><td>Brixtonç‰ˆæœ¬</td></tr><tr><td>1.4.x</td><td>Camdenç‰ˆæœ¬</td></tr><tr><td>1.5.x</td><td>Dalstonç‰ˆæœ¬ã€Edgware</td></tr><tr><td>2.0.x</td><td>Finchleyç‰ˆæœ¬</td></tr><tr><td>2.1.x</td><td>Greenwich GAç‰ˆæœ¬ (2019å¹´2æœˆå‘å¸ƒ)</td></tr></tbody></table><p>é‰´äºSpringBootä¸SpringCloudå…³ç³»ï¼ŒSpringBootå»ºè®®é‡‡ç”¨2.1.xç‰ˆæœ¬</p><h2 id="1-34Spring-cloud-å’Œdubboæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#1-34Spring-cloud-å’Œdubboæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="1.34Spring cloud å’Œdubboæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>1.34Spring cloud å’Œdubboæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2><p>dubbo â€”&gt;<br>    + RPCåè®®<br>        + é€Ÿåº¦æ•ˆç‡é«˜<br>    + ç›®å‰åªæ”¯æŒJAVA<br>    + æœ¬èº«åŠŸèƒ½æœ‰é™ï¼ˆåªæ˜¯ä¸€ä¸ªé€šä¿¡çš„è½¯ä»¶ï¼‰<br>    + ä½¿ç”¨éº»çƒ¦</p><p>spring cloud (RestTemplateâ€“&gt;httpclient)<br>    + å±äºHTTPåè®®<br>    + é€Ÿåº¦ä½<br>    + è·¨å¹³å°ï¼Œå¾®æœåŠ¡å¯ä»¥æ˜¯ç”¨ä»»ä½•è¯­è¨€å¼€å‘çš„<br>    + æœ¬èº«æ˜¯ä¸€å¥—è§£å†³æ–¹æ¡ˆï¼ˆæ•´åˆäº†æ‰€æœ‰çš„æµè¡Œçš„æ–‡æ¡£çš„åˆ†å¸ƒå¼æ¡†æ¶ï¼‰<br>    + ä½¿ç”¨æ–¹ä¾¿é«˜</p><h1 id="2-æœåŠ¡è°ƒç”¨æ–¹å¼"><a href="#2-æœåŠ¡è°ƒç”¨æ–¹å¼" class="headerlink" title="2. æœåŠ¡è°ƒç”¨æ–¹å¼"></a>2. æœåŠ¡è°ƒç”¨æ–¹å¼</h1><h2 id="2-1-RPCå’ŒHTTP"><a href="#2-1-RPCå’ŒHTTP" class="headerlink" title="2.1 RPCå’ŒHTTP"></a>2.1 RPCå’ŒHTTP</h2><p>å¸¸è§è¿œç¨‹è°ƒç”¨æ–¹å¼ï¼š</p><p>RPC:(Remote Produce Call)è¿œç¨‹è¿‡ç¨‹è°ƒç”¨</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1.åŸºäºSocket</span></span><br><span class="line"><span class="attr">2.è‡ªå®šä¹‰æ•°æ®æ ¼å¼</span></span><br><span class="line"><span class="attr">3.é€Ÿåº¦å¿«ï¼Œæ•ˆç‡é«˜</span></span><br><span class="line"><span class="attr">4.å…¸å‹åº”ç”¨ä»£è¡¨ï¼šDubboï¼ŒWebServiceï¼ŒElasticSearché›†ç¾¤é—´äº’ç›¸è°ƒç”¨</span></span><br></pre></td></tr></table></figure><p>HTTPï¼šç½‘ç»œä¼ è¾“åè®®</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1.åŸºäºTCP/IP</span></span><br><span class="line"><span class="attr">2.è§„å®šæ•°æ®ä¼ è¾“æ ¼å¼</span></span><br><span class="line"><span class="attr">3.ç¼ºç‚¹æ˜¯æ¶ˆæ¯å°è£…æ¯”è¾ƒè‡ƒè‚¿ã€ä¼ è¾“é€Ÿåº¦æ¯”è¾ƒæ…¢</span></span><br><span class="line"><span class="attr">4.ä¼˜ç‚¹æ˜¯å¯¹æœåŠ¡æä¾›å’Œè°ƒç”¨æ–¹å¼æ²¡æœ‰ä»»ä½•æŠ€æœ¯é™å®šï¼Œè‡ªç”±çµæ´»ï¼Œæ›´ç¬¦åˆå¾®æœåŠ¡ç†å¿µ</span></span><br></pre></td></tr></table></figure><p>RPCå’ŒHTTPçš„åŒºåˆ«ï¼šRPCæ˜¯æ ¹æ®è¯­è¨€APIæ¥å®šä¹‰ï¼Œè€Œä¸æ˜¯æ ¹æ®åŸºäºç½‘ç»œçš„åº”ç”¨æ¥å®šä¹‰ã€‚</p><p>Httpå®¢æˆ·ç«¯å·¥å…·</p><p>å¸¸è§Httpå®¢æˆ·ç«¯å·¥å…·ï¼šHttpClientã€OKHttpã€URLConnectionã€‚</p><h2 id="2-2-Springçš„RestTemplate"><a href="#2-2-Springçš„RestTemplate" class="headerlink" title="2.2 Springçš„RestTemplate"></a>2.2 Springçš„RestTemplate</h2><p>(1)RestTemplateä»‹ç»</p><ul><li>RestTemplateæ˜¯Restçš„HTTPå®¢æˆ·ç«¯æ¨¡æ¿å·¥å…·ç±»</li><li>å¯¹åŸºäºHttpçš„å®¢æˆ·ç«¯è¿›è¡Œå°è£…</li><li>å®ç°å¯¹è±¡ä¸JSONçš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–</li><li>ä¸é™å®šå®¢æˆ·ç«¯ç±»å‹ï¼Œç›®å‰å¸¸ç”¨çš„3ç§å®¢æˆ·ç«¯éƒ½æ”¯æŒï¼šHttpClientã€OKHttpã€JDKåŸç”ŸURLConnection(é»˜è®¤æ–¹å¼)</li></ul><p>(1)æ­å»º<code>springcloud-day1-provider</code></p><p>è¿™é‡Œä¸æ¼”ç¤ºè¯¦ç»†è¿‡ç¨‹äº†ï¼Œå¤§å®¶ç›´æ¥ä½¿ç”¨IDEAæ­å»ºä¸€ä¸ªæ™®é€šçš„SpringBootå·¥ç¨‹å³å¯ã€‚</p><p>åæ ‡</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yuefeng<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springcloud-day1-provider<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br></pre></td></tr></table></figure><p>pom.xmlä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--çˆ¶å·¥ç¨‹--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--webèµ·æ­¥ä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ›å»º<code>com.yuefeng.domain.User</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String name, String address, Integer age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.address = address;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//..get set toString ç•¥</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>application.properties</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">server.port</span>=<span class="string">18081</span></span><br></pre></td></tr></table></figure><p>åˆ›å»º<code>com.yuefeng.controller.UserController</code>,ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/***</span></span><br><span class="line"><span class="comment">     * æä¾›æœåŠ¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/list&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">list</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;User&gt; users = <span class="keyword">new</span> ArrayList&lt;User&gt;();</span><br><span class="line">        users.add(<span class="keyword">new</span> User(<span class="string">&quot;ç‹äº”&quot;</span>, <span class="string">&quot;æ·±åœ³&quot;</span>, <span class="number">25</span>));</span><br><span class="line">        users.add(<span class="keyword">new</span> User(<span class="string">&quot;æå››&quot;</span>, <span class="string">&quot;åŒ—äº¬&quot;</span>, <span class="number">23</span>));</span><br><span class="line">        users.add(<span class="keyword">new</span> User(<span class="string">&quot;èµµå…­&quot;</span>, <span class="string">&quot;ä¸Šæµ·&quot;</span>, <span class="number">26</span>));</span><br><span class="line">        <span class="keyword">return</span> users;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå¯åŠ¨ç±»ï¼Œå¹¶å¯åŠ¨å·¥ç¨‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringcloudDay1ProviderApplication</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">SpringApplication.run(SpringcloudDay1ProviderApplication.class, args);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®¿é—®ï¼š<code>&lt;http://localhost:18081/user/list&gt;</code>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="../../../img/md_img/springcloud01/1563020871025.png" alt="1563020871025"></p><p>(2)åˆ›å»º<code>springcloud-day1-resttemplate</code></p><p>åˆ›å»ºçš„è¯¦ç»†è¿‡ç¨‹ä¹Ÿä¸è®²è§£äº†ï¼Œç›´æ¥ä½¿ç”¨IDEAåˆ›å»ºä¸€ä¸ªSpringBootå·¥ç¨‹å³å¯ã€‚</p><p>pom.xmlä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--çˆ¶å·¥ç¨‹--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--webèµ·æ­¥ä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--æµ‹è¯•åŒ…--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºå¯åŠ¨ç±»ï¼Œå¹¶åœ¨å¯åŠ¨ç±»ä¸­åˆ›å»ºRestTemplateå¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringcloudDay1ResttemplateApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">SpringApplication.run(SpringcloudDay1ResttemplateApplication.class, args);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Bean</span>:åˆ›å»ºä¸€ä¸ªå¯¹è±¡å®ä¾‹ï¼Œå¹¶å°†å¯¹è±¡äº¤ç»™Springå®¹å™¨ç®¡ç†</span></span><br><span class="line"><span class="comment"> * &lt;bean class=&quot;restTemplate&quot; class=&quot;org.springframework.web.client.RestTemplate&quot; /&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> RestTemplate <span class="title">restTemplate</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span>  <span class="keyword">new</span> RestTemplate();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><p>åœ¨æµ‹è¯•ç±»HttpDemoApplicationTestsä¸­<code>@Autowired</code>æ³¨å…¥RestTemplate</p><p>é€šè¿‡RestTemplateçš„getForObject()æ–¹æ³•ï¼Œä¼ é€’urlåœ°å€åŠå®ä½“ç±»çš„å­—èŠ‚ç </p><p>RestTemplateä¼šè‡ªåŠ¨å‘èµ·è¯·æ±‚ï¼Œæ¥æ”¶å“åº”</p><p>å¹¶ä¸”å¸®æˆ‘ä»¬å¯¹å“åº”ç»“æœè¿›è¡Œååºåˆ—åŒ–</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringcloudDay1ResttemplateApplicationTests</span> </span>&#123;</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line"><span class="comment">/****</span></span><br><span class="line"><span class="comment"> * RestTemplateè¿œç¨‹è°ƒç”¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testRestTemplateQuery</span><span class="params">()</span> </span>&#123;</span><br><span class="line">String url = <span class="string">&quot;http://localhost:18081/user/list&quot;</span>;</span><br><span class="line">String result = restTemplate.getForObject(url, String.class);</span><br><span class="line">System.out.println(result);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="3-Spring-Cloud-Eureka"><a href="#3-Spring-Cloud-Eureka" class="headerlink" title="3.Spring Cloud Eureka"></a>3.Spring Cloud Eureka</h1><h2 id="3-1Eureka-ç®€ä»‹"><a href="#3-1Eureka-ç®€ä»‹" class="headerlink" title="3.1Eureka ç®€ä»‹"></a>3.1Eureka ç®€ä»‹</h2><p>Eurekaè§£å†³äº†ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šæœåŠ¡çš„ç®¡ç†ï¼Œæ³¨å†Œå’Œå‘ç°ã€çŠ¶æ€ç›‘ç®¡ã€åŠ¨æ€è·¯ç”±ã€‚</p><p>Eurekaè´Ÿè´£ç®¡ç†è®°å½•æœåŠ¡æä¾›è€…çš„ä¿¡æ¯ã€‚æœåŠ¡è°ƒç”¨è€…æ— éœ€è‡ªå·±å¯»æ‰¾æœåŠ¡ï¼ŒEurekaè‡ªåŠ¨åŒ¹é…æœåŠ¡ç»™è°ƒç”¨è€…ã€‚</p><p>Eurekaä¸æœåŠ¡ä¹‹é—´é€šè¿‡<code>å¿ƒè·³</code>æœºåˆ¶è¿›è¡Œç›‘æ§ï¼›</p><p><img src="../../../img/md_img/springcloud01/1563089431796.png" alt="1563089431796"></p><p>Eurekaï¼šå°±æ˜¯æœåŠ¡æ³¨å†Œä¸­å¿ƒ(å¯ä»¥æ˜¯ä¸€ä¸ªé›†ç¾¤)ï¼Œå¯¹å¤–æš´éœ²è‡ªå·±çš„åœ°å€</p><p>æœåŠ¡æä¾›è€…ï¼šå¯åŠ¨åå‘Eurekaæ³¨å†Œè‡ªå·±çš„ä¿¡æ¯(åœ°å€ï¼Œæä¾›ä»€ä¹ˆæœåŠ¡)</p><p>æœåŠ¡æ¶ˆè´¹è€…ï¼šå‘Eurekaè®¢é˜…æœåŠ¡ï¼ŒEurekaä¼šå°†å¯¹åº”æœåŠ¡çš„æ‰€æœ‰æä¾›è€…åœ°å€åˆ—è¡¨å‘é€ç»™æ¶ˆè´¹è€…ï¼Œå¹¶ä¸”å®šæœŸæ›´æ–°</p><p>å¿ƒè·³(ç»­çº¦)ï¼šæä¾›è€…å®šæœŸé€šè¿‡httpæ–¹å¼å‘Eurekaåˆ·æ–°è‡ªå·±çš„çŠ¶æ€</p><h2 id="3-2å…¥é—¨æ¡ˆä¾‹"><a href="#3-2å…¥é—¨æ¡ˆä¾‹" class="headerlink" title="3.2å…¥é—¨æ¡ˆä¾‹"></a>3.2å…¥é—¨æ¡ˆä¾‹</h2><h3 id="1-springcloud-parent"><a href="#1-springcloud-parent" class="headerlink" title="(1)springcloud-parent"></a>(1)springcloud-parent</h3><ul><li>å¯¼å…¥ä¾èµ–</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yuefeng<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springcloud-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>eureka-server<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>user-provider<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>user-consumer<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>ç»Ÿä¸€ç®¡ç†å­å·¥ç¨‹çš„ç‰ˆæœ¬åŒ…æ‹¬äº†springbootçš„ç‰ˆæœ¬å’Œspringcloudçš„ç‰ˆæœ¬<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--çˆ¶å·¥ç¨‹--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--SpringCloudåŒ…ä¾èµ–ç‰ˆæœ¬çš„ç®¡ç†--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>Greenwich.SR1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--å¯¼å…¥ ç»Ÿä¸€ç‰ˆæœ¬æ§åˆ¶--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-eureka-server"><a href="#2-eureka-server" class="headerlink" title="(2)eureka-server"></a>(2)eureka-server</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springcloud-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yuefeng<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--ä¾èµ–åŒ…--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--eureka-serverä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="note info flat"><p>åˆ›å»ºå¯åŠ¨ç±»</p></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yuefeng;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yf</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2021/5/16</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaServer</span> <span class="comment">//å¯ç”¨ eureka server</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EurekaServerApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(EurekaServerApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é…ç½®æ–‡ä»¶</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">7001</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">eureka-server</span> <span class="comment"># åº”ç”¨åç§°ï¼Œä¼šåœ¨Eurekaä¸­ä½œä¸ºæœåŠ¡çš„idæ ‡è¯†</span></span><br><span class="line"></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">false</span>   <span class="comment">#æ˜¯å¦å°†è‡ªå·±æ³¨å†Œåˆ°Eurekaä¸­</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">false</span>   <span class="comment">#æ˜¯å¦ä»eurekaä¸­è·å–æœåŠ¡ä¿¡æ¯</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:7001/eureka</span> <span class="comment"># EurekaServerçš„åœ°å€</span></span><br></pre></td></tr></table></figure><p><img src="../../../img/md_img/springcloud01/image-20210516211731215.png" alt="image-20210516211731215"></p><h3 id="3-user-provider"><a href="#3-user-provider" class="headerlink" title="(3)user-provider"></a>(3)user-provider</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springcloud-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yuefeng<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>user-provider<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--webèµ·æ­¥åŒ…--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--spring cloud eureka clientçš„èµ·æ­¥ä¾èµ–--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--eurekaå®¢æˆ·ç«¯--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">18081</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">user-provider</span> <span class="comment">#æœåŠ¡çš„åå­—,ä¸åŒçš„åº”ç”¨ï¼Œåå­—ä¸åŒï¼Œå¦‚æœæ˜¯é›†ç¾¤ï¼Œåå­—éœ€è¦ç›¸åŒ</span></span><br><span class="line"><span class="comment">#æŒ‡å®šeurekaæœåŠ¡åœ°å€</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="comment"># EurekaServerçš„åœ°å€</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:7001/eureka</span></span><br></pre></td></tr></table></figure><div class="note info flat"><p>åˆ›å»ºå¯åŠ¨ç±»</p></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yuefeng;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.netflix.eureka.EnableEurekaClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.client.RestTemplate;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yf</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2021/5/16</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">userConsumerApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(userConsumerApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line"><span class="comment">//    @LoadBalanced//å¯åŠ¨è´Ÿè½½å‡è¡¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RestTemplate <span class="title">restTemplate</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> RestTemplate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>========================<strong>å®ä½“ç±»</strong>=======================</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yuefeng.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//@Columnå°†POJOçš„å±æ€§ æ˜ å°„ç»™æ•°æ®è¡¨çš„æŸä¸€ä¸ªåˆ—  nameç”¨äºæŒ‡å®šåˆ—çš„åç§°ï¼Œå¦‚æœæ˜¯åˆ—åå’Œå±æ€§åä¸€è‡´å¯ä»¥ä¸å†™ã€‚</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;<span class="comment">//ç”¨æˆ·å</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String password;<span class="comment">//å¯†ç </span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;username=&#x27;&quot;</span> + username + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, password=&#x27;&quot;</span> + password + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String username, String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>========================<strong>UserController</strong>=======================</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yuefeng.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.yuefeng.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.yuefeng.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ ¹æ®ç”¨æˆ·çš„ID è·å–ç”¨æˆ·</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">findById</span><span class="params">(<span class="meta">@PathVariable(name=&quot;id&quot;)</span>Integer id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;=====================1============è¢«è°ƒç”¨&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> userService.findById(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>========================<strong>UserServiceImpl</strong>=======================</p><p>æ¨¡æ‹Ÿæ•°æ®åº“æ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yuefeng.service.impl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.yuefeng.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.yuefeng.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">findById</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User(<span class="string">&quot;3&quot;</span>,<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (id==<span class="number">1</span>)&#123;</span><br><span class="line">            user.setUsername(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(id==<span class="number">2</span>)&#123;</span><br><span class="line">            user.setUsername(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>========================<strong>UserService</strong>=======================</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yuefeng.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.yuefeng.pojo.User;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="comment">//alt + enter</span></span><br><span class="line">    <span class="function">User <span class="title">findById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="../../../img/md_img/springcloud01/image-20210516213207025.png" alt="image-20210516213207025"></p><h3 id="4-user-consumer"><a href="#4-user-consumer" class="headerlink" title="(4)user-consumer"></a>(4)user-consumer</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springcloud-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yuefeng<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>user-consumer<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--webèµ·æ­¥åŒ…--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--eurekaå®¢æˆ·ç«¯--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">18082</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">user-consumer</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:7001/eureka</span>     <span class="comment"># EurekaServerçš„æ³¨å†Œçš„åœ°å€</span></span><br><span class="line">    <span class="attr">registry-fetch-interval-seconds:</span> <span class="number">30</span></span><br></pre></td></tr></table></figure><div class="note info flat"><p>å¯åŠ¨ç±»</p></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yuefeng;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.netflix.eureka.EnableEurekaClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.client.RestTemplate;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yf</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2021/5/16</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">userConsumerApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(userConsumerApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line"><span class="comment">//    @LoadBalanced//å¯åŠ¨è´Ÿè½½å‡è¡¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RestTemplate <span class="title">restTemplate</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> RestTemplate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="../../../img/md_img/springcloud01/image-20210516213432611.png" alt="image-20210516213432611"></p><p>===========================MovieController==========================</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yuefeng.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.yuefeng.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.client.ServiceInstance;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.client.discovery.DiscoveryClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.client.RestTemplate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/movie&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MovieController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RestTemplate restTemplate;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DiscoveryClient discoveryClient;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/look&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">look</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//        User user = restTemplate.getForObject(&quot;http://localhost:18081/user/1&quot;, User.class);</span></span><br><span class="line">        List&lt;ServiceInstance&gt; instances = discoveryClient.getInstances(<span class="string">&quot;user-provider&quot;</span>);</span><br><span class="line">        ServiceInstance serviceInstance = instances.get(<span class="number">0</span>);</span><br><span class="line">        User user = restTemplate.getForObject(<span class="string">&quot;http://&quot;</span>+serviceInstance.getHost()+<span class="string">&quot;:&quot;</span>+serviceInstance.getPort()+<span class="string">&quot;/user/2&quot;</span>, User.class);</span><br><span class="line">        <span class="comment">//CTR +P</span></span><br><span class="line">        System.out.println(user);</span><br><span class="line">        <span class="comment">//2.åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æ­£ç¡® ä¸‹å•æˆåŠŸ è¿”å›æˆåŠŸæ ‡è¯†</span></span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-3Eurekaè¯¦è§£"><a href="#3-3Eurekaè¯¦è§£" class="headerlink" title="3.3Eurekaè¯¦è§£"></a>3.3Eurekaè¯¦è§£</h2><h3 id="3-3-1-åŸºç¡€æ¶æ„"><a href="#3-3-1-åŸºç¡€æ¶æ„" class="headerlink" title="3.3.1 åŸºç¡€æ¶æ„"></a>3.3.1 åŸºç¡€æ¶æ„</h3><p>Eurekaæ¶æ„ä¸­çš„ä¸‰ä¸ªæ ¸å¿ƒè§’è‰²</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1.æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼šEurekaæœåŠ¡ç«¯åº”ç”¨ï¼Œæä¾›æœåŠ¡æ³¨å†Œå‘ç°åŠŸèƒ½ï¼Œeureka-server</span></span><br><span class="line"><span class="attr">2.æœåŠ¡æä¾›è€…ï¼šæä¾›æœåŠ¡çš„åº”ç”¨</span></span><br><span class="line">  <span class="attr">è¦æ±‚ç»Ÿä¸€å¯¹å¤–æä¾›Resté£æ ¼æœåŠ¡å³å¯</span></span><br><span class="line">  <span class="attr">æœ¬ä¾‹å­ï¼šuser-provider</span></span><br><span class="line"><span class="attr">3.æœåŠ¡æ¶ˆè´¹è€…ï¼šä»æ³¨å†Œä¸­å¿ƒè·å–æœåŠ¡åˆ—è¡¨ï¼ŒçŸ¥é“å»å“ªè°ƒç”¨æœåŠ¡æ–¹ï¼Œuser-consumer</span></span><br></pre></td></tr></table></figure><h3 id="3-3-2-Eurekaå®¢æˆ·ç«¯"><a href="#3-3-2-Eurekaå®¢æˆ·ç«¯" class="headerlink" title="3.3.2 Eurekaå®¢æˆ·ç«¯"></a>3.3.2 Eurekaå®¢æˆ·ç«¯</h3><p>æœåŠ¡æä¾›è€…è¦å‘EurekaServeræ³¨å†ŒæœåŠ¡ï¼Œå¹¶å®ŒæˆæœåŠ¡ç»­çº¦ç­‰å·¥ä½œ</p><p><strong>æœåŠ¡æ³¨å†Œ:</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1.</span> <span class="string">å½“æˆ‘ä»¬å¼€å¯äº†å®¢æˆ·ç«¯å‘ç°æ³¨è§£@DiscoveryClientã€‚åŒæ—¶å¯¼å…¥äº†eureka-clientä¾èµ–åæ ‡</span></span><br><span class="line"><span class="meta">2.</span> <span class="string">åŒæ—¶é…ç½®EurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€åœ¨é…ç½®æ–‡ä»¶ä¸­</span></span><br><span class="line"><span class="meta">3.</span> <span class="string">æœåŠ¡åœ¨å¯åŠ¨æ—¶ï¼Œæ£€æµ‹æ˜¯å¦æœ‰@DiscoveryClientæ³¨è§£å’Œé…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="meta">4.</span> <span class="string">å¦‚æœæœ‰ï¼Œåˆ™ä¼šå‘æ³¨å†Œä¸­å¿ƒå‘èµ·æ³¨å†Œè¯·æ±‚ï¼Œæºå¸¦æœåŠ¡å…ƒæ•°æ®ä¿¡æ¯(IPã€ç«¯å£ç­‰)</span></span><br><span class="line"><span class="meta">5.</span> <span class="string">Eurekaæ³¨å†Œä¸­å¿ƒä¼šæŠŠæœåŠ¡çš„ä¿¡æ¯ä¿å­˜åœ¨Mapä¸­ã€‚</span></span><br></pre></td></tr></table></figure><p><strong>æœåŠ¡ç»­çº¦ï¼š</strong></p><p>æœåŠ¡æ³¨å†Œå®Œæˆä»¥åï¼ŒæœåŠ¡æä¾›è€…ä¼šç»´æŒä¸€ä¸ª<code>å¿ƒè·³</code>ï¼Œä¿å­˜æœåŠ¡å¤„äºå­˜åœ¨çŠ¶æ€ã€‚è¿™ä¸ªç§°ä¹‹ä¸ºæœåŠ¡ç»­çº¦(renew)ã€‚</p><p><img src="../../../img/md_img/springcloud01/1563102805802.png" alt="1563102805802"></p><p>ä¸Šå›¾é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç§Ÿçº¦åˆ°æœŸï¼ŒæœåŠ¡æ—¶æ•ˆæ—¶é—´ï¼Œé»˜è®¤å€¼90ç§’</span></span><br><span class="line"><span class="attr">lease-expiration-duration-in-seconds:</span> <span class="number">150</span></span><br><span class="line"><span class="comment">#ç§Ÿçº¦ç»­çº¦é—´éš”æ—¶é—´ï¼Œé»˜è®¤30ç§’</span></span><br><span class="line"><span class="attr">lease-renewal-interval-in-seconds:</span> <span class="number">30</span></span><br></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1.ä¸¤ä¸ªå‚æ•°å¯ä»¥ä¿®æ”¹æœåŠ¡ç»­çº¦è¡Œä¸º</span></span><br><span class="line">  <span class="meta">lease-renewal-interval-seconds</span>:<span class="string">90ï¼Œç§Ÿçº¦åˆ°æœŸæ—¶æ•ˆæ—¶é—´ï¼Œé»˜è®¤90ç§’</span></span><br><span class="line">  <span class="meta">lease-expiration-duration-in-seconds</span>:<span class="string">30ï¼Œç§Ÿçº¦ç»­çº¦é—´éš”æ—¶é—´ï¼Œé»˜è®¤30ç§’</span></span><br><span class="line"><span class="attr">2.æœåŠ¡è¶…è¿‡90ç§’æ²¡æœ‰å‘ç”Ÿå¿ƒè·³ï¼ŒEurekaServerä¼šå°†æœåŠ¡ä»åˆ—è¡¨ç§»é™¤[å‰ææ˜¯EurekaServerå…³é—­äº†è‡ªæˆ‘ä¿æŠ¤]</span></span><br></pre></td></tr></table></figure><p><strong>è·å–æœåŠ¡åˆ—è¡¨ï¼š</strong></p><p><img src="../../../img/md_img/springcloud01/1563102910373.png" alt="1563102910373"></p><p>ä¸Šå›¾é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">registry-fetch-interval-seconds:</span> <span class="number">30</span></span><br></pre></td></tr></table></figure><p>è¯´æ˜ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">æœåŠ¡æ¶ˆè´¹è€…å¯åŠ¨æ—¶ï¼Œä¼šæ£€æµ‹æ˜¯å¦è·å–æœåŠ¡æ³¨å†Œä¿¡æ¯é…ç½®</span></span><br><span class="line"><span class="meta">å¦‚æœæ˜¯ï¼Œåˆ™ä¼šä»</span> <span class="string">EurekaServeræœåŠ¡åˆ—è¡¨è·å–åªè¯»å¤‡ä»½ï¼Œç¼“å­˜åˆ°æœ¬åœ°</span></span><br><span class="line"><span class="attr">æ¯éš”30ç§’ï¼Œä¼šé‡æ–°è·å–å¹¶æ›´æ–°æ•°æ®</span></span><br><span class="line"><span class="attr">æ¯éš”30ç§’çš„æ—¶é—´å¯ä»¥é€šè¿‡é…ç½®registry-fetch-interval-secondsä¿®æ”¹</span></span><br></pre></td></tr></table></figure><h3 id="3-3-3å¤±æ•ˆå‰”é™¤å’Œè‡ªæˆ‘ä¿æŠ¤"><a href="#3-3-3å¤±æ•ˆå‰”é™¤å’Œè‡ªæˆ‘ä¿æŠ¤" class="headerlink" title="3.3.3å¤±æ•ˆå‰”é™¤å’Œè‡ªæˆ‘ä¿æŠ¤"></a>3.3.3å¤±æ•ˆå‰”é™¤å’Œè‡ªæˆ‘ä¿æŠ¤</h3><p><strong>æœåŠ¡ä¸‹çº¿ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å½“æœåŠ¡æ­£å¸¸å…³é—­æ“ä½œæ—¶ï¼Œä¼šå‘é€æœåŠ¡ä¸‹çº¿çš„RESTè¯·æ±‚ç»™EurekaServerã€‚</span><br><span class="line">æœåŠ¡ä¸­å¿ƒæ¥å—åˆ°è¯·æ±‚åï¼Œå°†è¯¥æœåŠ¡ç½®ä¸ºä¸‹çº¿çŠ¶æ€</span><br></pre></td></tr></table></figure><p><strong>å¤±æ•ˆå‰”é™¤ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æœåŠ¡ä¸­å¿ƒæ¯éš”ä¸€æ®µæ—¶é—´(é»˜è®¤60ç§’)å°†æ¸…å•ä¸­æ²¡æœ‰ç»­çº¦çš„æœåŠ¡å‰”é™¤ã€‚</span><br><span class="line">é€šè¿‡eviction-interval-timer-in-msé…ç½®å¯ä»¥å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œå•ä½æ˜¯æ¯«ç§’</span><br></pre></td></tr></table></figure><p>å‰”é™¤æ—¶é—´é…ç½®</p><p><img src="../../../img/md_img/springcloud01/1563103529735.png" alt="1563103529735"></p><p>ä¸Šå›¾ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">eviction-interval-timer-in-ms</span>: <span class="string">5000</span></span><br></pre></td></tr></table></figure><p><strong>è‡ªæˆ‘ä¿æŠ¤ï¼š</strong></p><p>Eurekaä¼šç»Ÿè®¡æœåŠ¡å®ä¾‹æœ€è¿‘15åˆ†é’Ÿå¿ƒè·³ç»­çº¦çš„æ¯”ä¾‹æ˜¯å¦ä½äº85%ï¼Œå¦‚æœä½äºåˆ™ä¼šè§¦å‘è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ã€‚</p><p>æœåŠ¡ä¸­å¿ƒé¡µé¢ä¼šæ˜¾ç¤ºå¦‚ä¸‹æç¤ºä¿¡æ¯</p><p><img src="../../../img/md_img/springcloud01/1558056004897.png" alt="1558056004897"></p><p>å«ä¹‰ï¼šç´§æ€¥æƒ…å†µï¼Eurekaå¯èƒ½é”™è¯¯åœ°å£°ç§°å®ä¾‹å·²ç»å¯åŠ¨ï¼Œè€Œäº‹å®å¹¶éå¦‚æ­¤ã€‚ç»­çº¦ä½äºé˜ˆå€¼ï¼Œå› æ­¤å®ä¾‹ä¸ä¼šä¸ºäº†å®‰å…¨è€Œè¿‡æœŸã€‚</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1.è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œä¸ä¼šå‰”é™¤ä»»ä½•æœåŠ¡å®ä¾‹</span></span><br><span class="line"><span class="attr">2.è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ä¿è¯äº†å¤§å¤šæ•°æœåŠ¡ä¾ç„¶å¯ç”¨</span></span><br><span class="line"><span class="attr">3.é€šè¿‡enable-self-preservationé…ç½®å¯ç”¨å…³åœè‡ªæˆ‘ä¿æŠ¤ï¼Œé»˜è®¤å€¼æ˜¯æ‰“å¼€</span></span><br></pre></td></tr></table></figure><p>å…³é—­è‡ªæˆ‘ä¿æŠ¤</p><p><img src="../../../img/md_img/springcloud01/1563103437025.png" alt="1563103437025"></p><p>ä¸Šå›¾é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">enable-self-preservation</span>: <span class="string">false</span></span><br></pre></td></tr></table></figure><h3 id="4-3-å°ç»“"><a href="#4-3-å°ç»“" class="headerlink" title="4.3 å°ç»“"></a>4.3 å°ç»“</h3><ul><li><p>ç†è§£Eurekaçš„åŸç†å›¾:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Eurekaï¼šå°±æ˜¯æœåŠ¡æ³¨å†Œä¸­å¿ƒ(å¯ä»¥æ˜¯ä¸€ä¸ªé›†ç¾¤)ï¼Œå¯¹å¤–æš´éœ²è‡ªå·±çš„åœ°å€</span></span><br><span class="line"><span class="attr">æœåŠ¡æä¾›è€…ï¼šå¯åŠ¨åå‘Eurekaæ³¨å†Œè‡ªå·±çš„ä¿¡æ¯(åœ°å€ï¼Œæä¾›ä»€ä¹ˆæœåŠ¡)</span></span><br><span class="line"><span class="attr">æœåŠ¡æ¶ˆè´¹è€…ï¼šå‘Eurekaè®¢é˜…æœåŠ¡ï¼ŒEurekaä¼šå°†å¯¹åº”æœåŠ¡çš„æ‰€æœ‰æä¾›è€…åœ°å€åˆ—è¡¨å‘é€ç»™æ¶ˆè´¹è€…ï¼Œå¹¶ä¸”å®šæœŸæ›´æ–°</span></span><br><span class="line"><span class="attr">å¿ƒè·³(ç»­çº¦)ï¼šæä¾›è€…å®šæœŸé€šè¿‡httpæ–¹å¼å‘Eurekaåˆ·æ–°è‡ªå·±çš„çŠ¶æ€</span></span><br></pre></td></tr></table></figure></li><li><p>èƒ½å®ç°EurekaæœåŠ¡çš„æ­å»º:å¼•å…¥ä¾èµ–åŒ…ï¼Œé…ç½®é…ç½®æ–‡ä»¶ï¼Œåœ¨å¯åŠ¨ç±»ä¸ŠåŠ <code>@EnableEurekaServer</code>ã€‚</p></li><li><p>èƒ½å®ç°æœåŠ¡æä¾›è€…å‘Eurekaæ³¨å†ŒæœåŠ¡</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1.å¼•å…¥eurekaå®¢æˆ·ç«¯ä¾èµ–åŒ…</span></span><br><span class="line"><span class="attr">2.åœ¨application.ymlä¸­é…ç½®EurekaæœåŠ¡åœ°å€</span></span><br><span class="line"><span class="meta">3.åœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ @EnableDiscoveryClientæˆ–è€…@EnableEurekaClient</span> <span class="string"></span></span><br></pre></td></tr></table></figure></li><li><p>èƒ½å®ç°æœåŠ¡æ¶ˆè´¹è€…å‘Eurekaæ³¨å†ŒæœåŠ¡</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1.å¼•å…¥eurekaå®¢æˆ·ç«¯ä¾èµ–åŒ…</span></span><br><span class="line"><span class="attr">2.åœ¨application.ymlä¸­é…ç½®EurekaæœåŠ¡åœ°å€</span></span><br><span class="line"><span class="meta">3.åœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ @EnableDiscoveryClientæˆ–è€…@EnableEurekaClient</span> <span class="string"></span></span><br></pre></td></tr></table></figure></li><li><p>èƒ½å®ç°æ¶ˆè´¹è€…é€šè¿‡Eurekaè®¿é—®æœåŠ¡æä¾›è€…</p></li></ul><h1 id="4-Spring-Cloud-Ribbon-è´Ÿè½½å‡è¡¡"><a href="#4-Spring-Cloud-Ribbon-è´Ÿè½½å‡è¡¡" class="headerlink" title="4.Spring Cloud Ribbon è´Ÿè½½å‡è¡¡"></a>4.Spring Cloud Ribbon è´Ÿè½½å‡è¡¡</h1><p>Ribbonä¸»è¦ è§£å†³é›†ç¾¤æœåŠ¡ä¸­ï¼Œå¤šä¸ªæœåŠ¡é«˜æ•ˆç‡è®¿é—®çš„é—®é¢˜ã€‚</p><h2 id="4-1Ribbon-ç®€ä»‹"><a href="#4-1Ribbon-ç®€ä»‹" class="headerlink" title="4.1Ribbon ç®€ä»‹"></a>4.1Ribbon ç®€ä»‹</h2><p>ä»€ä¹ˆæ˜¯Ribbonï¼Ÿ</p><p>Ribbonæ˜¯Netflixå‘å¸ƒçš„è´Ÿè½½å‡è¡¡å™¨ï¼Œæœ‰åŠ©äºæ§åˆ¶HTTPå®¢æˆ·ç«¯è¡Œä¸ºã€‚ä¸ºRibboné…ç½®æœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨åï¼ŒRibbonå°±å¯åŸºäºè´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œè‡ªåŠ¨å¸®åŠ©æœåŠ¡æ¶ˆè´¹è€…è¯·æ±‚ã€‚</p><p>Ribboné»˜è®¤æä¾›çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼šè½®è¯¢ï¼Œéšæœº,é‡è¯•æ³•,åŠ æƒã€‚å½“ç„¶ï¼Œæˆ‘ä»¬å¯ç”¨è‡ªå·±å®šä¹‰è´Ÿè½½å‡è¡¡ç®—æ³•</p><h2 id="4-2å…¥é—¨æ¡ˆä¾‹"><a href="#4-2å…¥é—¨æ¡ˆä¾‹" class="headerlink" title="4.2å…¥é—¨æ¡ˆä¾‹"></a>4.2å…¥é—¨æ¡ˆä¾‹</h2><p>å¤åˆ¶ä¸€ä¸ªuser-provider</p><p>============================user-provider2===========================</p><ul><li>ä¿®æ”¹ç«¯å£ä¸º18003 </li></ul><p><img src="../../../img/md_img/springcloud01/image-20210516230226102.png" alt="image-20210516230226102"></p><p>ä¿®æ”¹å¯åŠ¨ç±»åç§°<img src="../../../img/md_img/springcloud01/image-20210516230251855.png" alt="image-20210516230251855"></p><ul><li>ä¿®æ”¹user-consumerå¯åŠ¨ç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@LoadBalanced</span><span class="comment">//å¯åŠ¨è´Ÿè½½å‡è¡¡</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> RestTemplate <span class="title">restTemplate</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> RestTemplate();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹controller  </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">    <span class="meta">@GetMapping(&quot;/look&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">look</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//        User user = restTemplate.getForObject(&quot;http://localhost:18081/user/1&quot;, User.class);</span></span><br><span class="line"><span class="comment">//        List&lt;ServiceInstance&gt; instances = discoveryClient.getInstances(&quot;user-provider&quot;);</span></span><br><span class="line"><span class="comment">//        ServiceInstance serviceInstance = instances.get(0);</span></span><br><span class="line"><span class="comment">//        User user = restTemplate.getForObject(&quot;http://&quot;+serviceInstance.getHost()+&quot;:&quot;+serviceInstance.getPort()+&quot;/user/2&quot;, User.class);</span></span><br><span class="line"><span class="comment">//        //CTR +P</span></span><br><span class="line"><span class="comment">//        System.out.println(user);</span></span><br><span class="line">        User user = restTemplate.getForObject(<span class="string">&quot;http://user-provider/user/2&quot;</span>, User.class);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="4-3å…¶ä»–è´Ÿè½½å‡è¡¡ç­–ç•¥é…ç½®"><a href="#4-3å…¶ä»–è´Ÿè½½å‡è¡¡ç­–ç•¥é…ç½®" class="headerlink" title="4.3å…¶ä»–è´Ÿè½½å‡è¡¡ç­–ç•¥é…ç½®"></a>4.3å…¶ä»–è´Ÿè½½å‡è¡¡ç­–ç•¥é…ç½®</h2><p>é…ç½®ä¿®æ”¹è½®è¯¢ç­–ç•¥ï¼šRibboné»˜è®¤çš„è´Ÿè½½å‡è¡¡ç­–ç•¥æ˜¯è½®è¯¢ï¼Œé€šè¿‡å¦‚ä¸‹</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¿®æ”¹æœåŠ¡åœ°å€è½®è¯¢ç­–ç•¥ï¼Œé»˜è®¤æ˜¯è½®è¯¢ï¼Œé…ç½®ä¹‹åå˜éšæœº</span></span><br><span class="line"><span class="attr">user-provider:</span></span><br><span class="line">  <span class="attr">ribbon:</span></span><br><span class="line">    <span class="comment">#è½®è¯¢</span></span><br><span class="line">    <span class="comment">#NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RoundRobinRule</span></span><br><span class="line">    <span class="comment">#éšæœºç®—æ³•</span></span><br><span class="line">    <span class="comment">#NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule</span></span><br><span class="line">    <span class="comment">#é‡è¯•ç®—æ³•,è¯¥ç®—æ³•å…ˆæŒ‰ç…§è½®è¯¢çš„ç­–ç•¥è·å–æœåŠ¡,å¦‚æœè·å–æœåŠ¡å¤±è´¥åˆ™åœ¨æŒ‡å®šçš„æ—¶é—´å†…ä¼šè¿›è¡Œé‡è¯•ï¼Œè·å–å¯ç”¨çš„æœåŠ¡</span></span><br><span class="line">    <span class="comment">#NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RetryRule</span></span><br><span class="line">    <span class="comment">#åŠ æƒæ³•,ä¼šæ ¹æ®å¹³å‡å“åº”æ—¶é—´è®¡ç®—æ‰€æœ‰æœåŠ¡çš„æƒé‡ï¼Œå“åº”æ—¶é—´è¶Šå¿«æœåŠ¡æƒé‡è¶Šå¤§è¢«é€‰ä¸­çš„æ¦‚ç‡è¶Šå¤§ã€‚åˆšå¯åŠ¨æ—¶å¦‚æœåŒç»Ÿè®¡ä¿¡æ¯ä¸è¶³ï¼Œåˆ™ä½¿ç”¨è½®è¯¢çš„ç­–ç•¥ï¼Œç­‰ç»Ÿè®¡ä¿¡æ¯è¶³å¤Ÿä¼šåˆ‡æ¢åˆ°è‡ªèº«è§„åˆ™ã€‚</span></span><br><span class="line">    <span class="attr">NFLoadBalancerRuleClassName:</span> <span class="string">com.netflix.loadbalancer.ZoneAvoidanceRule</span></span><br></pre></td></tr></table></figure><p>SpringBootå¯ä»¥ä¿®æ”¹è´Ÿè½½å‡è¡¡è§„åˆ™ï¼Œé…ç½®ä¸º<code>ribbon.NFLoadBalancerRuleClassName</code></p><p>æ ¼å¼{æœåŠ¡åç§°}.ribbon.NFLoadBalancerRuleClassName</p><h2 id="4-4å°ç»“"><a href="#4-4å°ç»“" class="headerlink" title="4.4å°ç»“"></a>4.4å°ç»“</h2><ul><li>Ribbonçš„è´Ÿè½½å‡è¡¡ç®—æ³•åº”ç”¨åœ¨å®¢æˆ·ç«¯ï¼Œåªéœ€è¦æä¾›æœåŠ¡åˆ—è¡¨ï¼Œå°±èƒ½å¸®åŠ©æ¶ˆè´¹ç«¯è‡ªåŠ¨è®¿é—®æœåŠ¡ç«¯ï¼Œå¹¶é€šè¿‡ä¸åŒç®—æ³•å®ç°è´Ÿè½½å‡è¡¡ã€‚</li><li>Ribbonçš„è½®è¯¢ã€éšæœºç®—æ³•é…ç½®ï¼šåœ¨application.ymlä¸­é…ç½® <code>&#123;æœåŠ¡åç§°&#125;.ribbon.NFLoadBalancerRuleClassName</code></li><li>è´Ÿè½½å‡è¡¡çš„åˆ‡æ¢:åœ¨LoadBalancerInterceptorä¸­è·å–æœåŠ¡çš„åå­—ï¼Œé€šè¿‡è°ƒç”¨RibbonLoadBalancerClientçš„executeæ–¹æ³•ï¼Œå¹¶è·å–ILoadBalancerè´Ÿè½½å‡è¡¡å™¨ï¼Œç„¶åæ ¹æ®ILoadBalancerè´Ÿè½½å‡è¡¡å™¨æŸ¥è¯¢å‡ºè¦ä½¿ç”¨çš„èŠ‚ç‚¹ï¼Œå†è·å–èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œå¹¶å®ç°è°ƒç”¨ã€‚</li></ul><h1 id="5-Spring-Cloud-Hystrix"><a href="#5-Spring-Cloud-Hystrix" class="headerlink" title="5.Spring Cloud Hystrix"></a>5.Spring Cloud Hystrix</h1><h2 id="5-1Hystrix-ç®€ä»‹"><a href="#5-1Hystrix-ç®€ä»‹" class="headerlink" title="5.1Hystrix ç®€ä»‹"></a>5.1Hystrix ç®€ä»‹</h2><p><img src="../../../img/md_img/springcloud01/hystrix-logo-tagline-640.png" alt="hystrix-logo-tagline-640"></p><p>Hystrixï¼Œè‹±æ–‡æ„æ€æ˜¯è±ªçŒªï¼Œå…¨èº«æ˜¯åˆºï¼Œåˆºæ˜¯ä¸€ç§ä¿æŠ¤æœºåˆ¶ã€‚Hystrixä¹Ÿæ˜¯Netflixå…¬å¸çš„ä¸€æ¬¾ç»„ä»¶ã€‚</p><p>Hystrixçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>Hystrixæ˜¯Netflixå¼€æºçš„ä¸€ä¸ªå»¶è¿Ÿå’Œå®¹é”™åº“ï¼Œç”¨äºéš”ç¦»è®¿é—®è¿œç¨‹æœåŠ¡ã€ç¬¬ä¸‰æ–¹åº“ã€é˜²æ­¢å‡ºç°çº§è”å¤±è´¥ä¹Ÿå°±æ˜¯é›ªå´©æ•ˆåº”ã€‚</p><p>ç†”æ–­å™¨çŠ¶æ€æœºæœ‰3ä¸ªçŠ¶æ€ï¼š</p><ol><li>Closedï¼šå…³é—­çŠ¶æ€ï¼Œæ‰€æœ‰è¯·æ±‚æ­£å¸¸è®¿é—®</li><li>Openï¼šæ‰“å¼€çŠ¶æ€ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½ä¼šè¢«é™çº§ã€‚Hystrixä¼šå¯¹è¯·æ±‚æƒ…å†µè®¡æ•°ï¼Œå½“ä¸€å®šæ—¶é—´å¤±è´¥è¯·æ±‚ç™¾åˆ†æ¯”è¾¾åˆ°é˜ˆå€¼(æé™å€¼)ï¼Œåˆ™è§¦å‘ç†”æ–­ï¼Œæ–­è·¯å™¨å®Œå…¨å…³é—­é»˜è®¤å¤±è´¥æ¯”ä¾‹çš„é˜ˆå€¼æ˜¯50%ï¼Œè¯·æ±‚æ¬¡æ•°æœ€ä½ä¸å°‘äº20æ¬¡</li><li>Half Openï¼šåŠå¼€çŠ¶æ€<br>OpençŠ¶æ€ä¸æ˜¯æ°¸ä¹…çš„ï¼Œæ‰“å¼€ä¸€ä¼šåä¼šè¿›å…¥ä¼‘çœ æ—¶é—´(é»˜è®¤5ç§’)ã€‚ä¼‘çœ æ—¶é—´è¿‡åä¼šè¿›å…¥åŠå¼€çŠ¶æ€ã€‚<br>åŠå¼€çŠ¶æ€ï¼šç†”æ–­å™¨ä¼šåˆ¤æ–­ä¸‹ä¸€æ¬¡è¯·æ±‚çš„è¿”å›çŠ¶å†µï¼Œå¦‚æœæˆåŠŸï¼Œç†”æ–­å™¨åˆ‡å›closedçŠ¶æ€ã€‚å¦‚æœå¤±è´¥ï¼Œç†”æ–­å™¨åˆ‡å›opençŠ¶æ€ã€‚<br>threshold reached åˆ°è¾¾é˜ˆå€¼<br>under threshold  é˜ˆå€¼ä»¥ä¸‹</li></ol><p><img src="../../../img/md_img/springcloud01/1563120878233.png" alt="1563120878233"></p><p><strong>ç†”æ–­å™¨çš„æ ¸å¿ƒï¼šçº¿ç¨‹éš”ç¦»å’ŒæœåŠ¡é™çº§ã€‚</strong></p><ol><li>çº¿ç¨‹éš”ç¦»ï¼šæ˜¯æŒ‡Hystrixä¸ºæ¯ä¸ªä¾èµ–æœåŠ¡è°ƒç”¨ä¸€ä¸ªå°çš„çº¿ç¨‹æ± ï¼Œå¦‚æœçº¿ç¨‹æ± ç”¨å°½ï¼Œè°ƒç”¨ç«‹å³è¢«æ‹’ç»ï¼Œé»˜è®¤ä¸é‡‡ç”¨æ’é˜Ÿã€‚</li><li>æœåŠ¡é™çº§(å…œåº•æ–¹æ³•)ï¼šä¼˜å…ˆä¿è¯æ ¸å¿ƒæœåŠ¡ï¼Œè€Œéæ ¸å¿ƒæœåŠ¡ä¸å¯ç”¨æˆ–å¼±å¯ç”¨ã€‚è§¦å‘HystrixæœåŠ¡é™çº§çš„æƒ…å†µï¼šçº¿ç¨‹æ± å·²æ»¡ã€è¯·æ±‚è¶…æ—¶ã€‚</li></ol><p>çº¿ç¨‹éš”ç¦»å’ŒæœåŠ¡é™çº§ä¹‹åï¼Œç”¨æˆ·è¯·æ±‚æ•…éšœæ—¶ï¼Œçº¿ç¨‹ä¸ä¼šè¢«é˜»å¡ï¼Œæ›´ä¸ä¼šæ— ä¼‘æ­¢ç­‰å¾…æˆ–è€…çœ‹åˆ°ç³»ç»Ÿå¥”æºƒï¼Œè‡³å°‘å¯ä»¥çœ‹åˆ°æ‰§è¡Œç»“æœ(ç†”æ–­æœºåˆ¶)ã€‚</p><h2 id="5-2å±€éƒ¨ç†”æ–­æ¡ˆä¾‹"><a href="#5-2å±€éƒ¨ç†”æ–­æ¡ˆä¾‹" class="headerlink" title="5.2å±€éƒ¨ç†”æ–­æ¡ˆä¾‹"></a>5.2å±€éƒ¨ç†”æ–­æ¡ˆä¾‹</h2><p>1)å¼•å…¥ç†”æ–­çš„ä¾èµ–åæ ‡ï¼š</p><p>åœ¨<code>user-consumer</code>ä¸­åŠ å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--ç†”æ–­å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-hystrix<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>(2)å¼€å¯ç†”æ–­çš„æ³¨è§£</p><p>ä¿®æ”¹<code>user-consumer</code>çš„<code>com.yuefeng.UserConsumerApplication</code>,åœ¨è¯¥ç±»ä¸Šæ·»åŠ <code>@EnableCircuitBreaker</code>,ä»£ç å¦‚ä¸‹ï¼š</p><p><img src="../../../img/md_img/springcloud01/image-20210517092521346.png" alt="image-20210517092521346"></p><p>(3)æœåŠ¡é™çº§å¤„ç†</p><p>æ·»åŠ é™çº§å¤„ç†æ–¹æ³•ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æœåŠ¡é™çº§</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">defaultMethod</span><span class="params">()</span></span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setUsername(<span class="string">&quot;é»˜è®¤çš„æœåŠ¡é™çº§&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨éœ€è¦ç†”æ–­å¤„ç†çš„æ–¹æ³•ä¸Šæ·»åŠ <code>@HystrixCommand(fallbackMethod = &quot;defaultMethod&quot;)</code></p><h2 id="5-3å…¶ä»–ç†”æ–­ç­–ç•¥é…ç½®"><a href="#5-3å…¶ä»–ç†”æ–­ç­–ç•¥é…ç½®" class="headerlink" title="5.3å…¶ä»–ç†”æ–­ç­–ç•¥é…ç½®"></a>5.3å…¶ä»–ç†”æ–­ç­–ç•¥é…ç½®</h2><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1.</span> <span class="string">ç†”æ–­åä¼‘çœ æ—¶é—´ï¼šsleepWindowInMilliseconds</span></span><br><span class="line"><span class="meta">2.</span> <span class="string">ç†”æ–­è§¦å‘æœ€å°è¯·æ±‚æ¬¡æ•°ï¼šrequestVolumeThreshold</span></span><br><span class="line"><span class="meta">3.</span> <span class="string">ç†”æ–­è§¦å‘é”™è¯¯æ¯”ä¾‹é˜ˆå€¼ï¼šerrorThresholdPercentage</span></span><br><span class="line"><span class="meta">4.</span> <span class="string">ç†”æ–­è¶…æ—¶æ—¶é—´ï¼štimeoutInMilliseconds</span></span><br></pre></td></tr></table></figure><p>é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½®ç†”æ–­ç­–ç•¥ï¼š</span></span><br><span class="line"><span class="attr">hystrix:</span></span><br><span class="line">  <span class="attr">command:</span></span><br><span class="line">    <span class="attr">default:</span></span><br><span class="line">      <span class="attr">circuitBreaker:</span></span><br><span class="line">        <span class="comment"># å¼ºåˆ¶æ‰“å¼€ç†”æ–­å™¨ é»˜è®¤falseå…³é—­çš„ã€‚æµ‹è¯•é…ç½®æ˜¯å¦ç”Ÿæ•ˆ</span></span><br><span class="line">        <span class="attr">forceOpen:</span> <span class="literal">false</span></span><br><span class="line">        <span class="comment"># è§¦å‘ç†”æ–­é”™è¯¯æ¯”ä¾‹é˜ˆå€¼ï¼Œé»˜è®¤å€¼50%</span></span><br><span class="line">        <span class="attr">errorThresholdPercentage:</span> <span class="number">50</span></span><br><span class="line">        <span class="comment"># ç†”æ–­åä¼‘çœ æ—¶é•¿ï¼Œé»˜è®¤å€¼5ç§’</span></span><br><span class="line">        <span class="attr">sleepWindowInMilliseconds:</span> <span class="number">10000</span></span><br><span class="line">        <span class="comment"># ç†”æ–­è§¦å‘æœ€å°è¯·æ±‚æ¬¡æ•°ï¼Œé»˜è®¤å€¼æ˜¯20</span></span><br><span class="line">        <span class="attr">requestVolumeThreshold:</span> <span class="number">10</span></span><br><span class="line">      <span class="attr">execution:</span></span><br><span class="line">        <span class="attr">isolation:</span></span><br><span class="line">          <span class="attr">thread:</span></span><br><span class="line">            <span class="comment"># ç†”æ–­è¶…æ—¶è®¾ç½®ï¼Œé»˜è®¤ä¸º1ç§’</span></span><br><span class="line">            <span class="attr">timeoutInMilliseconds:</span> <span class="number">2000</span></span><br></pre></td></tr></table></figure><h2 id="5-4å…¨å±€æœåŠ¡é™çº§çš„fallbackæ–¹æ³•"><a href="#5-4å…¨å±€æœåŠ¡é™çº§çš„fallbackæ–¹æ³•" class="headerlink" title="5.4å…¨å±€æœåŠ¡é™çº§çš„fallbackæ–¹æ³•"></a>5.4å…¨å±€æœåŠ¡é™çº§çš„fallbackæ–¹æ³•</h2><p>ä¸¤ç§ç¼–å†™æ–¹å¼ï¼šç¼–å†™åœ¨ç±»ä¸Šï¼Œç¼–å†™åœ¨æ–¹æ³•ä¸Šã€‚åœ¨ç±»çš„ä¸Šè¾¹å¯¹ç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½ç”Ÿæ•ˆã€‚åœ¨æ–¹æ³•ä¸Šï¼Œä»…å¯¹å½“å‰æ–¹æ³•æœ‰æ•ˆã€‚</p><ol><li>æ·»åŠ ä¸€ä¸ªå…¨å±€æœåŠ¡é™çº§çš„æ–¹æ³•    </li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/****</span></span><br><span class="line"><span class="comment"> * å…¨å±€çš„æœåŠ¡é™çº§å¤„ç†æ–¹æ³•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">defaultFailBack</span><span class="params">()</span></span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setUsername(<span class="string">&quot;Default-æœåŠ¡é™çº§,é»˜è®¤å¤„ç†ï¼&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span>  user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><pre><code>2. åŸæ¥çš„`@HystrixCommand`ç›¸å…³å»æ‰ï¼Œå¹¶æ·»åŠ `@HystrixCommand`æ³¨è§£ï¼š 3. ç±»ä¸Šæ·»åŠ `@DefaultProperties(defaultFallback = &quot;defaultFailBack&quot;)`</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> SPringcloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springboot03</title>
      <link href="2021/05/springboot03/"/>
      <url>2021/05/springboot03/</url>
      
        <content type="html"><![CDATA[<hr><!--<div class="note blue icon modern"><i class="note-icon fas fa-bullhorn"></i><p>æç¤ºæ¡†</p></div><div class="note green icon modern"><i class="note-icon fa fa-rocket"></i><p>ğŸ“š <a href="">æ–‡æ¡£ç›®å½•</a>              </p><p>ğŸš€ å¿«é€Ÿå¼€å§‹ - ğŸ“‘ ä¸»é¢˜é¡µé¢ - ğŸ›  ä¸»é¢˜é…ç½®-1 - âš”ï¸ ä¸»é¢˜é…ç½®-2 - â“ ä¸»é¢˜é—®ç­” - âš¡ï¸ è¿›é˜¶æ•™ç¨‹ - âœ¨ æ›´æ–°æ—¥èªŒ - ğŸ¤ æ‰“èµ</p></div><div class="note red icon modern"><i class="note-icon fas fa-skull-crossbones"></i><p>å±é™©æ¡†</p></div>--><hr><h1 id="1-Springbooté›†æˆç¬¬ä¸‰æ–¹æ¡†æ¶"><a href="#1-Springbooté›†æˆç¬¬ä¸‰æ–¹æ¡†æ¶" class="headerlink" title="1.Springbooté›†æˆç¬¬ä¸‰æ–¹æ¡†æ¶"></a>1.Springbooté›†æˆç¬¬ä¸‰æ–¹æ¡†æ¶</h1><p>åœ¨springbootä½¿ç”¨è¿‡ç¨‹ä¸­ï¼ŒåŸºæœ¬æ˜¯æ˜¯å’Œç¬¬ä¸‰æ–¹çš„æ¡†æ¶æ•´åˆä½¿ç”¨çš„æ¯”è¾ƒå¤šï¼Œå°±æ˜¯åˆ©ç”¨äº†springbootçš„ç®€åŒ–é…ç½®ï¼Œèµ·æ­¥ä¾èµ–çš„æœ‰æ•ˆæ€§ã€‚æˆ‘ä»¬æ•´åˆä¸€äº›å¸¸è§çš„ç¬¬ä¸‰æ–¹æ¡†æ¶è¿›è¡Œæ•´åˆä½¿ç”¨ï¼Œåé¢ä¼šéœ€è¦ç”¨åˆ°ã€‚</p><ul><li>æŒæ¡springbootæ•´åˆmybatis</li><li>æŒæ¡springbootæ•´åˆredis</li><li>æŒæ¡springbootæ•´åˆjunit</li></ul><h2 id="1-1æ•´åˆjunit"><a href="#1-1æ•´åˆjunit" class="headerlink" title="1.1æ•´åˆjunit"></a>1.1æ•´åˆjunit</h2><p>1.æ·»åŠ ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2.åˆ›å»ºåœ¨/main/java/ä¸‹ä¸€ä¸ªç±»UserServiceç”¨äºæµ‹è¯•: </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è·å–ç”¨æˆ·çš„ä¿¡æ¯&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;zhangsan&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3.åœ¨test/java/ä¸‹åˆ›å»ºæµ‹è¯•ç±»ï¼Œç±»çš„åŒ…åå’Œå¯åŠ¨ç±»çš„æŠ¥åä¸€è‡´å³å¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootApplicationTests</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String userinfo = userService.getUser();</span><br><span class="line">        System.out.println(userinfo);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1-2æ•´åˆmybatis"><a href="#1-2æ•´åˆmybatis" class="headerlink" title="1.2æ•´åˆmybatis"></a>1.2æ•´åˆmybatis</h2><p>ï¼ˆ1ï¼‰å®ç°æ­¥éª¤è¯´æ˜</p><p>1.å‡†å¤‡æ•°æ®åº“åˆ›å»ºè¡¨<br>2.æ·»åŠ èµ·æ­¥ä¾èµ–<br>3.åˆ›å»ºPOJO<br>4.åˆ›å»ºmapperæ¥å£<br>5.åˆ›å»ºæ˜ å°„æ–‡ä»¶<br>6.é…ç½®yml æŒ‡å®šæ˜ å°„æ–‡ä»¶ä½ç½®<br>7.åˆ›å»ºå¯åŠ¨ç±»ï¼ŒåŠ å…¥æ³¨è§£æ‰«æ<br>8.åˆ›å»ºservice controller è¿›è¡Œæµ‹è¯•</p><p>ï¼ˆ2ï¼‰åˆ›å»ºæ•°æ®åº“è¡¨</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for `user`</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `<span class="keyword">user</span>`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>` (</span><br><span class="line">`id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">`username` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">`password` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">`name` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line"><span class="keyword">PRIMARY</span> <span class="keyword">KEY</span> (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">3</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of user</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;zhangsan&#x27;</span>, <span class="string">&#x27;123&#x27;</span>, <span class="string">&#x27;å¼ ä¸‰&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;lisi&#x27;</span>, <span class="string">&#x27;123&#x27;</span>, <span class="string">&#x27;æå››&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>(3)åˆ›å»ºå·¥ç¨‹å¹¶æ·»åŠ ä¾èµ–pom.xmlå¦‚ä¸‹å‚è€ƒ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yuefeng<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>yuefeng-springboot-mybatis-demo04<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--é©±åŠ¨--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--mybatisçš„ èµ·æ­¥ä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--spring webèµ·æ­¥ä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>(4)åˆ›å»ºpojo</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String username;<span class="comment">//ç”¨æˆ·å</span></span><br><span class="line">    <span class="keyword">private</span> String password;<span class="comment">//å¯†ç </span></span><br><span class="line">    <span class="keyword">private</span> String name;<span class="comment">//å§“å</span></span><br><span class="line">    <span class="comment">//getter setter...</span></span><br><span class="line">    <span class="comment">//toString</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(5)åˆ›å»ºmapperæ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yuefeng.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.yuefeng.pojo.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * mapperæ¥å£</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yuefeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@packagename</span> com.yuefeng.dao</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2021/2/23</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAllUser</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(6)åˆ›å»ºUserMapperæ˜ å°„æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.yuefeng.dao.UserMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAllUser&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.yuefeng.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        SELECT * from user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="../../../img/md_img/springboot03/1582791131694.png" alt="1582791131694"></p><p>(7)åˆ›å»ºé…ç½®application.ymlæ–‡ä»¶ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost/springboot_user?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=UTC</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line"><span class="comment">#é…ç½®mapperçš„æ˜ å°„æ–‡ä»¶çš„ä½ç½®</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mappers/*Mapper.xml</span></span><br></pre></td></tr></table></figure><p>(8)åˆ›å»ºå¯åŠ¨ç±»ï¼ŒåŠ å…¥mapperæ¥å£æ³¨è§£æ‰«æ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(basePackages = &quot;com.yuefeng.dao&quot;)</span></span><br><span class="line"><span class="comment">//MapperScan ç”¨äºæ‰«ææŒ‡å®šåŒ…ä¸‹çš„æ‰€æœ‰çš„æ¥å£ï¼Œå°†æ¥å£äº§ç”Ÿä»£ç†å¯¹è±¡äº¤ç»™spriingå®¹å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(MybatisApplication.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(9)åˆ›å»ºservice å®ç°ç±»å’Œæ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yuefeng.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.yuefeng.dao.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.yuefeng.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.yuefeng.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * æè¿°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yuefeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@packagename</span> com.yuefeng.service.impl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2021/2/23</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAllUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.findAllUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥å£å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yuefeng.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.yuefeng.pojo.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * æè¿°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yuefeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@packagename</span> com.yuefeng.service</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2021/2/23</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAllUser</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(10)åˆ›å»ºcontroller</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yuefeng.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.yuefeng.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.yuefeng.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * æè¿°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yuefeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@packagename</span> com.yuefeng.controller</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2021/2/23</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/findAll&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userService.findAllUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(11)æµ‹è¯•</p><p>æµè§ˆå™¨ä¸­å‘é€è¯·æ±‚ï¼š<code>http://localhost:8080/user/findAll</code></p><h2 id="1-2æ•´åˆredis"><a href="#1-2æ•´åˆredis" class="headerlink" title="1.2æ•´åˆredis"></a>1.2æ•´åˆredis</h2><p>ä¸ºäº†æ–¹ä¾¿ ï¼Œæˆ‘ä»¬å°±åœ¨ä¹‹å‰çš„mybatisä¸­çš„åŸºç¡€ä¸Šè¿›è¡Œæµ‹è¯•ã€‚</p><h3 id="1-2-1-æ•´åˆrediså®ç°æ•°æ®æ·»åŠ "><a href="#1-2-1-æ•´åˆrediså®ç°æ•°æ®æ·»åŠ " class="headerlink" title="1.2.1 æ•´åˆrediså®ç°æ•°æ®æ·»åŠ "></a>1.2.1 æ•´åˆrediså®ç°æ•°æ®æ·»åŠ </h3><p>(1)springbootæ•´åˆredisçš„æ­¥éª¤</p><ol><li>æ·»åŠ èµ·æ­¥ä¾èµ–</li><li>å‡†å¤‡å¥½redisæœåŠ¡å™¨ å¹¶å¯åŠ¨</li><li>åœ¨SerServiceä¸­çš„æ–¹æ³•ä¸­ä½¿ç”¨ <ol><li>æ³¨å…¥redisTemplate</li><li>åœ¨æ–¹æ³•ä¸­è¿›è¡Œè°ƒç”¨</li></ol></li><li>é…ç½®yml é…ç½®redisçš„æœåŠ¡å™¨çš„åœ°å€</li></ol><p>ï¼ˆ2ï¼‰æ·»åŠ èµ·æ­¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>(3)é…ç½®redisé“¾æ¥ä¿¡æ¯</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost/springboot_user?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=UTC</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line"><span class="comment">#é…ç½®mapperçš„æ˜ å°„æ–‡ä»¶çš„ä½ç½®</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mappers/*Mapper.xml</span></span><br></pre></td></tr></table></figure><p>(4)serviceä¸­è¿›è¡Œè°ƒç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAllUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.è·å–redisä¸­çš„æ•°æ®</span></span><br><span class="line">        List&lt;User&gt; list = (List&lt;User&gt;) redisTemplate.boundValueOps(<span class="string">&quot;key_all&quot;</span>).get();</span><br><span class="line">        <span class="comment">//2.åˆ¤æ–­ æ˜¯å¦æœ‰ï¼Œå¦‚æœæœ‰åˆ™è¿”å›ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä»mysqlä¸­è·å–è®¾ç½®åˆ°redisä¸­å†è¿”å›</span></span><br><span class="line">        <span class="keyword">if</span> (list != <span class="keyword">null</span> &amp;&amp; list.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> list;</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;User&gt; allUser = userMapper.findAllUser();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3 ä»mysqlä¸­è·å–è®¾ç½®åˆ°redisä¸­å†è¿”å›</span></span><br><span class="line">        redisTemplate.boundValueOps(<span class="string">&quot;key_all&quot;</span>).set(allUser);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> allUser;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(5)å¯åŠ¨redis</p><p>å¦‚å›¾åŒå‡»exeå¯åŠ¨</p><p><img src="../../../img/md_img/springboot03/1582792252446.png" alt="1582792252446"></p><p>ï¼ˆ6ï¼‰æµ‹è¯•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="../../../img/md_img/springboot03/1582792362271.png" alt="1582792362271"></p><p>å†æ¬¡è®¿é—®ï¼Œåˆ™ä»redisä¸­è·å–æ•°æ®äº†ã€‚</p><h3 id="1-2-2redisçš„åºåˆ—åŒ–æœºåˆ¶"><a href="#1-2-2redisçš„åºåˆ—åŒ–æœºåˆ¶" class="headerlink" title="1.2.2redisçš„åºåˆ—åŒ–æœºåˆ¶"></a>1.2.2redisçš„åºåˆ—åŒ–æœºåˆ¶</h3><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå‡ºç°äº†ä¹±ç ï¼Œè¿™ä¸ªæ˜¯ç”±äºredisçš„é»˜è®¤çš„åºåˆ—åŒ–æœºåˆ¶å¯¼è‡´çš„ã€‚è¿™é‡Œéœ€è¦æ³¨æ„ä¸‹ï¼šå¹¶ä¸æ˜¯é”™è¯¯ï¼Œç”±äºåºåˆ—åŒ–æœºåˆ¶ï¼Œå¯¼è‡´æˆ‘ä»¬æ•°æ®æ— æ³•æ­£å¸¸æ˜¾ç¤ºã€‚å¦‚æœæœ‰ä»£ç çš„æ–¹å¼è·å–åˆ™æ˜¯å¯ä»¥è·å–åˆ°æ•°æ®çš„ã€‚</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1ï¼Œé»˜è®¤çš„æƒ…å†µä¸‹redisTemplateæ“ä½œkey</span> <span class="string">vlaueçš„æ—¶å€™ å¿…é¡»è¦æ±‚ keyä¸€å®šå®ç°åºåˆ—åŒ– value ä¹Ÿéœ€è¦å®ç°åºåˆ—åŒ–</span></span><br><span class="line"><span class="attr">2ï¼Œé»˜è®¤çš„æƒ…å†µä¸‹redisTemplateä½¿ç”¨JDKè‡ªå¸¦çš„åºåˆ—åŒ–æœºåˆ¶ï¼šJdkSerializationRedisSerializer</span></span><br><span class="line"><span class="meta">3ï¼ŒJDKè‡ªå¸¦çš„åºåˆ—åŒ–æœºåˆ¶ä¸­è¦æ±‚éœ€è¦key</span> <span class="string">å’Œvalue éƒ½éœ€è¦å®ç°Serializableæ¥å£</span></span><br><span class="line"><span class="meta">4.</span> <span class="string">RedisTemplateæ”¯æŒé»˜è®¤ä»¥ä¸‹å‡ ç§åºåˆ—åŒ–æœºåˆ¶ï¼šæœºåˆ¶éƒ½å®ç°äº†RedisSerializeræ¥å£</span></span><br><span class="line"><span class="meta">+</span> <span class="string">OxmSerializer</span></span><br><span class="line"><span class="meta">+</span> <span class="string">GenericJackson2JsonRedisSerializer</span></span><br><span class="line"><span class="meta">+</span> <span class="string">GenericToStringSerializer</span></span><br><span class="line"><span class="meta">+</span> <span class="string">StringRedisSerializer</span></span><br><span class="line"><span class="meta">+</span> <span class="string">JdkSerializationRedisSerializer</span></span><br><span class="line"><span class="meta">+</span> <span class="string">Jackson2JsonRedisSerializer</span></span><br></pre></td></tr></table></figure><p><img src="../../../img/md_img/springboot03/1582792722562.png" alt="1582792722562"></p><p>æˆ‘ä»¬å¯ä»¥è¿›è¡Œè‡ªå®šä¹‰åºåˆ—åŒ–æœºåˆ¶ï¼šä¾‹å¦‚ï¼šæˆ‘ä»¬å®šä¹‰key ä¸ºå­—ç¬¦ä¸²åºåˆ—åŒ–æœºåˆ¶ï¼Œvalueï¼šä¸ºJDKè‡ªå¸¦çš„æ–¹å¼åˆ™ï¼Œåº”å½“å¤„ç†å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> RedisTemplate&lt;Object, Object&gt; <span class="title">redisTemplate</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        RedisConnectionFactory redisConnectionFactory)</span> <span class="keyword">throws</span> UnknownHostException </span>&#123;</span><br><span class="line">    RedisTemplate&lt;Object, Object&gt; template = <span class="keyword">new</span> RedisTemplate&lt;&gt;();</span><br><span class="line">    template.setConnectionFactory(redisConnectionFactory);</span><br><span class="line">    <span class="comment">//è®¾ç½®keyçš„å€¼ä¸ºå­—ç¬¦ä¸²åºåˆ—åŒ–æ–¹å¼ é‚£ä¹ˆåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­key ä¸€å®šåªèƒ½æ˜¯å­—ç¬¦ä¸²</span></span><br><span class="line">    template.setKeySerializer(<span class="keyword">new</span> StringRedisSerializer());</span><br><span class="line">    <span class="comment">//è®¾ç½®valueçš„åºåˆ—åŒ–æœºåˆ¶ä¸ºJDKè‡ªå¸¦çš„æ–¹å¼</span></span><br><span class="line">    template.setValueSerializer(<span class="keyword">new</span> JdkSerializationRedisSerializer());</span><br><span class="line">    <span class="keyword">return</span> template;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•´ä½“é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(basePackages = &quot;com.yuefeng.dao&quot;)</span></span><br><span class="line"><span class="comment">//MapperScan ç”¨äºæ‰«ææŒ‡å®šåŒ…ä¸‹çš„æ‰€æœ‰çš„æ¥å£ï¼Œå°†æ¥å£äº§ç”Ÿä»£ç†å¯¹è±¡äº¤ç»™spriingå®¹å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(MybatisApplication.class,args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RedisTemplate&lt;Object, Object&gt; <span class="title">redisTemplate</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        RedisConnectionFactory redisConnectionFactory)</span> <span class="keyword">throws</span> UnknownHostException </span>&#123;</span><br><span class="line">        RedisTemplate&lt;Object, Object&gt; template = <span class="keyword">new</span> RedisTemplate&lt;&gt;();</span><br><span class="line">        template.setConnectionFactory(redisConnectionFactory);</span><br><span class="line">        <span class="comment">//è®¾ç½®keyçš„å€¼ä¸ºå­—ç¬¦ä¸²åºåˆ—åŒ–æ–¹å¼ é‚£ä¹ˆåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­key ä¸€å®šåªèƒ½æ˜¯å­—ç¬¦ä¸²</span></span><br><span class="line">        template.setKeySerializer(<span class="keyword">new</span> StringRedisSerializer());</span><br><span class="line">        <span class="comment">//è®¾ç½®valueçš„åºåˆ—åŒ–æœºåˆ¶ä¸ºJDKè‡ªå¸¦çš„æ–¹å¼</span></span><br><span class="line">        template.setValueSerializer(<span class="keyword">new</span> JdkSerializationRedisSerializer());</span><br><span class="line">        <span class="keyword">return</span> template;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡å¯å¹¶é‡æ–°æµ‹è¯•å¦‚ä¸‹æ•ˆæœï¼š</p><p><img src="../../../img/md_img/springboot03/1582793228764.png" alt="1582793228764"></p><p>æ€»ç»“ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åœ¨å·¥ä½œä¸­ï¼Œæ ¹æ®æˆ‘ä»¬ä¸šåŠ¡çš„éœ€è¦è¿›è¡Œè®¾ç½®å’Œé€‰æ‹©ï¼Œå¦‚æœæ²¡æœ‰åˆé€‚çš„è¿˜å¯ä»¥è‡ªå·±å®šä¹‰ã€‚åªè¦å®ç°RedisSerializeræ¥å£å³å¯ã€‚</span><br></pre></td></tr></table></figure><h1 id="2-Springbootç‰ˆæœ¬æ§åˆ¶çš„åŸç†åˆ†æ"><a href="#2-Springbootç‰ˆæœ¬æ§åˆ¶çš„åŸç†åˆ†æ" class="headerlink" title="2.Springbootç‰ˆæœ¬æ§åˆ¶çš„åŸç†åˆ†æ"></a>2.Springbootç‰ˆæœ¬æ§åˆ¶çš„åŸç†åˆ†æ</h1><p>æˆ‘ä»¬çŸ¥é“springbootä¸éœ€è¦æ·»åŠ ç‰ˆæœ¬ã€‚ç‰ˆæœ¬ç»Ÿä¸€è¿›è¡Œç®¡ç†ã€‚é‚£ä¹ˆåŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿçœ‹ä¸‹è¾¹å›¾ï¼š</p><p><img src="../../../img/md_img/springboot03/1582794808473.png" alt="1582794808473"></p><p>å¦‚å›¾æ‰€ç¤ºï¼šæˆ‘ä»¬è‡ªå·±çš„springbooté¡¹ç›®ç»§æ‰¿äºspring-boot-starter-parent,è€Œä»–åˆç»§æ‰¿ä¸spring-boot-dependencies ï¼Œdependenciesä¸­å®šä¹‰äº†å„ä¸ªç‰ˆæœ¬ã€‚é€šè¿‡mavençš„ä¾èµ–ä¼ é€’ç‰¹æ€§ä»è€Œå®ç°äº†ç‰ˆæœ¬çš„ç»Ÿä¸€ç®¡ç†ã€‚</p><h1 id="3-SpringBootçš„ç›‘æ§"><a href="#3-SpringBootçš„ç›‘æ§" class="headerlink" title="3.SpringBootçš„ç›‘æ§"></a>3.SpringBootçš„ç›‘æ§</h1><p>æ—¶å¸¸æˆ‘ä»¬åœ¨ä½¿ç”¨çš„é¡¹ç›®çš„æ—¶å€™ï¼Œæƒ³çŸ¥é“ç›¸å…³é¡¹ç›®çš„ä¸€äº›å‚æ•°å’Œè°ƒç”¨çŠ¶æ€ï¼Œè€ŒSpringBootè‡ªå¸¦ç›‘æ§åŠŸèƒ½Actuatorï¼Œå¯ä»¥å¸®åŠ©å®ç°å¯¹ç¨‹åºå†…éƒ¨è¿è¡Œæƒ…å†µç›‘æ§ï¼Œæ¯”å¦‚ç›‘æ§çŠ¶å†µã€BeanåŠ è½½æƒ…å†µã€é…ç½®å±æ€§ã€æ—¥å¿—ä¿¡æ¯ç­‰ã€‚</p><h2 id="3-1Actuator"><a href="#3-1Actuator" class="headerlink" title="3.1Actuator"></a>3.1Actuator</h2><p>â€‹    Actuatoræ˜¯springbootè‡ªå¸¦çš„ç»„ä»¶å¯ä»¥ç”¨æ¥è¿›è¡Œç›‘æ§ï¼ŒBeanåŠ è½½æƒ…å†µã€ç¯å¢ƒå˜é‡ã€æ—¥å¿—ä¿¡æ¯ã€çº¿ç¨‹ä¿¡æ¯ç­‰ç­‰ï¼Œä½¿ç”¨ç®€å•</p><h3 id="3-1-1-ä½¿ç”¨actuator"><a href="#3-1-1-ä½¿ç”¨actuator" class="headerlink" title="3.1.1 ä½¿ç”¨actuator"></a>3.1.1 ä½¿ç”¨actuator</h3><p>(1)æ“ä½œæ­¥éª¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.åˆ›å»ºspringbootå·¥ç¨‹</span><br><span class="line">2.æ·»åŠ Actuatorçš„èµ·æ­¥ä¾èµ–</span><br><span class="line">3.é…ç½®å¼€å¯ç«¯ç‚¹å’Œç›¸å…³é…ç½®é¡¹</span><br><span class="line">4.é€šè¿‡ç«¯ç‚¹è·¯å¾„æŸ¥çœ‹ä¿¡æ¯</span><br></pre></td></tr></table></figure><p>(2)åˆ›å»ºå·¥ç¨‹ï¼Œpom.xml,</p><p>æ³¨æ„ä¸»è¦éœ€è¦æ·»åŠ ä¾èµ–å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ€»ä½“å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yuefeng<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>yuefeng-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yuefeng-actuator<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>(3)ç¼–å†™å¯åŠ¨ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">yuefengActuatorApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(yuefengActuatorApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RestController</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@GetMapping(&quot;/index&quot;)</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ï¼ˆ4ï¼‰é…ç½®application.properties:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½®å¥åº·ç«¯ç‚¹å¼€å¯æ‰€æœ‰è¯¦æƒ…ä¿¡æ¯</span></span><br><span class="line"><span class="meta">management.endpoint.health.show-details</span>=<span class="string">always </span></span><br><span class="line"><span class="comment"># è®¾ç½®å¼€æ”¾æ‰€æœ‰webç›¸å…³çš„ç«¯ç‚¹ä¿¡æ¯</span></span><br><span class="line"><span class="meta">management.endpoints.web.exposure.include</span>=<span class="string">*</span></span><br><span class="line"><span class="comment"># è®¾ç½®infoå‰ç¼€çš„ä¿¡æ¯è®¾ç½®</span></span><br><span class="line"><span class="meta">info.name</span>=<span class="string">zhangsan</span></span><br><span class="line"><span class="meta">info.age</span>=<span class="string">18</span></span><br></pre></td></tr></table></figure><p>(5)åœ¨æµè§ˆå™¨è¾“å…¥ åœ°å€ï¼š<code>http://localhost:8080/actuator</code></p><p><img src="../../../img/md_img/springboot03/1583320454547.png" alt="1583320454547"></p><p>æ˜¾ç¤ºå¦‚ä¸Šçš„ä¿¡æ¯ï¼Œå°±å¯ä»¥çœ‹åˆ°ç›¸å…³çš„è·¯å¾„ï¼Œè¿™äº›è·¯å¾„åˆ†è¡¨ä»£è¡¨ä¸åŒçš„ä¿¡æ¯çš„å«ä¹‰ã€‚</p><h3 id="3-1-2-ç›‘æ§è·¯å¾„åˆ—è¡¨è¯´æ˜"><a href="#3-1-2-ç›‘æ§è·¯å¾„åˆ—è¡¨è¯´æ˜" class="headerlink" title="3.1.2 ç›‘æ§è·¯å¾„åˆ—è¡¨è¯´æ˜"></a>3.1.2 ç›‘æ§è·¯å¾„åˆ—è¡¨è¯´æ˜</h3><p>ä»¥ä¸‹å±•ç¤ºéƒ¨åˆ†åˆ—è¡¨</p><table><thead><tr><th><strong>è·¯å¾„</strong></th><th><strong>æè¿°</strong></th></tr></thead><tbody><tr><td>/beans</td><td>æè¿°åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡é‡Œå…¨éƒ¨çš„Beanï¼Œä»¥åŠå®ƒä»¬çš„å…³ç³»</td></tr><tr><td>/env</td><td>è·å–å…¨éƒ¨ç¯å¢ƒå±æ€§</td></tr><tr><td>/env/{name}</td><td>æ ¹æ®åç§°è·å–ç‰¹å®šçš„ç¯å¢ƒå±æ€§å€¼</td></tr><tr><td>/health</td><td>æŠ¥å‘Šåº”ç”¨ç¨‹åºçš„å¥åº·æŒ‡æ ‡ï¼Œè¿™äº›å€¼ç”±HealthIndicatorçš„å®ç°ç±»æä¾›</td></tr><tr><td>/info</td><td>è·å–åº”ç”¨ç¨‹åºçš„å®šåˆ¶ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯ç”±infoæ‰“å¤´çš„å±æ€§æä¾›</td></tr><tr><td>/mappings</td><td>æè¿°å…¨éƒ¨çš„URIè·¯å¾„ï¼Œä»¥åŠå®ƒä»¬å’Œæ§åˆ¶å™¨(åŒ…å«Actuatorç«¯ç‚¹)çš„æ˜ å°„å…³ç³»</td></tr><tr><td>/metrics</td><td>æŠ¥å‘Šå„ç§åº”ç”¨ç¨‹åºåº¦é‡ä¿¡æ¯ï¼Œæ¯”å¦‚å†…å­˜ç”¨é‡å’ŒHTTPè¯·æ±‚è®¡æ•°</td></tr><tr><td>/metrics/{name}</td><td>æŠ¥å‘ŠæŒ‡å®šåç§°çš„åº”ç”¨ç¨‹åºåº¦é‡å€¼</td></tr><tr><td>/trace</td><td>æä¾›åŸºæœ¬çš„HTTPè¯·æ±‚è·Ÿè¸ªä¿¡æ¯(æ—¶é—´æˆ³ã€HTTPå¤´ç­‰)</td></tr></tbody></table><h1 id="4-SpringBoot-admin"><a href="#4-SpringBoot-admin" class="headerlink" title="4.SpringBoot admin"></a>4.SpringBoot admin</h1><p>å¦‚æœä½¿ç”¨actuatorä½¿ç”¨èµ·æ¥æ¯”è¾ƒè´¹åŠ²ï¼Œæ²¡æœ‰æ•°æ®ç›´è§‚æ„Ÿå—ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ’ä»¶æ¥å±•ç¤ºã€‚</p><h2 id="4-1ä»‹ç»"><a href="#4-1ä»‹ç»" class="headerlink" title="4.1ä»‹ç»"></a>4.1ä»‹ç»</h2><ul><li>Spring Boot Adminæ˜¯ä¸€ä¸ªå¼€æºç¤¾åŒºé¡¹ç›®ï¼Œç”¨äºç®¡ç†å’Œç›‘æ§SpringBootåº”ç”¨ç¨‹åºã€‚ </li><li>Spring Boot Admin æœ‰ä¸¤ä¸ªè§’è‰²ï¼Œå®¢æˆ·ç«¯(Client)å’ŒæœåŠ¡ç«¯(Server)ã€‚</li><li>åº”ç”¨ç¨‹åºä½œä¸ºSpring Boot Admin Clientå‘ä¸ºSpring Boot Admin Serveræ³¨å†Œ</li><li>Spring Boot Admin Server é€šè¿‡å›¾å½¢åŒ–ç•Œé¢æ–¹å¼å±•ç¤ºSpring Boot Admin Clientçš„ç›‘æ§ä¿¡æ¯ã€‚</li></ul><h2 id="4-2-ä½¿ç”¨"><a href="#4-2-ä½¿ç”¨" class="headerlink" title="4.2 ä½¿ç”¨"></a>4.2 ä½¿ç”¨</h2><p>spring boot adminçš„æ¶æ„è§’è‰²</p><ul><li>admin server ç”¨äºæ”¶é›†ç»Ÿè®¡æ‰€æœ‰ç›¸å…³clientçš„æ³¨å†Œè¿‡æ¥çš„ä¿¡æ¯è¿›è¡Œæ±‡æ€»å±•ç¤º</li><li>admin client æ¯ä¸€ä¸ªspringbootå·¥ç¨‹éƒ½æ˜¯ä¸€ä¸ªclient ç›¸å…³çš„åŠŸèƒ½å±•ç¤ºéœ€è¦æ±‡æ€»åˆ°æ³¨å†Œæ±‡æ€»åˆ°server</li></ul><p><img src="../../../img/md_img/springboot03/1583320990670.png" alt="1583320990670"></p><p>ï¼ˆ1ï¼‰åˆ›å»ºadmin server å·¥ç¨‹ yuefeng-admin-server</p><p>å¯ä½¿ç”¨spring initianzeræ¥åˆ›å»ºï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.13.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yuefeng<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ithima-admin-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>ithima-admin-server<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">spring-boot-admin.version</span>&gt;</span>2.1.6<span class="tag">&lt;/<span class="name">spring-boot-admin.version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>de.codecentric<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-admin-starter-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>de.codecentric<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-admin-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-boot-admin.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>(2)åˆ›å»ºå¯åŠ¨ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableAdminServer</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IthimaAdminServerApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">      SpringApplication.run(IthimaAdminServerApplication.class, args);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><p>@EnableAdminServer è¯¥æ³¨è§£ç”¨äºå¯ç”¨ServeråŠŸèƒ½ã€‚</p><p>(3)ä¿®æ”¹application.propertiesæ–‡ä»¶</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">server.port</span>=<span class="string">9000</span></span><br></pre></td></tr></table></figure><p>(4)åˆ›å»ºadmin client å·¥ç¨‹ yuefeng-admin-client</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.13.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yuefeng<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ithima-admin-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>ithima-admin-client<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">spring-boot-admin.version</span>&gt;</span>2.1.6<span class="tag">&lt;/<span class="name">spring-boot-admin.version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>de.codecentric<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-admin-starter-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>de.codecentric<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-admin-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-boot-admin.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ï¼ˆ5ï¼‰åˆ›å»ºå¯åŠ¨ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IthimaAdminClientApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(IthimaAdminClientApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RestController</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@RequestMapping(&quot;/findAll&quot;)</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">a</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;aaaa&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(6)é…ç½®application.properties:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½®æ³¨å†Œåˆ°çš„admin serverçš„åœ°å€</span></span><br><span class="line"><span class="meta">spring.boot.admin.client.url</span>=<span class="string">http://localhost:9000</span></span><br><span class="line"><span class="comment"># å¯ç”¨å¥åº·æ£€æŸ¥ é»˜è®¤å°±æ˜¯true</span></span><br><span class="line"><span class="meta">management.endpoint.health.enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"># é…ç½®æ˜¾ç¤ºæ‰€æœ‰çš„ç›‘æ§è¯¦æƒ…</span></span><br><span class="line"><span class="meta">management.endpoint.health.show-details</span>=<span class="string">always</span></span><br><span class="line"><span class="comment"># å¼€æ”¾æ‰€æœ‰ç«¯ç‚¹</span></span><br><span class="line"><span class="meta">management.endpoints.web.exposure.include</span>=<span class="string">*</span></span><br><span class="line"><span class="comment"># è®¾ç½®ç³»ç»Ÿçš„åç§°</span></span><br><span class="line"><span class="meta">spring.application.name</span>=<span class="string">abc</span></span><br></pre></td></tr></table></figure><p>(7)å¯åŠ¨ä¸¤ä¸ªç³»ç»Ÿã€‚è®¿é—®è·¯å¾„<code>&lt;http://localhost:9000/&gt;</code></p><p><img src="../../../img/md_img/springboot03/1583324031320.png" alt="1583324031320"></p><p>æˆ‘ä»¬ç®€å•è®¤è¯†ä¸‹ï¼šå¹¶ç‚¹å‡»ç›¸å…³ç•Œé¢é“¾æ¥å°±èƒ½çœ‹åˆ°ç›¸å…³çš„å›¾å½¢åŒ–å±•ç¤ºäº†ã€‚</p><p><img src="../../../img/md_img/springboot03/1583324107358.png" alt="1583324107358"></p>]]></content>
      
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> SPringboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot-2</title>
      <link href="2021/05/SpringBoot02/"/>
      <url>2021/05/SpringBoot02/</url>
      
        <content type="html"><![CDATA[<hr><!--  <div class="note blue icon modern"><i class="note-icon fas fa-bullhorn"></i><p>æç¤ºæ¡†</p></div><div class="note green icon modern"><i class="note-icon fa fa-rocket"></i><p>ğŸ“š <a href="">æ–‡æ¡£ç›®å½•</a>              </p><p>ğŸš€ <a href="../../../2021/04/SpringBoot01">å¿«é€Ÿå¼€å§‹</a> - ğŸ“‘ <a href="../../../2021/05/SpringBoot02">ä¸»é¢˜é¡µé¢</a> - ğŸ›  ä¸»é¢˜é…ç½®-1 - âš”ï¸ ä¸»é¢˜é…ç½®-2 - â“ ä¸»é¢˜é—®ç­” - âš¡ï¸ è¿›é˜¶æ•™ç¨‹ - âœ¨ æ›´æ–°æ—¥èªŒ - ğŸ¤ æ‰“èµ</p></div><div class="note red icon modern"><i class="note-icon fas fa-skull-crossbones"></i><p>å±é™©æ¡†</p></div> --><hr><h1 id="Webå¼€å‘"><a href="#Webå¼€å‘" class="headerlink" title="Webå¼€å‘"></a>Webå¼€å‘</h1><h2 id="1ã€SpringMVCè‡ªåŠ¨é…ç½®æ¦‚è§ˆ"><a href="#1ã€SpringMVCè‡ªåŠ¨é…ç½®æ¦‚è§ˆ" class="headerlink" title="1ã€SpringMVCè‡ªåŠ¨é…ç½®æ¦‚è§ˆ"></a>1ã€SpringMVCè‡ªåŠ¨é…ç½®æ¦‚è§ˆ</h2><p>Spring Boot provides auto-configuration for Spring MVC that <strong>works well with most applications.(å¤§å¤šåœºæ™¯æˆ‘ä»¬éƒ½æ— éœ€è‡ªå®šä¹‰é…ç½®)</strong></p><p>The auto-configuration adds the following features on top of Springâ€™s defaults:</p><ul><li><p>Inclusion of <code>ContentNegotiatingViewResolver</code> and <code>BeanNameViewResolver</code> beans.</p></li><li><ul><li>å†…å®¹åå•†è§†å›¾è§£æå™¨å’ŒBeanNameè§†å›¾è§£æå™¨</li></ul></li><li><p>Support for serving static resources, including support for WebJars (covered <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-spring-mvc-static-content">later in this document</a>)).</p></li><li><ul><li>é™æ€èµ„æºï¼ˆåŒ…æ‹¬webjarsï¼‰</li></ul></li><li><p>Automatic registration of <code>Converter</code>, <code>GenericConverter</code>, and <code>Formatter</code> beans.</p></li><li><ul><li>è‡ªåŠ¨æ³¨å†Œ <code>Converterï¼ŒGenericConverterï¼ŒFormatter </code></li></ul></li><li><p>Support for <code>HttpMessageConverters</code> (covered <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-spring-mvc-message-converters">later in this document</a>).</p></li><li><ul><li>æ”¯æŒ <code>HttpMessageConverters</code> ï¼ˆåæ¥æˆ‘ä»¬é…åˆå†…å®¹åå•†ç†è§£åŸç†ï¼‰</li></ul></li><li><p>Automatic registration of <code>MessageCodesResolver</code> (covered <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-spring-message-codes">later in this document</a>).</p></li><li><ul><li>è‡ªåŠ¨æ³¨å†Œ <code>MessageCodesResolver</code> ï¼ˆå›½é™…åŒ–ç”¨ï¼‰</li></ul></li><li><p>Static <code>index.html</code> support.</p></li><li><ul><li>é™æ€index.html é¡µæ”¯æŒ</li></ul></li><li><p>Custom <code>Favicon</code> support (covered <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-spring-mvc-favicon">later in this document</a>).</p></li><li><ul><li>è‡ªå®šä¹‰ <code>Favicon</code>  </li></ul></li><li><p>Automatic use of a <code>ConfigurableWebBindingInitializer</code> bean (covered <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-spring-mvc-web-binding-initializer">later in this document</a>).</p></li><li><ul><li>è‡ªåŠ¨ä½¿ç”¨ <code>ConfigurableWebBindingInitializer</code> ï¼Œï¼ˆDataBinderè´Ÿè´£å°†è¯·æ±‚æ•°æ®ç»‘å®šåˆ°JavaBeanä¸Šï¼‰</li></ul></li></ul><blockquote><p>If you want to keep those Spring Boot MVC customizations and make more <a href="https://docs.spring.io/spring/docs/5.2.9.RELEASE/spring-framework-reference/web.html#mvc">MVC customizations</a> (interceptors, formatters, view controllers, and other features), you can add your own <code>@Configuration</code> class of type <code>WebMvcConfigurer</code> but <strong>without</strong> <code>@EnableWebMvc</code>.</p><p><strong>ä¸ç”¨@EnableWebMvcæ³¨è§£ã€‚ä½¿ç”¨</strong> <strong><code>@Configuration</code></strong> <strong>+</strong> <strong><code>WebMvcConfigurer</code></strong> <strong>è‡ªå®šä¹‰è§„åˆ™</strong></p></blockquote><blockquote><p>If you want to provide custom instances of <code>RequestMappingHandlerMapping</code>, <code>RequestMappingHandlerAdapter</code>, or <code>ExceptionHandlerExceptionResolver</code>, and still keep the Spring Boot MVC customizations, you can declare a bean of type <code>WebMvcRegistrations</code> and use it to provide custom instances of those components.</p><p><strong>å£°æ˜</strong> <strong><code>WebMvcRegistrations</code></strong> <strong>æ”¹å˜é»˜è®¤åº•å±‚ç»„ä»¶</strong></p></blockquote><blockquote><p>If you want to take complete control of Spring MVC, you can add your own <code>@Configuration</code> annotated with <code>@EnableWebMvc</code>, or alternatively add your own <code>@Configuration</code>-annotated <code>DelegatingWebMvcConfiguration</code> as described in the Javadoc of <code>@EnableWebMvc</code>.</p><p><strong>ä½¿ç”¨</strong> <strong><code>@EnableWebMvc+@Configuration+DelegatingWebMvcConfiguration å…¨é¢æ¥ç®¡SpringMVC</code></strong></p></blockquote><h2 id="2ã€ç®€å•åŠŸèƒ½åˆ†æ"><a href="#2ã€ç®€å•åŠŸèƒ½åˆ†æ" class="headerlink" title="2ã€ç®€å•åŠŸèƒ½åˆ†æ"></a>2ã€ç®€å•åŠŸèƒ½åˆ†æ</h2><h3 id="2-1ã€é™æ€èµ„æºè®¿é—®"><a href="#2-1ã€é™æ€èµ„æºè®¿é—®" class="headerlink" title="2.1ã€é™æ€èµ„æºè®¿é—®"></a>2.1ã€é™æ€èµ„æºè®¿é—®</h3><h4 id="1ã€é™æ€èµ„æºç›®å½•"><a href="#1ã€é™æ€èµ„æºç›®å½•" class="headerlink" title="1ã€é™æ€èµ„æºç›®å½•"></a>1ã€é™æ€èµ„æºç›®å½•</h4><p>åªè¦é™æ€èµ„æºæ”¾åœ¨ç±»è·¯å¾„ä¸‹ï¼š called <code>/static</code> (or <code>/public</code> or <code>/resources</code> or <code>/META-INF/resources</code></p><p>è®¿é—® ï¼š å½“å‰é¡¹ç›®æ ¹è·¯å¾„/ + é™æ€èµ„æºå </p><p>åŸç†ï¼š é™æ€æ˜ å°„/**ã€‚</p><p>è¯·æ±‚è¿›æ¥ï¼Œå…ˆå»æ‰¾Controllerçœ‹èƒ½ä¸èƒ½å¤„ç†ã€‚ä¸èƒ½å¤„ç†çš„æ‰€æœ‰è¯·æ±‚åˆéƒ½äº¤ç»™é™æ€èµ„æºå¤„ç†å™¨ã€‚é™æ€èµ„æºä¹Ÿæ‰¾ä¸åˆ°åˆ™å“åº”404é¡µé¢</p><h4 id="2ã€é™æ€èµ„æºè®¿é—®å‰ç¼€"><a href="#2ã€é™æ€èµ„æºè®¿é—®å‰ç¼€" class="headerlink" title="2ã€é™æ€èµ„æºè®¿é—®å‰ç¼€"></a>2ã€é™æ€èµ„æºè®¿é—®å‰ç¼€</h4><p>æ”¹å˜é»˜è®¤çš„é™æ€èµ„æºè·¯å¾„</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">mvc:</span></span><br><span class="line">    <span class="attr">static-path-pattern:</span> <span class="string">/res/**</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">    <span class="attr">static-locations:</span> [<span class="string">classpath:/haha/</span>]</span><br></pre></td></tr></table></figure><ul><li>static-path-pattern: /res/**<ul><li>è®¿é—®é™æ€èµ„æºçš„è·¯å¾„å‰ç¼€</li></ul></li><li>static-locations<ul><li>é™æ€èµ„æºçš„è·¯å¾„</li></ul></li></ul><h4 id="3ã€webjar"><a href="#3ã€webjar" class="headerlink" title="3ã€webjar"></a>3ã€webjar</h4><p>è‡ªåŠ¨æ˜ å°„ /<a href="http://localhost:8080/webjars/jquery/3.5.1/jquery.js">webjars</a>/**</p><p><a href="https://www.webjars.org/">https://www.webjars.org/</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.webjars&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;jquery&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;3.5.1&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure><p>è®¿é—®åœ°å€ï¼š<a href="http://localhost:8080/webjars/jquery/3.5.1/jquery.js">http://localhost:8080/webjars/<strong>jquery/3.5.1/jquery.js</strong></a>  åé¢åœ°å€è¦æŒ‰ç…§ä¾èµ–é‡Œé¢çš„åŒ…è·¯å¾„</p><h3 id="2-2ã€æ¬¢è¿é¡µæ”¯æŒ"><a href="#2-2ã€æ¬¢è¿é¡µæ”¯æŒ" class="headerlink" title="2.2ã€æ¬¢è¿é¡µæ”¯æŒ"></a>2.2ã€æ¬¢è¿é¡µæ”¯æŒ</h3><ul><li><p>é™æ€èµ„æºè·¯å¾„ä¸‹  index.html</p></li><li><ul><li>å¯ä»¥é…ç½®é™æ€èµ„æºè·¯å¾„</li><li>ä½†æ˜¯ä¸å¯ä»¥é…ç½®é™æ€èµ„æºçš„è®¿é—®å‰ç¼€ã€‚å¦åˆ™å¯¼è‡´ index.htmlä¸èƒ½è¢«é»˜è®¤è®¿é—®</li></ul></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">#  mvc:</span><br><span class="line">#    static-path-pattern: &#x2F;res&#x2F;**   è¿™ä¸ªä¼šå¯¼è‡´welcome pageåŠŸèƒ½å¤±æ•ˆ</span><br><span class="line"></span><br><span class="line">  resources:</span><br><span class="line">    static-locations: [classpath:&#x2F;haha&#x2F;]</span><br></pre></td></tr></table></figure><ul><li>controllerèƒ½å¤„ç†/index</li></ul><h3 id="2-3ã€è‡ªå®šä¹‰-Favicon"><a href="#2-3ã€è‡ªå®šä¹‰-Favicon" class="headerlink" title="2.3ã€è‡ªå®šä¹‰ Favicon"></a>2.3ã€è‡ªå®šä¹‰ <code>Favicon</code></h3><p>favicon.ico æ”¾åœ¨é™æ€èµ„æºç›®å½•ä¸‹å³å¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">#  mvc:</span><br><span class="line">#    static-path-pattern: &#x2F;res&#x2F;**   è¿™ä¸ªä¼šå¯¼è‡´ Favicon åŠŸèƒ½å¤±æ•ˆ</span><br></pre></td></tr></table></figure><h2 id="3-è¯·æ±‚å‚æ•°å¤„ç†"><a href="#3-è¯·æ±‚å‚æ•°å¤„ç†" class="headerlink" title="3.è¯·æ±‚å‚æ•°å¤„ç†"></a>3.è¯·æ±‚å‚æ•°å¤„ç†</h2><h3 id="0-è¯·æ±‚æ˜ å°„"><a href="#0-è¯·æ±‚æ˜ å°„" class="headerlink" title="0.è¯·æ±‚æ˜ å°„"></a>0.è¯·æ±‚æ˜ å°„</h3><ul><li>restä½¿ç”¨ä¸åŸç†</li></ul><ul><li><p>@xxxMappingï¼›</p></li><li><p>Resté£æ ¼æ”¯æŒï¼ˆ<em>ä½¿ç”¨<strong>HTTP</strong>è¯·æ±‚æ–¹å¼åŠ¨è¯æ¥è¡¨ç¤ºå¯¹èµ„æºçš„æ“ä½œ</em>ï¼‰</p></li><li><ul><li><em>ä»¥å‰ï¼š**/getUser</em>  <em>è·å–ç”¨æˆ·</em>   <em>/deleteUser</em> <em>åˆ é™¤ç”¨æˆ·</em>   <em>/editUser</em>  <em>ä¿®æ”¹ç”¨æˆ·</em>    <em>/saveUser</em> <em>ä¿å­˜ç”¨æˆ·</em></li><li><em>ç°åœ¨ï¼š /user</em>   <em>GET-**è·å–ç”¨æˆ·</em>   <em>DELETE-**åˆ é™¤ç”¨æˆ·</em>   <em>PUT-**ä¿®æ”¹ç”¨æˆ·</em>    <em>POST-**ä¿å­˜ç”¨æˆ·</em></li><li>æ ¸å¿ƒFilterï¼›HiddenHttpMethodFilter</li></ul></li><li><ul><li><ul><li>ç”¨æ³•ï¼š è¡¨å•method=postï¼Œéšè—åŸŸ _method=put</li><li>SpringBootä¸­æ‰‹åŠ¨å¼€å¯</li></ul></li></ul></li><li><ul><li>æ‰©å±•ï¼šå¦‚ä½•æŠŠ_method è¿™ä¸ªåå­—æ¢æˆæˆ‘ä»¬è‡ªå·±å–œæ¬¢çš„ã€‚</li></ul></li></ul><p>ReståŸç†ï¼ˆè¡¨å•æäº¤è¦ä½¿ç”¨RESTçš„æ—¶å€™ï¼‰</p><ul><li><p>è¡¨å•æäº¤ä¼šå¸¦ä¸Š<strong>_method=PUT</strong></p></li><li><p><strong>è¯·æ±‚è¿‡æ¥è¢«</strong>HiddenHttpMethodFilteræ‹¦æˆª</p></li><li><ul><li>è¯·æ±‚æ˜¯å¦æ­£å¸¸ï¼Œå¹¶ä¸”æ˜¯POST</li></ul></li><li><ul><li><ul><li>è·å–åˆ°<strong>_method</strong>çš„å€¼ã€‚</li><li>å…¼å®¹ä»¥ä¸‹è¯·æ±‚ï¼›<strong>PUT</strong>.<strong>DELETE</strong>.<strong>PATCH</strong></li><li><strong>åŸç”Ÿrequestï¼ˆpostï¼‰ï¼ŒåŒ…è£…æ¨¡å¼requesWrapperé‡å†™äº†getMethodæ–¹æ³•ï¼Œè¿”å›çš„æ˜¯ä¼ å…¥çš„å€¼ã€‚</strong></li><li><strong>è¿‡æ»¤å™¨é“¾æ”¾è¡Œçš„æ—¶å€™ç”¨wrapperã€‚ä»¥åçš„æ–¹æ³•è°ƒç”¨getMethodæ˜¯è°ƒç”¨**</strong>requesWrapperçš„ã€‚**</li></ul></li></ul></li></ul><p><strong>Restä½¿ç”¨å®¢æˆ·ç«¯å·¥å…·ï¼Œ</strong></p><ul><li>å¦‚PostManç›´æ¥å‘é€Putã€deleteç­‰æ–¹å¼è¯·æ±‚ï¼Œæ— éœ€Filterã€‚</li></ul><h3 id="1-æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£"><a href="#1-æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£" class="headerlink" title="1.æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£"></a>1.æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£</h3><h4 id="1-PathVariable"><a href="#1-PathVariable" class="headerlink" title="1.@PathVariable"></a>1.@PathVariable</h4><p><code>@PathVariable</code> å¯ä»¥å°†URLä¸­å ä½ç¬¦å‚æ•°{xxx}ç»‘å®šåˆ°å¤„ç†å™¨ç±»çš„æ–¹æ³•å½¢å‚ä¸­@PathVariable(â€œxxxâ€œ) </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/car/&#123;id&#125;/&#123;username&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">Test1</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id,</span></span></span><br><span class="line"><span class="function"><span class="params">                                 <span class="meta">@PathVariable(&quot;username&quot;)</span> String name)</span> </span>&#123;</span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;id&quot;</span>, id);</span><br><span class="line">    map.put(<span class="string">&quot;name&quot;</span>, name);</span><br><span class="line">    System.out.println(<span class="string">&quot;@PathVariable&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-RequestHeader"><a href="#2-RequestHeader" class="headerlink" title="2.@RequestHeader"></a>2.@RequestHeader</h4><p><code>@RequestHeader </code>æ˜¯è·å–è¯·æ±‚å¤´ä¸­çš„æ•°æ®ï¼Œé€šè¿‡æŒ‡å®šå‚æ•° value çš„å€¼æ¥è·å–è¯·æ±‚å¤´ä¸­æŒ‡å®šçš„å‚æ•°å€¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/head&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">Test2</span><span class="params">(<span class="meta">@RequestHeader(&quot;User-Agent&quot;)</span> String s1,</span></span></span><br><span class="line"><span class="function"><span class="params">                                 <span class="meta">@RequestHeader(&quot;Accept&quot;)</span> String s2,</span></span></span><br><span class="line"><span class="function"><span class="params">                                 <span class="meta">@RequestHeader(&quot;Host&quot;)</span> String s3)</span> </span>&#123;</span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;User-Agent&quot;</span>, s1);</span><br><span class="line">    map.put(<span class="string">&quot;Accept&quot;</span>, s2);</span><br><span class="line">    map.put(<span class="string">&quot;Host&quot;</span>, s3);</span><br><span class="line">    <span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-ModelAttribute"><a href="#3-ModelAttribute" class="headerlink" title="3.@ModelAttribute"></a>3.@ModelAttribute</h4><p><code>@ModelAttribute</code>æ³¨è§£ç”¨äºå°†æ–¹æ³•çš„å‚æ•°æˆ–æ–¹æ³•çš„è¿”å›å€¼ç»‘å®šåˆ°æŒ‡å®šçš„æ¨¡å‹å±æ€§ä¸Šï¼Œå¹¶è¿”å›ç»™Webè§†å›¾ã€‚</p><h4 id="4-RequestParam"><a href="#4-RequestParam" class="headerlink" title="4.@RequestParam"></a>4.@RequestParam</h4><p><code>@RequestParam</code>ä¸»è¦ç”¨äºå°†è¯·æ±‚å‚æ•°åŒºåŸŸçš„æ•°æ®æ˜ å°„åˆ°æ§åˆ¶å±‚æ–¹æ³•çš„å‚æ•°ä¸Š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/car&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">Test3</span><span class="params">(<span class="meta">@RequestParam(&quot;id&quot;)</span> Integer id,</span></span></span><br><span class="line"><span class="function"><span class="params">                                 <span class="meta">@RequestParam(&quot;username&quot;)</span> String name)</span> </span>&#123;</span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;id&quot;</span>, id);</span><br><span class="line">    map.put(<span class="string">&quot;name&quot;</span>, name);</span><br><span class="line">    <span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-MatrixVariable"><a href="#5-MatrixVariable" class="headerlink" title="5.@MatrixVariable"></a>5.@MatrixVariable</h4><p><code>@MatrixVariable</code></p><p>çŸ©é˜µå˜é‡éœ€è¦åœ¨SpringBootä¸­æ‰‹åŠ¨å¼€å¯<br>æ ¹æ®RFC3986çš„è§„èŒƒ,çŸ©é˜µå˜é‡åº”å½“ç»‘å®šåœ¨è·¯å¾„å˜é‡ä¸­<br>è‹¥æ˜¯æœ‰å¤šä¸ªçŸ©é˜µå˜é‡,åº”å½“ä½¿ç”¨è‹±æ–‡ç¬¦å·;è¿›è¡Œåˆ†éš”ã€‚<br>è‹¥æ˜¯ä¸€ä¸ªçŸ©é˜µå˜é‡æœ‰å¤šä¸ªå€¼,åº”å½“ä½¿ç”¨è‹±æ–‡ç¬¦å·,è¿›è¡Œåˆ†éš”,æˆ–ä¹‹å‘½åå¤šä¸ªé‡å¤çš„keyå³å¯ã€‚</p><div class="note info flat"><p>å‘é€è¯·æ±‚  8080/car/5/owner/yuefeng</p></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/cars/&#123;path&#125;&quot;)</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Map <span class="title">Test4</span><span class="params">(<span class="meta">@MatrixVariable(&quot;low&quot;)</span> Integer low,</span></span></span><br><span class="line"><span class="function"><span class="params">                   <span class="meta">@MatrixVariable(&quot;brand&quot;)</span> List&lt;String&gt; brand,</span></span></span><br><span class="line"><span class="function"><span class="params">                   <span class="meta">@PathVariable(&quot;path&quot;)</span> String path)</span> </span>&#123;</span><br><span class="line">      Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">      map.put(<span class="string">&quot;low&quot;</span>, low);</span><br><span class="line">      map.put(<span class="string">&quot;brand&quot;</span>, brand);</span><br><span class="line">      map.put(<span class="string">&quot;path&quot;</span>, path);</span><br><span class="line">      <span class="keyword">return</span> map;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h4 id="6-CookieValue"><a href="#6-CookieValue" class="headerlink" title="6.@CookieValue"></a>6.@CookieValue</h4><p><code>@CookieValue</code>ç”¨æ¥è·å–Cookieä¸­çš„å€¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/car/&#123;id&#125;&quot;)</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">Test5</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id,</span></span></span><br><span class="line"><span class="function"><span class="params">                                    <span class="meta">@CookieValue(&quot;_ga&quot;)</span> String _ga,</span></span></span><br><span class="line"><span class="function"><span class="params">                                    <span class="meta">@CookieValue(&quot;_ga&quot;)</span> Cookie cookie)</span> </span>&#123;</span><br><span class="line">       Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">       map.put(<span class="string">&quot;id&quot;</span>, id);</span><br><span class="line">       map.put(<span class="string">&quot;_ga&quot;</span>, _ga);</span><br><span class="line">       map.put(<span class="string">&quot;_ga_cookie&quot;</span>, cookie);</span><br><span class="line">       String value = cookie.getValue();</span><br><span class="line">       System.out.println(value);</span><br><span class="line">       <span class="keyword">return</span> map;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h4 id="7-RequestBody"><a href="#7-RequestBody" class="headerlink" title="7.@RequestBody"></a>7.@RequestBody</h4><p><code>@RequestBody</code>ä¸»è¦ç”¨æ¥æ¥æ”¶å‰ç«¯ä¼ é€’ç»™åç«¯çš„jsonå­—ç¬¦ä¸²ä¸­çš„æ•°æ®çš„(è¯·æ±‚ä½“ä¸­çš„æ•°æ®çš„)ï¼›GETæ–¹å¼æ— è¯·æ±‚ä½“ï¼Œæ‰€ä»¥ä½¿ç”¨<code>@RequestBody</code>æ¥æ”¶æ•°æ®æ—¶ï¼Œå‰ç«¯ä¸èƒ½ä½¿ç”¨GETæ–¹å¼æäº¤æ•°æ®ï¼Œè€Œæ˜¯ç”¨POSTæ–¹å¼è¿›è¡Œæäº¤ã€‚åœ¨åç«¯çš„åŒä¸€ä¸ªæ¥æ”¶æ–¹æ³•é‡Œï¼Œ<code>@RequestBody</code>ä¸<code>@RequestParam</code>()å¯ä»¥åŒæ—¶ä½¿ç”¨ï¼Œ@<code>RequestBody</code>æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªï¼Œè€Œ<code>@RequestParam</code>()å¯ä»¥æœ‰å¤šä¸ªã€‚</p><h3 id="2-POJOå°è£…è¿‡ç¨‹"><a href="#2-POJOå°è£…è¿‡ç¨‹" class="headerlink" title="2.POJOå°è£…è¿‡ç¨‹"></a>2.POJOå°è£…è¿‡ç¨‹</h3><ul><li><strong>ServletModelAttributeMethodProcessor</strong></li></ul><hr><h2 id="4-Springbootçš„é…ç½®æ–‡ä»¶"><a href="#4-Springbootçš„é…ç½®æ–‡ä»¶" class="headerlink" title="4.Springbootçš„é…ç½®æ–‡ä»¶"></a>4.Springbootçš„é…ç½®æ–‡ä»¶</h2><p>SpringBootæ˜¯<strong>çº¦å®šå¤§äºé…ç½®</strong>çš„ï¼Œæ‰€ä»¥å¾ˆå¤šé…ç½®éƒ½æœ‰é»˜è®¤å€¼ã€‚å¦‚æœæƒ³ä¿®æ”¹é»˜è®¤é…ç½®ï¼Œå¯ä»¥ç”¨application.propertiesæˆ–application.yml(application.yaml)è‡ªå®šä¹‰é…ç½®ã€‚SpringBooté»˜è®¤ä»Resourceç›®å½•åŠ è½½è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ã€‚</p><h3 id="4-1-propertiesæ–‡ä»¶"><a href="#4-1-propertiesæ–‡ä»¶" class="headerlink" title="4.1 propertiesæ–‡ä»¶"></a>4.1 propertiesæ–‡ä»¶</h3><p>propertiesæ–‡ä»¶çš„é…ç½®å¤šä»¥<code>key.key.key:value</code>çš„å½¢å¼ç»„æˆï¼Œé‚£ä¹ˆspringbootæœ¬èº«æœ‰é»˜è®¤çš„ä¸€äº›é…ç½®ï¼Œå¦‚æœè¦ä¿®æ”¹è¿™äº›é»˜è®¤çš„é…ç½®ï¼Œå¯ä»¥åœ¨application.propertiesä¸­è¿›è¡Œé…ç½®ä¿®æ”¹ã€‚</p><p>æ¯”å¦‚ï¼šä¿®æ”¹ç«¯å£é…ç½®</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">server.port</span>=<span class="string">8081</span></span><br></pre></td></tr></table></figure><h3 id="4-2yamlæˆ–è€…ymlæ–‡ä»¶"><a href="#4-2yamlæˆ–è€…ymlæ–‡ä»¶" class="headerlink" title="4.2yamlæˆ–è€…ymlæ–‡ä»¶"></a>4.2yamlæˆ–è€…ymlæ–‡ä»¶</h3><p>â€‹    yamlæ–‡ä»¶ç­‰ä»·äºpropertiesæ–‡ä»¶ï¼Œåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­éƒ½æ˜¯ä¸€æ ·çš„æ•ˆæœã€‚ä½†æ˜¯ymlæ–‡ä»¶ä¹¦å†™çš„æ–¹å¼å’Œpropertiesæ–‡ä»¶ä¸ä¸€æ ·ã€‚æ›´åŠ ç®€æ´ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©æ€§çš„ä½¿ç”¨propertieså’Œymlæ–‡ä»¶ã€‚å¦‚æœåŒæ—¶å­˜åœ¨ä¸¤ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆä¼˜å…ˆçº§propertiesè¦é«˜äºymlã€‚</p><p>è¯­æ³•ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p><ul><li>å¤§å°å†™æ•æ„Ÿ</li><li>æ•°æ®å€¼å‰å¿…é¡»æœ‰ç©ºæ ¼ï¼Œä½œä¸ºåˆ†éš”ç¬¦</li><li>ç¼©è¿›çš„ç©ºæ ¼æ•°ç›®ä¸é‡è¦ï¼Œåªéœ€è¦å¯¹é½å³å¯</li><li><code>#</code> è¡¨ç¤ºæ³¨é‡Š</li></ul><p>ä¹¦å†™æ ¼å¼å¦‚ä¸‹è¦æ±‚å¦‚ä¸‹ï¼škeyå’Œkeyä¹‹é—´éœ€è¦æ¢è¡Œä»¥åŠç©ºæ ¼ä¸¤æ¬¡ã€‚ ç®€å•key valueä¹‹é—´éœ€è¦å†’å·åŠ ç©ºæ ¼ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">key1:</span></span><br><span class="line">  <span class="attr">key2:</span></span><br><span class="line">    <span class="attr">key3:</span> <span class="string">value</span></span><br><span class="line"><span class="attr">key4:</span> <span class="string">value4</span>    </span><br><span class="line">    </span><br></pre></td></tr></table></figure><p>æ¯”å¦‚ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šymlè¯­æ³•ä¸­ï¼Œç›¸åŒç¼©è¿›ä»£è¡¨åŒä¸€ä¸ªçº§åˆ«</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŸºæœ¬æ ¼å¼ key: value</span></span><br><span class="line"><span class="attr">name:</span> <span class="string">zhangsan</span></span><br><span class="line"><span class="comment"># æ•°ç»„   - ç”¨äºåŒºåˆ†</span></span><br><span class="line"><span class="attr">city:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">beijing</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">tianjin</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">shanghai</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">chongqing</span></span><br><span class="line"><span class="comment">#é›†åˆä¸­çš„å…ƒç´ æ˜¯å¯¹è±¡å½¢å¼</span></span><br><span class="line"><span class="attr">students:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">zhangsan</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">18</span></span><br><span class="line">    <span class="attr">score:</span> <span class="number">100</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">lisi</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">28</span></span><br><span class="line">    <span class="attr">score:</span> <span class="number">88</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">wangwu</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">38</span></span><br><span class="line">    <span class="attr">score:</span> <span class="number">90</span></span><br><span class="line"><span class="comment">#mapé›†åˆå½¢å¼</span></span><br><span class="line"><span class="attr">maps:</span> &#123;<span class="string">&quot;name&quot;</span><span class="string">:&quot;zhangsan&quot;</span>, <span class="attr">&quot;age&quot;:</span> <span class="string">&quot;15&quot;</span>&#125;</span><br><span class="line"><span class="comment">#å‚æ•°å¼•ç”¨</span></span><br><span class="line"><span class="attr">person:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">$&#123;name&#125;</span> <span class="comment"># è¯¥å€¼å¯ä»¥è·å–åˆ°ä¸Šè¾¹çš„nameå®šä¹‰çš„å€¼</span></span><br></pre></td></tr></table></figure><h3 id="4-3è·å–é…ç½®æ–‡ä»¶ä¸­å€¼"><a href="#4-3è·å–é…ç½®æ–‡ä»¶ä¸­å€¼" class="headerlink" title="4.3è·å–é…ç½®æ–‡ä»¶ä¸­å€¼"></a>4.3è·å–é…ç½®æ–‡ä»¶ä¸­å€¼</h3><p>è·å–é…ç½®æ–‡ä»¶ä¸­çš„å€¼æˆ‘ä»¬ä¸€èˆ¬æœ‰å‡ ç§æ–¹å¼ï¼š</p><ul><li>@valueæ³¨è§£çš„æ–¹å¼ åªèƒ½è·å–ç®€å•å€¼</li><li>Environmentçš„æ–¹å¼</li><li>@ConfigurationProperties</li></ul><p>æ¼”ç¤ºå¦‚ä¸‹ï¼š</p><p>ymlä¸­é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŸºæœ¬æ ¼å¼ key: value</span></span><br><span class="line"><span class="attr">name:</span> <span class="string">zhangsan</span></span><br><span class="line"><span class="comment"># æ•°ç»„   - ç”¨äºåŒºåˆ†</span></span><br><span class="line"><span class="attr">city:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">beijing</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">tianjin</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">shanghai</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">chongqing</span></span><br><span class="line"><span class="comment">#é›†åˆä¸­çš„å…ƒç´ æ˜¯å¯¹è±¡å½¢å¼</span></span><br><span class="line"><span class="attr">students:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">zhangsan</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">18</span></span><br><span class="line">    <span class="attr">score:</span> <span class="number">100</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">lisi</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">28</span></span><br><span class="line">    <span class="attr">score:</span> <span class="number">88</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">wangwu</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">38</span></span><br><span class="line">    <span class="attr">score:</span> <span class="number">90</span></span><br><span class="line"><span class="comment">#mapé›†åˆå½¢å¼</span></span><br><span class="line"><span class="attr">maps:</span> &#123;<span class="string">&quot;name&quot;</span><span class="string">:&quot;zhangsan&quot;</span>, <span class="attr">&quot;age&quot;:</span> <span class="string">&quot;15&quot;</span>&#125;</span><br><span class="line"><span class="comment">#å‚æ•°å¼•ç”¨</span></span><br><span class="line"><span class="attr">person:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">$&#123;name&#125;</span> <span class="comment"># è¯¥å€¼å¯ä»¥è·å–åˆ°ä¸Šè¾¹çš„nameå®šä¹‰çš„å€¼</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">12</span></span><br></pre></td></tr></table></figure><p>javaä»£ç ï¼š</p><p>controller</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test2Controller</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;city[0]&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String city0;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;students[0].name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String studentname;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;person.name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String personName;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;maps.name&#125;&quot;)</span><span class="comment">//valueæ³¨è§£åªèƒ½è·ç®€å•çš„å€¼å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> String name1;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Student student;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/show&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">showHello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(name);</span><br><span class="line">        System.out.println(city0);</span><br><span class="line">        System.out.println(studentname);</span><br><span class="line">        System.out.println(personName);</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;&gt;&gt;&gt;&gt;&quot;</span>+student.getAge());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>pojo:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;person&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(Integer age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-4-profile"><a href="#4-4-profile" class="headerlink" title="4.4 profile"></a>4.4 profile</h3><p>åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦é…ç½®ä¸åŒçš„ç¯å¢ƒï¼Œæ‰€ä»¥å³ä½¿æˆ‘ä»¬åœ¨application.ymlä¸­é…ç½®äº†ç›¸å…³çš„é…ç½®é¡¹ï¼Œå½“æ—¶åœ¨æµ‹è¯•æ˜¯ï¼Œéœ€è¦ä¿®æ”¹æ•°æ®æºç­‰ç«¯å£è·¯å¾„çš„é…ç½®ï¼Œæµ‹è¯•å®Œæˆä¹‹åï¼Œåˆä¸Šç”Ÿäº§ç¯å¢ƒï¼Œè¿™æ—¶é…ç½®åˆéœ€è¦ä¿®æ”¹ï¼Œä¿®æ”¹èµ·æ¥å¾ˆéº»çƒ¦ã€‚</p><ul><li><p>propertiesé…ç½®æ–¹å¼</p><p><img src="../../../img/md_img/SpringBoot02/1582711701050.png" alt="1582711701050"></p></li></ul><p>application.properties:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é€šè¿‡activeæŒ‡å®šé€‰ç”¨é…ç½®ç¯å¢ƒ</span></span><br><span class="line"><span class="meta">spring.profiles.active</span>=<span class="string">test</span></span><br></pre></td></tr></table></figure><p>application-dev.properties:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å¼€å‘ç¯å¢ƒ</span></span><br><span class="line"><span class="meta">server.port</span>=<span class="string">8081</span></span><br></pre></td></tr></table></figure><p>application-test.properties</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">server.port</span>=<span class="string">8082</span></span><br></pre></td></tr></table></figure><p>application-pro.properties</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">server.port</span>=<span class="string">8083</span></span><br></pre></td></tr></table></figure><ul><li>ymlé…ç½®æ–¹å¼</li></ul><p><img src="../../../img/md_img/SpringBoot02/1582718508134.png" alt="1582718508134"></p><p>application.yml:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é€šè¿‡activeæŒ‡å®šé€‰ç”¨é…ç½®ç¯å¢ƒ</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">pro</span></span><br></pre></td></tr></table></figure><p>application-dev.yml:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å¼€å‘ç¯å¢ƒ</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br></pre></td></tr></table></figure><p>application-test.yml:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æµ‹è¯•ç¯å¢ƒ</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8082</span></span><br></pre></td></tr></table></figure><p>applicatioin-pro.yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç”Ÿäº§ç¯å¢ƒ</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8083</span></span><br></pre></td></tr></table></figure><p> è¿˜æœ‰ä¸€ç§æ˜¯åˆ†éš”ç¬¦çš„æ–¹å¼ï¼ˆäº†è§£ï¼‰</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment">#å¼€å‘ç¯å¢ƒ</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">dev</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment">#æµ‹è¯•ç¯å¢ƒ</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8082</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">test</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment">#ç”Ÿäº§ç¯å¢ƒ</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8083</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">pro</span></span><br></pre></td></tr></table></figure><ul><li>æ¿€æ´»profileçš„æ–¹å¼ï¼ˆäº†è§£ï¼‰<ul><li>é…ç½®æ–‡ä»¶çš„æ–¹å¼ï¼ˆä¸Šè¾¹å·²ç»è¯´è¿‡ï¼‰</li><li>è¿è¡Œæ˜¯æŒ‡å®šå‚æ•° <code>java -jar xxx.jar --spring.profiles.active=test</code></li><li>jvmè™šæ‹Ÿæœºå‚æ•°é…ç½® -Dspring.profiles.active=dev</li></ul></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> SPringboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot2-åŸºç¡€å…¥é—¨</title>
      <link href="2021/04/SpringBoot01/"/>
      <url>2021/04/SpringBoot01/</url>
      
        <content type="html"><![CDATA[<hr><div class="note green icon modern"><i class="note-icon fa fa-rocket"></i><p>ğŸš€ <a href="../../../2021/04/SpringBoot01">åŸºç¡€å…¥é—¨</a> - ğŸ“š <a href="../../../2021/05/SpringBoot02">æ ¸å¿ƒåŠŸèƒ½</a> - ğŸ›  ä¸»é¢˜é…ç½®</p></div><hr><h1 id="1-Springboot2å…¥é—¨"><a href="#1-Springboot2å…¥é—¨" class="headerlink" title="1.Springboot2å…¥é—¨"></a>1.Springboot2å…¥é—¨</h1><h2 id="1-hello-Boot"><a href="#1-hello-Boot" class="headerlink" title="1.hello Boot"></a>1.hello Boot</h2><p>éœ€æ±‚ï¼šæµè§ˆå‘é€/helloè¯·æ±‚ï¼Œå“åº” Helloï¼ŒSpring Boot 2 </p><ol><li>åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®</li><li>å¼•å…¥ä¾èµ–</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>ç¼–å†™å¯åŠ¨ç±»</li></ol> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainApplication</span> </span>&#123;</span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">          SpringApplication.run(MainApplication.class, args);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>4.åœ¨æµè§ˆå™¨è®¿é—®</p><p><img src="../../../img/md_img/SpringBoot/image-20210502153948711.png" alt="image-20210502153948711"></p><h2 id="2-ç®€åŒ–éƒ¨ç½²"><a href="#2-ç®€åŒ–éƒ¨ç½²" class="headerlink" title="2.ç®€åŒ–éƒ¨ç½²"></a>2.ç®€åŒ–éƒ¨ç½²</h2><ol><li>å¯¼å…¥é…ç½®</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2.clean å’Œ package</p><p><img src="../../../img/md_img/SpringBoot/image-20210502154218666.png" alt="image-20210502154218666"></p><p>3.æœ¬åœ°æŸ¥çœ‹jaråŒ…</p><p><img src="../../../img/md_img/SpringBoot/image-20210502154318316.png" alt="image-20210502154318316"></p><h2 id="3-è‡ªåŠ¨é…ç½®"><a href="#3-è‡ªåŠ¨é…ç½®" class="headerlink" title="3.è‡ªåŠ¨é…ç½®"></a>3.è‡ªåŠ¨é…ç½®</h2><ul><li><p>è‡ªåŠ¨é…å¥½SpringMVC</p></li><li><ul><li>å¼•å…¥SpringMVCå…¨å¥—ç»„ä»¶</li><li>è‡ªåŠ¨é…å¥½SpringMVCå¸¸ç”¨ç»„ä»¶ï¼ˆåŠŸèƒ½ï¼‰</li></ul></li><li><p>è‡ªåŠ¨é…å¥½Webå¸¸è§åŠŸèƒ½ï¼Œå¦‚ï¼šå­—ç¬¦ç¼–ç é—®é¢˜</p></li><li><ul><li>SpringBootå¸®æˆ‘ä»¬é…ç½®å¥½äº†æ‰€æœ‰webå¼€å‘çš„å¸¸è§åœºæ™¯</li></ul></li></ul><ul><li><p>é»˜è®¤çš„æ‰«æåŒ…ç»“æ„</p><ul><li>å’Œå¯åŠ¨ç±»æ‰€åœ¨åŒ…åŠå…¶ä¸‹é¢çš„æ‰€æœ‰å­åŒ…é‡Œé¢çš„ç»„ä»¶éƒ½ä¼šè¢«é»˜è®¤æ‰«æè¿›æ¥</li></ul></li><li><p>æƒ³è¦æ”¹å˜æ‰«æè·¯</p><ul><li>@SpringBootApplication(scanBasePackages=<strong>â€œcom.yuefengâ€</strong>)</li><li>æˆ–è€…@ComponentScan æŒ‡å®šæ‰«æè·¯å¾„ </li></ul></li></ul><blockquote><p>@SpringBootApplication     <strong>ç­‰äº</strong></p><blockquote><p>@SpringBootConfiguration<br>@EnableAutoConfiguration<br>@ComponentScan(â€œcom.atguigu.bootâ€)</p></blockquote></blockquote><h1 id="2-å®¹å™¨åŠŸèƒ½"><a href="#2-å®¹å™¨åŠŸèƒ½" class="headerlink" title="2.å®¹å™¨åŠŸèƒ½"></a>2.å®¹å™¨åŠŸèƒ½</h1><h2 id="2-1ç»„ä»¶æ·»åŠ "><a href="#2-1ç»„ä»¶æ·»åŠ " class="headerlink" title="2.1ç»„ä»¶æ·»åŠ "></a>2.1ç»„ä»¶æ·»åŠ </h2><h3 id="1-Configuration"><a href="#1-Configuration" class="headerlink" title="1.@Configuration"></a>1.@Configuration</h3><div class="note blue flat"><p>1ã€é…ç½®ç±»é‡Œé¢ä½¿ç”¨@Beanæ ‡æ³¨åœ¨æ–¹æ³•ä¸Šç»™å®¹å™¨æ³¨å†Œç»„ä»¶ï¼Œé»˜è®¤ä¹Ÿæ˜¯å•å®ä¾‹çš„</p><p>2ã€é…ç½®ç±»æœ¬èº«ä¹Ÿæ˜¯ç»„ä»¶</p><p>3ã€proxyBeanMethodsï¼šä»£ç†beançš„æ–¹æ³•</p></div><h3 id="2-åŸºæœ¬æ³¨é‡Š"><a href="#2-åŸºæœ¬æ³¨é‡Š" class="headerlink" title="2.åŸºæœ¬æ³¨é‡Š"></a>2.åŸºæœ¬æ³¨é‡Š</h3><h3 id="Beanã€-Componentã€-Controllerã€-Serviceã€-Repository"><a href="#Beanã€-Componentã€-Controllerã€-Serviceã€-Repository" class="headerlink" title="@Beanã€@Componentã€@Controllerã€@Serviceã€@Repository"></a>@Beanã€@Componentã€@Controllerã€@Serviceã€@Repository</h3><h3 id="3-ComponentScanã€-Import"><a href="#3-ComponentScanã€-Import" class="headerlink" title="3.@ComponentScanã€@Import"></a>3.@ComponentScanã€@Import</h3><h3 id="4-Conditional"><a href="#4-Conditional" class="headerlink" title="4.@Conditional"></a>4.@Conditional</h3><p><img src="../../../img/md_img/SpringBoot01/image-20210502202622181.png" alt="image-20210502202622181"></p><h2 id="2-2ã€åŸç”Ÿé…ç½®æ–‡ä»¶å¼•å…¥"><a href="#2-2ã€åŸç”Ÿé…ç½®æ–‡ä»¶å¼•å…¥" class="headerlink" title="2.2ã€åŸç”Ÿé…ç½®æ–‡ä»¶å¼•å…¥"></a>2.2ã€åŸç”Ÿé…ç½®æ–‡ä»¶å¼•å…¥</h2><h3 id="1ã€-ImportResource"><a href="#1ã€-ImportResource" class="headerlink" title="1ã€@ImportResource"></a>1ã€@ImportResource</h3><p>@ImportResourceæ³¨è§£ç”¨äºå¯¼å…¥Springçš„é…ç½®æ–‡ä»¶ï¼Œè®©é…ç½®æ–‡ä»¶é‡Œé¢çš„å†…å®¹ç”Ÿæ•ˆï¼›(å°±æ˜¯ä»¥å‰å†™çš„springmvc.xmlã€applicationContext.xml)<br>Spring Booté‡Œé¢æ²¡æœ‰Springçš„é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬è‡ªå·±ç¼–å†™çš„é…ç½®æ–‡ä»¶ï¼Œä¹Ÿä¸èƒ½è‡ªåŠ¨è¯†åˆ«ï¼›<br>æƒ³è®©Springçš„é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼ŒåŠ è½½è¿›æ¥ï¼›@ImportResourceæ ‡æ³¨åœ¨ä¸€ä¸ªé…ç½®ç±»ä¸Šã€‚</p><div class="note warning flat"><p>æ³¨æ„ï¼è¿™ä¸ªæ³¨è§£æ˜¯æ”¾åœ¨ä¸»å…¥å£å‡½æ•°çš„ç±»ä¸Šï¼Œæˆ–è€…é…ç½®ç±»ä¸Š</p></div><h2 id="2-3é…ç½®ç»‘å®š"><a href="#2-3é…ç½®ç»‘å®š" class="headerlink" title="2.3é…ç½®ç»‘å®š"></a>2.3é…ç½®ç»‘å®š</h2><p>å¦‚ä½•ä½¿ç”¨Javaè¯»å–åˆ°propertiesæ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œå¹¶ä¸”æŠŠå®ƒå°è£…åˆ°JavaBeanä¸­ï¼Œä»¥ä¾›éšæ—¶ä½¿ç”¨ï¼›</p><h3 id="1-ConfigurationProperties"><a href="#1-ConfigurationProperties" class="headerlink" title="1.@ConfigurationProperties"></a>1.@ConfigurationProperties</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;mycar&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¼€å¯Caré…ç½®ç»‘å®šåŠŸèƒ½</li><li>éœ€è¦@Componentå°†Caræ”¾å…¥å®¹å™¨</li></ul><h3 id="2ã€-EnableConfigurationProperties-ConfigurationProperties"><a href="#2ã€-EnableConfigurationProperties-ConfigurationProperties" class="headerlink" title="2ã€@EnableConfigurationProperties + @ConfigurationProperties"></a>2ã€@EnableConfigurationProperties + @ConfigurationProperties</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@EnableConfigurationProperties(Car. class)</span></span><br><span class="line"><span class="comment">//1ã€å¼€å¯Caré…ç½®ç»‘å®šåŠŸèƒ½</span></span><br><span class="line"><span class="comment">//2ã€æŠŠè¿™ä¸ªCarè¿™ä¸ªç»„ä»¶è‡ªåŠ¨æ³¨å†Œåˆ°å®¹å™¨ä¸­</span></span><br><span class="line"> <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>&#123;</span><br><span class="line"> ...</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;mycar&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¼€å¯Caré…ç½®ç»‘å®šåŠŸèƒ½</li><li>æŠŠè¿™ä¸ªCarè¿™ä¸ªç»„ä»¶è‡ªåŠ¨æ³¨å†Œåˆ°å®¹å™¨ä¸­</li></ul><h1 id="3-è‡ªåŠ¨é…ç½®åŸç†å…¥é—¨"><a href="#3-è‡ªåŠ¨é…ç½®åŸç†å…¥é—¨" class="headerlink" title="3.è‡ªåŠ¨é…ç½®åŸç†å…¥é—¨"></a>3.è‡ªåŠ¨é…ç½®åŸç†å…¥é—¨</h1><h2 id="3-1å¼•å¯¼åŠ è½½è‡ªåŠ¨é…ç½®ç±»"><a href="#3-1å¼•å¯¼åŠ è½½è‡ªåŠ¨é…ç½®ç±»" class="headerlink" title="3.1å¼•å¯¼åŠ è½½è‡ªåŠ¨é…ç½®ç±»"></a>3.1å¼•å¯¼åŠ è½½è‡ªåŠ¨é…ç½®ç±»</h2><blockquote><p>@SpringBootApplication ç›¸å½“äº</p><blockquote><p>@SpringBootConfiguration<br>@EnableAutoConfiguration<br>@ComponentScan</p></blockquote></blockquote><h3 id="1ã€-SpringBootConfiguration"><a href="#1ã€-SpringBootConfiguration" class="headerlink" title="1ã€@SpringBootConfiguration"></a>1ã€@SpringBootConfiguration</h3><p>@Configurationã€‚ä»£è¡¨å½“å‰æ˜¯ä¸€ä¸ªé…ç½®ç±»</p><h3 id="2ã€-ComponentScan"><a href="#2ã€-ComponentScan" class="headerlink" title="2ã€@ComponentScan"></a>2ã€@ComponentScan</h3><p>æŒ‡å®šæ‰«æå“ªäº›ï¼ŒSpringæ³¨è§£ï¼›</p><h3 id="3ã€-EnableAutoConfiguration"><a href="#3ã€-EnableAutoConfiguration" class="headerlink" title="3ã€@EnableAutoConfiguration"></a><strong>3ã€@EnableAutoConfiguration</strong></h3><blockquote><p>@EnableAutoConfiguration</p><blockquote><p>@AutoConfigurationPackage<br>@Import(AutoConfigurationImportSelector.class)</p></blockquote></blockquote><h4 id="1-AutoConfigurationPackage"><a href="#1-AutoConfigurationPackage" class="headerlink" title="1.AutoConfigurationPackage"></a>1.AutoConfigurationPackage</h4><p>è‡ªåŠ¨é…ç½®åŒ…</p><blockquote><p>AutoConfigurationPackage </p><blockquote><p>@Import(AutoConfigurationPackages.Registrar.class)  }</p></blockquote></blockquote><p>åˆ©ç”¨Registrarç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€ç³»åˆ—ç»„ä»¶<br>  å°†æŒ‡å®šçš„ä¸€ä¸ªåŒ…ä¸‹çš„æ‰€æœ‰ç»„ä»¶å¯¼å…¥è¿›æ¥ï¼ŸMainApplication æ‰€åœ¨åŒ…ä¸‹ã€‚</p><p><img src="../../../img/md_img/SpringBoot01/image-20210503192410961.png" alt="image-20210503192410961"></p><p><img src="../../../img/md_img/SpringBoot01/image-20210503192435671.png" alt="image-20210503192435671"></p><p>è·å–äº†  <strong>com.yuefeng</strong> çš„åŒ…å</p><h4 id="2-Import-AutoConfigurationImportSelector-class"><a href="#2-Import-AutoConfigurationImportSelector-class" class="headerlink" title="2.@Import(AutoConfigurationImportSelector.class)"></a>2.@Import(AutoConfigurationImportSelector.class)</h4><p><img src="../../../img/md_img/SpringBoot01/image-20210503193416017.png" alt="image-20210503193416017"></p><ol><li><p>åˆ©ç”¨getAutoConfigurationEntry(annotationMetadata);ç»™å®¹å™¨ä¸­æ‰¹é‡å¯¼å…¥ä¸€äº›ç»„ä»¶</p></li><li><p>è°ƒç”¨List<String> configurations = getCandidateConfigurations(annotationMetadata, attributes)è·å–åˆ°æ‰€æœ‰éœ€è¦å¯¼å…¥åˆ°å®¹å™¨ä¸­çš„é…ç½®ç±»</p></li><li><p>åˆ©ç”¨å·¥å‚åŠ è½½ Map&lt;String, List<String>&gt; loadSpringFactories(@Nullable ClassLoader classLoader)ï¼›å¾—åˆ°æ‰€æœ‰çš„ç»„ä»¶</p></li><li><p>ä»META-INF/spring.factoriesä½ç½®æ¥åŠ è½½ä¸€ä¸ªæ–‡ä»¶ã€‚</p><p>â€‹    é»˜è®¤æ‰«ææˆ‘ä»¬å½“å‰ç³»ç»Ÿé‡Œé¢æ‰€æœ‰META-INF/spring.factoriesä½ç½®çš„æ–‡ä»¶<br>â€‹    spring-boot-autoconfigure-2.3.4.RELEASE.jaråŒ…é‡Œé¢ä¹Ÿæœ‰<strong>META-INF/spring.factories</strong></p></li></ol><h2 id="3-2æŒ‰éœ€å¼€å¯è‡ªåŠ¨é…ç½®é¡¹"><a href="#3-2æŒ‰éœ€å¼€å¯è‡ªåŠ¨é…ç½®é¡¹" class="headerlink" title="3.2æŒ‰éœ€å¼€å¯è‡ªåŠ¨é…ç½®é¡¹"></a>3.2æŒ‰éœ€å¼€å¯è‡ªåŠ¨é…ç½®é¡¹</h2><div class="note info flat"><p>1.æ‰€æœ‰è‡ªåŠ¨é…ç½®å¯åŠ¨çš„æ—¶å€™é»˜è®¤å…¨éƒ¨åŠ è½½.</p><p>2.æŒ‰ç…§æ¡ä»¶è£…é…è§„åˆ™ï¼ˆ@Conditionalï¼‰ï¼Œæœ€ç»ˆä¼šæŒ‰éœ€é…ç½®ã€‚</p></div><h2 id="3-3ä¿®æ”¹é»˜è®¤é…ç½®"><a href="#3-3ä¿®æ”¹é»˜è®¤é…ç½®" class="headerlink" title="3.3ä¿®æ”¹é»˜è®¤é…ç½®"></a>3.3ä¿®æ”¹é»˜è®¤é…ç½®</h2><ul><li>SpringBooté»˜è®¤ä¼šåœ¨åº•å±‚é…å¥½æ‰€æœ‰çš„ç»„ä»¶ã€‚ä½†æ˜¯å¦‚æœç”¨æˆ·è‡ªå·±é…ç½®äº†ä»¥ç”¨æˆ·çš„ä¼˜å…ˆ</li></ul><h4 id="1-ConditionalOnMissingBean"><a href="#1-ConditionalOnMissingBean" class="headerlink" title="1.@ConditionalOnMissingBean"></a>1.@ConditionalOnMissingBean</h4><p>å®ƒæ˜¯ä¿®é¥°beançš„ä¸€ä¸ªæ³¨è§£ï¼Œä¸»è¦å®ç°çš„æ˜¯ï¼Œå½“ä½ çš„beanè¢«æ³¨å†Œä¹‹åï¼Œå¦‚æœè€Œæ³¨å†Œç›¸åŒç±»å‹çš„beanï¼Œå°±ä¸ä¼šæˆåŠŸï¼Œå®ƒä¼šä¿è¯ä½ çš„beanåªæœ‰ä¸€ä¸ªï¼Œå³ä½ çš„å®ä¾‹åªæœ‰ä¸€ä¸ªï¼Œå½“ä½ æ³¨å†Œå¤šä¸ªç›¸åŒçš„beanæ—¶ï¼Œä¼šå‡ºç°å¼‚å¸¸ï¼Œä»¥æ­¤æ¥å‘Šè¯‰å¼€å‘äººå‘˜ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnBean(MultipartResolver.class)</span>  <span class="comment">//å®¹å™¨ä¸­æœ‰è¿™ä¸ªç±»å‹ç»„ä»¶</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(name = DispatcherServlet.MULTIPART_RESOLVER_BEAN_NAME)</span> </span><br><span class="line"><span class="comment">//å®¹å™¨ä¸­æ²¡æœ‰è¿™ä¸ªåå­— multipartResolver çš„ç»„ä»¶</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> MultipartResolver <span class="title">multipartResolver</span><span class="params">(MultipartResolver resolver)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ç»™@Beanæ ‡æ³¨çš„æ–¹æ³•ä¼ å…¥äº†å¯¹è±¡å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°çš„å€¼å°±ä¼šä»å®¹å™¨ä¸­æ‰¾ã€‚</span></span><br><span class="line">    <span class="comment">//SpringMVC multipartResolverã€‚é˜²æ­¢æœ‰äº›ç”¨æˆ·é…ç½®çš„æ–‡ä»¶ä¸Šä¼ è§£æå™¨ä¸ç¬¦åˆè§„èŒƒ</span></span><br><span class="line">    <span class="comment">// Detect if the user has created a MultipartResolver but named it incorrectly</span></span><br><span class="line">    <span class="keyword">return</span> resolver;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li><p>SpringBootå…ˆåŠ è½½æ‰€æœ‰çš„è‡ªåŠ¨é…ç½®ç±»  xxxxxAutoConfiguration</p></li><li><p>æ¯ä¸ªè‡ªåŠ¨é…ç½®ç±»æŒ‰ç…§æ¡ä»¶è¿›è¡Œç”Ÿæ•ˆï¼Œé»˜è®¤éƒ½ä¼šç»‘å®šé…ç½®æ–‡ä»¶æŒ‡å®šçš„å€¼ã€‚xxxxPropertiesé‡Œé¢æ‹¿ã€‚xxxPropertieså’Œé…ç½®æ–‡ä»¶è¿›è¡Œäº†ç»‘å®š</p></li><li><p>ç”Ÿæ•ˆçš„é…ç½®ç±»å°±ä¼šç»™å®¹å™¨ä¸­è£…é…å¾ˆå¤šç»„ä»¶</p></li><li><p>åªè¦å®¹å™¨ä¸­æœ‰è¿™äº›ç»„ä»¶ï¼Œç›¸å½“äºè¿™äº›åŠŸèƒ½å°±æœ‰äº†</p></li><li><p>å®šåˆ¶åŒ–é…ç½®</p></li><li><ul><li>ç”¨æˆ·ç›´æ¥è‡ªå·±@Beanæ›¿æ¢åº•å±‚çš„ç»„ä»¶</li><li>ç”¨æˆ·å»çœ‹è¿™ä¸ªç»„ä»¶æ˜¯è·å–çš„é…ç½®æ–‡ä»¶ä»€ä¹ˆå€¼å°±å»ä¿®æ”¹ã€‚</li></ul></li></ul><p><strong>xxxxxAutoConfiguration â€”&gt; ç»„ä»¶  â€”&gt;</strong> <strong>xxxxPropertiesé‡Œé¢æ‹¿å€¼  â€”-&gt; application.properties</strong></p>]]></content>
      
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> SPringboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>itext-PDFæŠ¥è¡¨</title>
      <link href="2021/03/itext-PDF%E6%8A%A5%E8%A1%A8/"/>
      <url>2021/03/itext-PDF%E6%8A%A5%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[itext-PDFæŠ¥è¡¨<hr>]]></content>
      
      
      <categories>
          
          <category> ç¬¬ä¸€å±‚ </category>
          
          <category> ç¬¬ä¸€å±‚ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tag1 </tag>
            
            <tag> tag2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å·¥å…·ç±»</title>
      <link href="2021/03/%E5%B7%A5%E5%85%B7%E7%B1%BB/"/>
      <url>2021/03/%E5%B7%A5%E5%85%B7%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<hr><h1 id="åˆ†é¡µå·¥å…·ç±»"><a href="#åˆ†é¡µå·¥å…·ç±»" class="headerlink" title="åˆ†é¡µå·¥å…·ç±»"></a>åˆ†é¡µå·¥å…·ç±»</h1><h2 id="åˆ†é¡µç»“æœå°è£…å¯¹è±¡-PageResult"><a href="#åˆ†é¡µç»“æœå°è£…å¯¹è±¡-PageResult" class="headerlink" title="åˆ†é¡µç»“æœå°è£…å¯¹è±¡(PageResult)"></a>åˆ†é¡µç»“æœå°è£…å¯¹è±¡(PageResult)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ†é¡µç»“æœå°è£…å¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PageResult</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long total;<span class="comment">//æ€»è®°å½•æ•°</span></span><br><span class="line">    <span class="keyword">private</span> List rows;<span class="comment">//å½“å‰é¡µç»“æœ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PageResult</span><span class="params">(Long total, List&lt;T&gt; rows)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.total = total;</span><br><span class="line">        <span class="keyword">this</span>.rows = rows;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">getTotal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> total;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTotal</span><span class="params">(Long total)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.total = total;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;T&gt; <span class="title">getRows</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> rows;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRows</span><span class="params">(List&lt;T&gt; rows)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.rows = rows;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å°è£…æŸ¥è¯¢æ¡ä»¶-QueryPageBean"><a href="#å°è£…æŸ¥è¯¢æ¡ä»¶-QueryPageBean" class="headerlink" title="å°è£…æŸ¥è¯¢æ¡ä»¶(QueryPageBean)"></a>å°è£…æŸ¥è¯¢æ¡ä»¶(QueryPageBean)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å°è£…æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QueryPageBean</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer currentPage;<span class="comment">//é¡µç </span></span><br><span class="line">    <span class="keyword">private</span> Integer pageSize;<span class="comment">//æ¯é¡µè®°å½•æ•°</span></span><br><span class="line">    <span class="keyword">private</span> String queryString;<span class="comment">//æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getCurrentPage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> currentPage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCurrentPage</span><span class="params">(Integer currentPage)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.currentPage = currentPage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getPageSize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pageSize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPageSize</span><span class="params">(Integer pageSize)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.pageSize = pageSize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getQueryString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> queryString;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setQueryString</span><span class="params">(String queryString)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.queryString = queryString;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="äº‘å‚¨å­˜ä¸Šæ¬¡"><a href="#äº‘å‚¨å­˜ä¸Šæ¬¡" class="headerlink" title="äº‘å‚¨å­˜ä¸Šæ¬¡"></a>äº‘å‚¨å­˜ä¸Šæ¬¡</h1><h2 id="ä¸ƒç‰›äº‘ä¸Šä¼ "><a href="#ä¸ƒç‰›äº‘ä¸Šä¼ " class="headerlink" title="ä¸ƒç‰›äº‘ä¸Šä¼ "></a>ä¸ƒç‰›äº‘ä¸Šä¼ </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"><span class="keyword">import</span> com.itheima.health.constant.MessageConstant;</span><br><span class="line"><span class="keyword">import</span> com.qiniu.common.QiniuException;</span><br><span class="line"><span class="keyword">import</span> com.qiniu.common.Zone;</span><br><span class="line"><span class="keyword">import</span> com.qiniu.http.Response;</span><br><span class="line"><span class="keyword">import</span> com.qiniu.storage.BucketManager;</span><br><span class="line"><span class="keyword">import</span> com.qiniu.storage.Configuration;</span><br><span class="line"><span class="keyword">import</span> com.qiniu.storage.UploadManager;</span><br><span class="line"><span class="keyword">import</span> com.qiniu.storage.model.BatchStatus;</span><br><span class="line"><span class="keyword">import</span> com.qiniu.storage.model.DefaultPutRet;</span><br><span class="line"><span class="keyword">import</span> com.qiniu.util.Auth;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QiNiuUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String ACCESSKEY = <span class="string">&quot;&quot;</span>;<span class="comment">//ak</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String SECRETKEY = <span class="string">&quot;&quot;</span>;<span class="comment">//sk</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String BUCKET = <span class="string">&quot;&quot;</span>;<span class="comment">//ç©ºé—´åç§°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DOMAIN= <span class="string">&quot;http://qp******.clouddn.com/&quot;</span>;<span class="comment">//åŸŸå</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        uploadFile(<span class="string">&quot;C:\\Users\\Eric\\Desktop\\file\\timg.jpg&quot;</span>,<span class="string">&quot;dd2.jpg&quot;</span>);</span><br><span class="line">        <span class="comment">//removeFiles(&quot;20190529083159.jpg&quot;,&quot;20190529083241.jpg&quot;);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰¹é‡åˆ é™¤</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> filenames éœ€è¦åˆ é™¤çš„æ–‡ä»¶ååˆ—è¡¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> åˆ é™¤æˆåŠŸçš„æ–‡ä»¶ååˆ—è¡¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title">removeFiles</span><span class="params">(String... filenames)</span></span>&#123;</span><br><span class="line">        <span class="comment">// åˆ é™¤æˆåŠŸçš„æ–‡ä»¶ååˆ—è¡¨</span></span><br><span class="line">        List&lt;String&gt; removeSuccessList = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">        <span class="keyword">if</span>(filenames.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">// åˆ›å»ºä»“åº“ç®¡ç†å™¨</span></span><br><span class="line">            BucketManager bucketManager = getBucketManager();</span><br><span class="line">            <span class="comment">// åˆ›å»ºæ‰¹å¤„ç†å™¨</span></span><br><span class="line">            BucketManager.Batch batch = <span class="keyword">new</span> BucketManager.Batch();</span><br><span class="line">            <span class="comment">// æ‰¹é‡åˆ é™¤å¤šä¸ªæ–‡ä»¶</span></span><br><span class="line">            batch.delete(BUCKET,filenames);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">// è·å–æœåŠ¡å™¨çš„å“åº”</span></span><br><span class="line">                Response res = bucketManager.batch(batch);</span><br><span class="line">                <span class="comment">// è·å¾—æ‰¹å¤„ç†çš„çŠ¶æ€</span></span><br><span class="line">                BatchStatus[] batchStatuses = res.jsonToObject(BatchStatus[].class);</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; filenames.length; i++) &#123;</span><br><span class="line">                    BatchStatus status = batchStatuses[i];</span><br><span class="line">                    String key = filenames[i];</span><br><span class="line">                    System.out.print(key + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">                    <span class="keyword">if</span> (status.code == <span class="number">200</span>) &#123;</span><br><span class="line">                        removeSuccessList.add(key);</span><br><span class="line">                        System.out.println(<span class="string">&quot;delete success&quot;</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;delete failure&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (QiniuException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(MessageConstant.PIC_UPLOAD_FAIL);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> removeSuccessList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">uploadFile</span><span class="params">(String localFilePath, String savedFilename)</span></span>&#123;</span><br><span class="line">        UploadManager uploadManager = getUploadManager();</span><br><span class="line">        String upToken = getToken();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Response response = uploadManager.put(localFilePath, savedFilename, upToken);</span><br><span class="line">            <span class="comment">//è§£æä¸Šä¼ æˆåŠŸçš„ç»“æœ</span></span><br><span class="line">            DefaultPutRet putRet = <span class="keyword">new</span> Gson().fromJson(response.bodyString(), DefaultPutRet.class);</span><br><span class="line">            System.out.println(String.format(<span class="string">&quot;key=%s, hash=%s&quot;</span>,putRet.key, putRet.hash));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (QiniuException ex) &#123;</span><br><span class="line">            Response r = ex.response;</span><br><span class="line">            System.err.println(r.toString());</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.err.println(r.bodyString());</span><br><span class="line">            &#125; <span class="keyword">catch</span> (QiniuException ex2) &#123;</span><br><span class="line">                <span class="comment">//ignore</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(MessageConstant.PIC_UPLOAD_FAIL);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">uploadViaByte</span><span class="params">(<span class="keyword">byte</span>[] bytes, String savedFilename)</span></span>&#123;</span><br><span class="line">        UploadManager uploadManager = getUploadManager();</span><br><span class="line">        String upToken = getToken();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Response response = uploadManager.put(bytes, savedFilename, upToken);</span><br><span class="line">            <span class="comment">//è§£æä¸Šä¼ æˆåŠŸçš„ç»“æœ</span></span><br><span class="line">            DefaultPutRet putRet = <span class="keyword">new</span> Gson().fromJson(response.bodyString(), DefaultPutRet.class);</span><br><span class="line">            System.out.println(putRet.key);</span><br><span class="line">            System.out.println(putRet.hash);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (QiniuException ex) &#123;</span><br><span class="line">            Response r = ex.response;</span><br><span class="line">            System.err.println(r.toString());</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.err.println(r.bodyString());</span><br><span class="line">            &#125; <span class="keyword">catch</span> (QiniuException ex2) &#123;</span><br><span class="line">                <span class="comment">//ignore</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(MessageConstant.PIC_UPLOAD_FAIL);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">getToken</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºæˆæƒ</span></span><br><span class="line">        Auth auth = Auth.create(ACCESSKEY, SECRETKEY);</span><br><span class="line">        <span class="comment">// è·å¾—è®¤è¯åçš„ä»¤ç‰Œ</span></span><br><span class="line">        String upToken = auth.uploadToken(BUCKET);</span><br><span class="line">        <span class="keyword">return</span> upToken;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> UploadManager <span class="title">getUploadManager</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//æ„é€ ä¸€ä¸ªå¸¦æŒ‡å®šZoneå¯¹è±¡çš„é…ç½®ç±»</span></span><br><span class="line">        Configuration cfg = <span class="keyword">new</span> Configuration(Zone.zone2());</span><br><span class="line">        <span class="comment">//æ„å»ºä¸Šä¼ ç®¡ç†å™¨</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> UploadManager(cfg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> BucketManager <span class="title">getBucketManager</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºæˆæƒä¿¡æ¯</span></span><br><span class="line">        Auth auth = Auth.create(ACCESSKEY, SECRETKEY);</span><br><span class="line">        <span class="comment">// åˆ›å»ºæ“ä½œæŸä¸ªä»“åº“çš„ç®¡ç†å™¨</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BucketManager(auth, <span class="keyword">new</span> Configuration(Zone.zone2()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å·¥å…·ç±» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mybatisåˆ†é¡µ</title>
      <link href="2021/03/Mybatis%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6/"/>
      <url>2021/03/Mybatis%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ†é¡µéœ€æ±‚"><a href="#åˆ†é¡µéœ€æ±‚" class="headerlink" title="åˆ†é¡µéœ€æ±‚"></a>åˆ†é¡µéœ€æ±‚</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">å‰ç«¯éœ€è¦æäº¤çš„</span><br><span class="line">&#123;</span><br><span class="line">    page: é¡µç </span><br><span class="line">    size: å¤§å°</span><br><span class="line">    æ¡ä»¶: </span><br><span class="line">&#125;</span><br><span class="line">å“åº”çš„ç»“æœ</span><br><span class="line">&#123;</span><br><span class="line">    flag:</span><br><span class="line">    message:</span><br><span class="line">    data:&#123;   pageResult</span><br><span class="line">    total: 100,</span><br><span class="line">    rows:[]</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="../../../img/md_img/Mybatis%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6/009.png" alt="009"></p><h2 id="å‰å°ä»£ç "><a href="#å‰å°ä»£ç " class="headerlink" title="å‰å°ä»£ç "></a>å‰å°ä»£ç </h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pagination: &#123;&#x2F;&#x2F;åˆ†é¡µç›¸å…³æ¨¡å‹æ•°æ®</span><br><span class="line">     currentPage: 1,&#x2F;&#x2F;å½“å‰é¡µç </span><br><span class="line">     pageSize:10,&#x2F;&#x2F;æ¯é¡µæ˜¾ç¤ºçš„è®°å½•æ•°</span><br><span class="line">     total:0,&#x2F;&#x2F;æ€»è®°å½•æ•°</span><br><span class="line">     queryString:null&#x2F;&#x2F;æŸ¥è¯¢æ¡ä»¶</span><br><span class="line">&#125;,</span><br><span class="line">dataList: [],&#x2F;&#x2F;å½“å‰é¡µè¦å±•ç¤ºçš„åˆ†é¡µåˆ—è¡¨æ•°æ®</span><br></pre></td></tr></table></figure><h2 id="åˆ†é¡µå®ä½“ç±»"><a href="#åˆ†é¡µå®ä½“ç±»" class="headerlink" title="åˆ†é¡µå®ä½“ç±»"></a>åˆ†é¡µå®ä½“ç±»</h2><h3 id="åˆ†é¡µç»“æœå°è£…å¯¹è±¡-PageResult"><a href="#åˆ†é¡µç»“æœå°è£…å¯¹è±¡-PageResult" class="headerlink" title="åˆ†é¡µç»“æœå°è£…å¯¹è±¡(PageResult)"></a>åˆ†é¡µç»“æœå°è£…å¯¹è±¡(PageResult)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ†é¡µç»“æœå°è£…å¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PageResult</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long total;<span class="comment">//æ€»è®°å½•æ•°</span></span><br><span class="line">    <span class="keyword">private</span> List rows;<span class="comment">//å½“å‰é¡µç»“æœ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PageResult</span><span class="params">(Long total, List&lt;T&gt; rows)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.total = total;</span><br><span class="line">        <span class="keyword">this</span>.rows = rows;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">getTotal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> total;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTotal</span><span class="params">(Long total)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.total = total;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;T&gt; <span class="title">getRows</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> rows;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRows</span><span class="params">(List&lt;T&gt; rows)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.rows = rows;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å°è£…æŸ¥è¯¢æ¡ä»¶-QueryPageBean"><a href="#å°è£…æŸ¥è¯¢æ¡ä»¶-QueryPageBean" class="headerlink" title="å°è£…æŸ¥è¯¢æ¡ä»¶(QueryPageBean)"></a>å°è£…æŸ¥è¯¢æ¡ä»¶(QueryPageBean)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å°è£…æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QueryPageBean</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer currentPage;<span class="comment">//é¡µç </span></span><br><span class="line">    <span class="keyword">private</span> Integer pageSize;<span class="comment">//æ¯é¡µè®°å½•æ•°</span></span><br><span class="line">    <span class="keyword">private</span> String queryString;<span class="comment">//æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getCurrentPage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> currentPage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCurrentPage</span><span class="params">(Integer currentPage)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.currentPage = currentPage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getPageSize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pageSize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPageSize</span><span class="params">(Integer pageSize)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.pageSize = pageSize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getQueryString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> queryString;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setQueryString</span><span class="params">(String queryString)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.queryString = queryString;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="åå°åˆ†é¡µæ’ä»¶å¤„ç†"><a href="#åå°åˆ†é¡µæ’ä»¶å¤„ç†" class="headerlink" title="åå°åˆ†é¡µæ’ä»¶å¤„ç†"></a>åå°åˆ†é¡µæ’ä»¶å¤„ç†</h2><h3 id="å¼•å…¥ä¾èµ–"><a href="#å¼•å…¥ä¾èµ–" class="headerlink" title="å¼•å…¥ä¾èµ–"></a>å¼•å…¥ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mybatisçš„åˆ†é¡µæ’ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Mybatis --&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Serviceå®ç°ç±»"><a href="#Serviceå®ç°ç±»" class="headerlink" title="Serviceå®ç°ç±»"></a>Serviceå®ç°ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> queryPageBean</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> PageResult&lt;å®ä½“ç±»&gt; findPage(QueryPageBean queryPageBean) &#123;</span><br><span class="line">    PageHelper.startPage(queryPageBean.getCurrentPage(), queryPageBean.getPageSize());</span><br><span class="line">    <span class="comment">// æ¨¡ç³ŠæŸ¥è¯¢ æ‹¼æ¥ %</span></span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦æœ‰æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line">    <span class="keyword">if</span>(!StringUtils.isEmpty(queryPageBean.getQueryString()))&#123;</span><br><span class="line">        <span class="comment">// æœ‰æŸ¥è¯¢æ¡ä»¶ï¼Œæ‹¼æ¥%</span></span><br><span class="line">        queryPageBean.setQueryString(<span class="string">&quot;%&quot;</span> + queryPageBean.getQueryString() + <span class="string">&quot;%&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ç´§æ¥ç€çš„æŸ¥è¯¢è¯­å¥ä¼šè¢«åˆ†é¡µ</span></span><br><span class="line">    Page&lt;å®ä½“ç±»&gt; page = Dao.findByCondition(queryPageBean.getQueryString());</span><br><span class="line">    PageResult&lt;å®ä½“ç±»&gt; pageResult = <span class="keyword">new</span> PageResult&lt;å®ä½“ç±»&gt;(page.getTotal(), page.getResult());</span><br><span class="line">    <span class="keyword">return</span> pageResult;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> SSM </category>
          
          <category> Mybatis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mybatis </tag>
            
            <tag> åˆ†é¡µæ’ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JdbcTemplate</title>
      <link href="2020/11/JdbcTemplate/"/>
      <url>2020/11/JdbcTemplate/</url>
      
        <content type="html"><![CDATA[<!--<div class="note success flat"><p>success æç¤ºå—æ ‡ç±¤</p></div><div class="note info flat"><p>info æç¤ºå—æ ‡ç±¤</p></div> --><h1 id="1-JdbcTemplateä»‹ç»"><a href="#1-JdbcTemplateä»‹ç»" class="headerlink" title="1.JdbcTemplateä»‹ç»"></a>1.JdbcTemplateä»‹ç»</h1><ul><li>å®ƒæ˜¯springæ¡†æ¶ä¸­æä¾›çš„ä¸€ä¸ªå¯¹è±¡ï¼Œæ˜¯å¯¹åŸå§‹ç¹ççš„Jdbc APIå¯¹è±¡çš„ç®€å•å°è£…ã€‚</li><li>springæ¡†æ¶ä¸ºæˆ‘ä»¬æä¾›äº†å¾ˆå¤šçš„æ“ä½œæ¨¡æ¿ç±»ã€‚ä¾‹å¦‚ï¼šæ“ä½œå…³ç³»å‹æ•°æ®çš„JdbcTemplateå’ŒHibernateTemplateï¼Œæ“ä½œnosqlæ•°æ®åº“çš„RedisTemplateï¼Œæ“ä½œæ¶ˆæ¯é˜Ÿåˆ—çš„JmsTemplateç­‰ç­‰</li></ul><h1 id="2-JDBCåŸºæœ¬ä½¿ç”¨"><a href="#2-JDBCåŸºæœ¬ä½¿ç”¨" class="headerlink" title="2.JDBCåŸºæœ¬ä½¿ç”¨"></a>2.JDBCåŸºæœ¬ä½¿ç”¨</h1><p>â‘ å¯¼å…¥spring-jdbcå’Œspring-txåæ ‡</p><p>â‘¡åˆ›å»ºæ•°æ®åº“è¡¨å’Œå®ä½“</p><p>â‘¢åˆ›å»ºJdbcTemplateå¯¹è±¡</p><p>â‘£æ‰§è¡Œæ•°æ®åº“æ“ä½œ</p><h2 id="1-å¯¼å…¥maven"><a href="#1-å¯¼å…¥maven" class="headerlink" title="1.å¯¼å…¥maven"></a>1.å¯¼å…¥maven</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Spring_jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.32<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-annotations<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="2-åˆ›å»ºæ•°æ®åº“è¡¨å’Œå®ä½“"><a href="#2-åˆ›å»ºæ•°æ®åº“è¡¨å’Œå®ä½“" class="headerlink" title="2.åˆ›å»ºæ•°æ®åº“è¡¨å’Œå®ä½“"></a>2.åˆ›å»ºæ•°æ®åº“è¡¨å’Œå®ä½“</h2><ul><li>å®ä½“ç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> money;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Account&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, money=&quot;</span> + money +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getMoney</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> money;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMoney</span><span class="params">(<span class="keyword">double</span> money)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.money = money;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ•°æ®åº“</li></ul><p><img src="../../../img/md_img/JdbcTemplate/1606025607031.png" alt="* "></p><ul><li>æµ‹è¯•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">test1</span><span class="params">()</span> <span class="keyword">throws</span> PropertyVetoException </span>&#123;</span><br><span class="line">       <span class="comment">//è®¾ç½®æ•°æ®æºå¯¹è±¡</span></span><br><span class="line">       ComboPooledDataSource dataSource = <span class="keyword">new</span> ComboPooledDataSource();</span><br><span class="line">       dataSource.setDriverClass(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">       dataSource.setJdbcUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/test&quot;</span>);</span><br><span class="line">       dataSource.setUser(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">       dataSource.setPassword(<span class="string">&quot;root&quot;</span>);</span><br><span class="line"></span><br><span class="line">       JdbcTemplate jdbcTemplate = <span class="keyword">new</span> JdbcTemplate();</span><br><span class="line">       <span class="comment">//è®¾ç½®æ•°æ®æºå¯¹è±¡</span></span><br><span class="line">       jdbcTemplate.setDataSource(dataSource);</span><br><span class="line">       <span class="keyword">int</span> row = jdbcTemplate.update(<span class="string">&quot;insert into account values(?,?)&quot;</span>, <span class="string">&quot;tom2&quot;</span>, <span class="number">5000</span>);</span><br><span class="line">       System.out.println(row);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h1 id="3-springäº§ç”Ÿæ¨¡æ¿å¯¹è±¡"><a href="#3-springäº§ç”Ÿæ¨¡æ¿å¯¹è±¡" class="headerlink" title="3.springäº§ç”Ÿæ¨¡æ¿å¯¹è±¡"></a>3.springäº§ç”Ÿæ¨¡æ¿å¯¹è±¡</h1><h2 id="1-å¯¼å…¥maven-1"><a href="#1-å¯¼å…¥maven-1" class="headerlink" title="1.å¯¼å…¥maven"></a>1.å¯¼å…¥maven</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Spring_jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.32<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-annotations<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="2-åˆ›å»ºæ•°æ®åº“è¡¨å’Œå®ä½“-1"><a href="#2-åˆ›å»ºæ•°æ®åº“è¡¨å’Œå®ä½“-1" class="headerlink" title="2.åˆ›å»ºæ•°æ®åº“è¡¨å’Œå®ä½“"></a>2.åˆ›å»ºæ•°æ®åº“è¡¨å’Œå®ä½“</h2><ul><li>å®ä½“ç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> money;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Account&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, money=&quot;</span> + money +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getMoney</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> money;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMoney</span><span class="params">(<span class="keyword">double</span> money)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.money = money;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ•°æ®åº“</li></ul><p><img src="../../../img/md_img/JdbcTemplate/1606025607031.png" alt="* "></p><h2 id="3-Springäº§ç”Ÿæ¨¡æ¿å¯¹è±¡"><a href="#3-Springäº§ç”Ÿæ¨¡æ¿å¯¹è±¡" class="headerlink" title="3.Springäº§ç”Ÿæ¨¡æ¿å¯¹è±¡"></a>3.Springäº§ç”Ÿæ¨¡æ¿å¯¹è±¡</h2><ul><li>å…ˆé…ç½®æ•°æ®æºï¼Œç„¶åé…ç½®JdbcTemplateï¼Œç„¶åå°†æ•°æ®æºæ³¨å…¥åˆ°JdbcTemplateä¸­ï¼Œ</li><li>é€šè¿‡Springå®¹å™¨è·å¾—JdbcTemplateå¯¹è±¡ï¼Œè°ƒç”¨JdbcTemplateå¯¹è±¡çš„updateæ–¹æ³•ï¼Œä¼ å…¥sqlè¯­å¥åŠå‚æ•°å®Œæˆæ’å…¥æ•°æ®çš„æ“ä½œ</li></ul><p>1,æŠŠjdbcæ•°æ®æºå¯¹è±¡æŠ½å–æˆä¸€ä¸ªjdbc.proppertieså¯¹è±¡</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="meta">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/test</span></span><br><span class="line"><span class="meta">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">jdbc.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure><ul><li>xmlé…ç½®</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--åŠ è½½jdbc,properties--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">beans</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ•°æ®æºå¯¹è±¡--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--jdbcæ¨¡æ¿å¯¹è±¡--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbcTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>æµ‹è¯•ç±» </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span><span class="comment">//æµ‹è¯•Springäº§ç”ŸjdbcTemplaå¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ApplicationContext app = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">    JdbcTemplate jdbcTemplate = app.getBean(JdbcTemplate.class);</span><br><span class="line">    <span class="keyword">int</span> row = jdbcTemplate.update(<span class="string">&quot;insert into account values(?,?)&quot;</span>, <span class="string">&quot;zhangsan&quot;</span>, <span class="number">5000</span>);</span><br><span class="line">    System.out.println(row);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="4-JDBCå¢åˆ æ”¹æŸ¥"><a href="#4-JDBCå¢åˆ æ”¹æŸ¥" class="headerlink" title="4.JDBCå¢åˆ æ”¹æŸ¥"></a>4.JDBCå¢åˆ æ”¹æŸ¥</h1><p>â‘ å¯¼å…¥spring-jdbcå’Œspring-txåæ ‡</p><p>â‘¡åˆ›å»ºæ•°æ®åº“è¡¨å’Œå®ä½“</p><p>â‘¢åˆ›å»ºJdbcTemplateå¯¹è±¡</p><p>  JdbcTemplate jdbcTemplate = <strong>new</strong> JdbcTemplate();<br>   jdbcTemplate.setDataSource(dataSource);</p><p>â‘£æ‰§è¡Œæ•°æ®åº“æ“ä½œ</p><p>  æ›´æ–°æ“ä½œï¼š</p><p>â€‹    jdbcTemplate.update (sql,params)</p><p>  æŸ¥è¯¢æ“ä½œï¼š</p><p>â€‹    jdbcTemplate.query (sql,Mapper,params)</p><p>  jdbcTemplate.queryForObject(sql,Mapper,params)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;classpath:applicationContext.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcTemplateCRUDTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testQueryCount</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Long count = jdbcTemplate.queryForObject(<span class="string">&quot;select count(*) from account&quot;</span>, <span class="keyword">long</span>.class);</span><br><span class="line">        System.out.println(count);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testQueryOne</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Account account = jdbcTemplate.queryForObject(<span class="string">&quot;select * from account where name = ?&quot;</span>, <span class="keyword">new</span> BeanPropertyRowMapper&lt;Account&gt;(Account.class), <span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">        System.out.println(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testQueryAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;Account&gt; list = jdbcTemplate.query(<span class="string">&quot;select * from account&quot;</span>, <span class="keyword">new</span> BeanPropertyRowMapper&lt;Account&gt;(Account.class));</span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdate</span><span class="params">()</span></span>&#123;</span><br><span class="line">        jdbcTemplate.update(<span class="string">&quot;update account set money = ? where name = ? &quot;</span>, <span class="number">10000</span>, <span class="string">&quot;tom2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDelete</span><span class="params">()</span></span>&#123;</span><br><span class="line">        jdbcTemplate.update(<span class="string">&quot;delete from account where name = ?&quot;</span>, <span class="string">&quot;tom3&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Spring_Aop</title>
      <link href="2020/11/Spring_Aop/"/>
      <url>2020/11/Spring_Aop/</url>
      
        <content type="html"><![CDATA[<h2 id="1-Aopç®€ä»‹"><a href="#1-Aopç®€ä»‹" class="headerlink" title="1.Aopç®€ä»‹"></a>1.Aopç®€ä»‹</h2><p>AOP ä¸º Aspect Oriented Programming çš„ç¼©å†™ï¼Œæ„æ€ä¸ºé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œæ˜¯é€šè¿‡é¢„ç¼–è¯‘æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯ã€‚</p><p>AOP æ˜¯ OOP çš„å»¶ç»­ï¼Œæ˜¯è½¯ä»¶å¼€å‘ä¸­çš„ä¸€ä¸ªçƒ­ç‚¹ï¼Œä¹Ÿæ˜¯Springæ¡†æ¶ä¸­çš„ä¸€ä¸ªé‡è¦å†…å®¹ï¼Œæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ç§è¡ç”ŸèŒƒå‹ã€‚åˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚</p><h2 id="2-aopçš„ä½œç”¨åŠå…¶ä¼˜åŠ¿"><a href="#2-aopçš„ä½œç”¨åŠå…¶ä¼˜åŠ¿" class="headerlink" title="2.aopçš„ä½œç”¨åŠå…¶ä¼˜åŠ¿"></a>2.aopçš„ä½œç”¨åŠå…¶ä¼˜åŠ¿</h2><ul><li>ä½œç”¨ï¼šåœ¨ç¨‹åºè¿è¡ŒæœŸé—´ï¼Œåœ¨ä¸ä¿®æ”¹æºç çš„æƒ…å†µä¸‹å¯¹æ–¹æ³•è¿›è¡ŒåŠŸèƒ½å¢å¼º</li><li>ä¼˜åŠ¿ï¼šå‡å°‘é‡å¤ä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼Œå¹¶ä¸”ä¾¿äºç»´æŠ¤</li></ul><h2 id="3-aopçš„åŠ¨æ€ä»£ç†"><a href="#3-aopçš„åŠ¨æ€ä»£ç†" class="headerlink" title="3.aopçš„åŠ¨æ€ä»£ç†"></a>3.aopçš„åŠ¨æ€ä»£ç†</h2><p>JdkåŠ¨æ€ä»£ç†æ˜¯åŸºäºæ¥å£æ¥åšçš„ä»£ç†</p><p>â‘ ç¼–å†™ç›®æ ‡ç±»æ¥å£</p><p>â‘¡ç¼–å†™ç›®æ ‡æ¥å£çš„å®ç°ç±»</p><p>â‘¢ç¼–å†™jdkçš„åŠ¨æ€ä»£ç†ä»£ç </p><p>â‘£ç¼–å†™æµ‹è¯•ç±»</p><h3 id="1-åŸºäºjdkçš„åŠ¨æ€ä»£ç†"><a href="#1-åŸºäºjdkçš„åŠ¨æ€ä»£ç†" class="headerlink" title="1.åŸºäºjdkçš„åŠ¨æ€ä»£ç†"></a>1.åŸºäºjdkçš„åŠ¨æ€ä»£ç†</h3><ul><li><p>JdkåŠ¨æ€ä»£ç†æ˜¯åŸºäºæ¥å£æ¥åšçš„ä»£ç†</p><p>â‘ ç¼–å†™ç›®æ ‡ç±»æ¥å£</p><p>â‘¡ç¼–å†™ç›®æ ‡æ¥å£çš„å®ç°ç±»</p><p>â‘¢ç¼–å†™jdkçš„åŠ¨æ€ä»£ç†ä»£ç </p><p>â‘£ç¼–å†™æµ‹è¯•ç±»</p></li><li><p>æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TargetInterface</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>å®ç°ç±»</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Target</span> <span class="keyword">implements</span> <span class="title">TargetInterface</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;save running&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>å¢å¼ºç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Advice</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å‰ç½®å¢å¼º&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturning</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åç½®å¢å¼º&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//ç›®æ ‡å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">final</span> Target target = <span class="keyword">new</span> Target();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¢å¼ºå¯¹è±¡</span></span><br><span class="line">        <span class="keyword">final</span> Advice advice = <span class="keyword">new</span> Advice();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¿”å›å€¼å°±æ˜¯åŠ¨æ€ç”Ÿæˆçš„ä»£ç†å¯¹è±¡</span></span><br><span class="line">        TargetInterface proxy = (TargetInterface) Proxy.newProxyInstance(</span><br><span class="line">                target.getClass().getClassLoader(),<span class="comment">//ç›®æ ‡å¯¹è±¡ç±»åŠ è½½å™¨</span></span><br><span class="line">                target.getClass().getInterfaces(),<span class="comment">//ç›®æ ‡å¯¹è±¡ç›¸åŒçš„æ¥å£å­—èŠ‚ç å¯¹è±¡æ•°ç»„</span></span><br><span class="line">                <span class="keyword">new</span> InvocationHandler() &#123;</span><br><span class="line">                    <span class="comment">//è°ƒç”¨ä»£ç†å¯¹è±¡çš„ä»»ä½•æ–¹æ³• å®è´¨æ‰§è¡Œçš„éƒ½æ˜¯invokeæ–¹æ³•</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">                        advice.before();<span class="comment">//å‰ç½®å¢å¼º</span></span><br><span class="line">                        Object invoke = method.invoke(target, args);<span class="comment">//æ‰§è¡Œç›®æ ‡æ–¹æ³•</span></span><br><span class="line">                        advice.afterReturning();<span class="comment">//åç½®å¢å¼º</span></span><br><span class="line">                        <span class="keyword">return</span> invoke;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•</span></span><br><span class="line">        proxy.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç»“æœ</p></li></ul><p><img src="../../../img/md_img/Spring_Aop/1605962995308.png" alt="1605962995308"></p><h3 id="2-åŸºäºcglibçš„åŠ¨æ€ä»£ç†"><a href="#2-åŸºäºcglibçš„åŠ¨æ€ä»£ç†" class="headerlink" title="2.åŸºäºcglibçš„åŠ¨æ€ä»£ç†"></a>2.åŸºäºcglibçš„åŠ¨æ€ä»£ç†</h3><ul><li><p>CglibåŠ¨æ€ä»£ç†æ˜¯åŸºäºç±»ä¼¼äºç»§æ‰¿çš„æ–¹å¼åšçš„ä»£ç†</p><p>â‘ ç¼–å†™ç›®æ ‡ç±»</p><p>â‘¡åŠ¨æ€ä»£ç†ä»£ç ç¼–å†™</p><p>â‘¢ç¼–å†™æµ‹è¯•ç±»</p></li><li><p>ç›®æ ‡ç±»</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Target</span>  </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;save running&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>å¢å¼ºç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Advice</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å‰ç½®å¢å¼º&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturning</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åç½®å¢å¼º&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æµ‹è¯•ç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//ç›®æ ‡å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">final</span> Target target = <span class="keyword">new</span> Target();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¢å¼ºå¯¹è±¡</span></span><br><span class="line">        <span class="keyword">final</span> Advice advice = <span class="keyword">new</span> Advice();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¿”å›å€¼ å°±æ˜¯åŠ¨æ€ç”Ÿæˆçš„ä»£ç†å¯¹è±¡ åŸºäºcglib</span></span><br><span class="line">        <span class="comment">//1.åˆ›å»ºå¢å¼ºå™¨</span></span><br><span class="line">        Enhancer enhancer = <span class="keyword">new</span> Enhancer();</span><br><span class="line">        <span class="comment">//2.è®¾ç½®çˆ¶ç±»(ç›®æ ‡)</span></span><br><span class="line">        enhancer.setSuperclass(Target.class);</span><br><span class="line">        <span class="comment">//3.è®¾ç½®å›è°ƒ</span></span><br><span class="line">        enhancer.setCallback(<span class="keyword">new</span> MethodInterceptor() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> Object <span class="title">intercept</span><span class="params">(Object proxy, Method method, Object[] args, MethodProxy methodProxy)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">                advice.before();<span class="comment">//å‰ç½®æ–¹æ³•</span></span><br><span class="line">                Object invoke = method.invoke(target, args);</span><br><span class="line">                advice.afterReturning();</span><br><span class="line">                <span class="keyword">return</span>  invoke;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//4.ç”Ÿæˆä»£ç†å¯¹è±¡</span></span><br><span class="line">        Target proxy = (Target) enhancer.create();</span><br><span class="line">        proxy.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>ç»“æœ</li></ul><p><img src="../../../img/md_img/Spring_Aop/1605963237947.png" alt="1605963237947"></p><hr><h2 id="4-aopç›¸å…³æ¦‚å¿µ"><a href="#4-aopç›¸å…³æ¦‚å¿µ" class="headerlink" title="4.aopç›¸å…³æ¦‚å¿µ"></a>4.aopç›¸å…³æ¦‚å¿µ</h2><p> Targetï¼ˆç›®æ ‡å¯¹è±¡ï¼‰ï¼šä»£ç†çš„ç›®æ ‡å¯¹è±¡<br> Proxy ï¼ˆä»£ç†ï¼‰ï¼šä¸€ä¸ªç±»è¢« AOP ç»‡å…¥å¢å¼ºåï¼Œå°±äº§ç”Ÿä¸€ä¸ªç»“æœä»£ç†ç±»<br> Joinpointï¼ˆè¿æ¥ç‚¹ï¼‰ï¼šæ‰€è°“è¿æ¥ç‚¹æ˜¯æŒ‡é‚£äº›è¢«æ‹¦æˆªåˆ°çš„ç‚¹ã€‚åœ¨springä¸­,è¿™äº›ç‚¹æŒ‡çš„æ˜¯æ–¹æ³•ï¼Œå› ä¸ºspringåªæ”¯æŒæ–¹æ³•ç±»å‹çš„è¿æ¥ç‚¹<br> Pointcutï¼ˆåˆ‡å…¥ç‚¹ï¼‰ï¼šæ‰€è°“åˆ‡å…¥ç‚¹æ˜¯æŒ‡æˆ‘ä»¬è¦å¯¹å“ªäº› Joinpoint è¿›è¡Œæ‹¦æˆªçš„å®šä¹‰<br> Adviceï¼ˆé€šçŸ¥/ å¢å¼ºï¼‰ï¼šæ‰€è°“é€šçŸ¥æ˜¯æŒ‡æ‹¦æˆªåˆ° Joinpoint ä¹‹åæ‰€è¦åšçš„äº‹æƒ…å°±æ˜¯é€šçŸ¥<br> Aspectï¼ˆåˆ‡é¢ï¼‰ï¼šæ˜¯åˆ‡å…¥ç‚¹å’Œé€šçŸ¥ï¼ˆå¼•ä»‹ï¼‰çš„ç»“åˆ<br> Weavingï¼ˆç»‡å…¥ï¼‰ï¼šæ˜¯æŒ‡æŠŠå¢å¼ºåº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡æ¥åˆ›å»ºæ–°çš„ä»£ç†å¯¹è±¡çš„è¿‡ç¨‹ã€‚springé‡‡ç”¨åŠ¨æ€ä»£ç†ç»‡å…¥ï¼Œè€ŒAspectJé‡‡ç”¨ç¼–è¯‘æœŸç»‡å…¥å’Œç±»è£…è½½æœŸç»‡å…¥</p><h2 id="5-aopå¼€å‘æ˜ç¡®çš„äº‹é¡¹å’ŒçŸ¥è¯†è¦ç‚¹"><a href="#5-aopå¼€å‘æ˜ç¡®çš„äº‹é¡¹å’ŒçŸ¥è¯†è¦ç‚¹" class="headerlink" title="5.aopå¼€å‘æ˜ç¡®çš„äº‹é¡¹å’ŒçŸ¥è¯†è¦ç‚¹"></a>5.aopå¼€å‘æ˜ç¡®çš„äº‹é¡¹å’ŒçŸ¥è¯†è¦ç‚¹</h2><h3 id="1-éœ€è¦ç¼–å†™çš„å†…å®¹"><a href="#1-éœ€è¦ç¼–å†™çš„å†…å®¹" class="headerlink" title="1.éœ€è¦ç¼–å†™çš„å†…å®¹"></a>1.éœ€è¦ç¼–å†™çš„å†…å®¹</h3><ul><li>ç¼–å†™æ ¸å¿ƒä¸šåŠ¡ä»£ç ï¼ˆç›®æ ‡ç±»çš„ç›®æ ‡æ–¹æ³•ï¼‰</li><li>ç¼–å†™åˆ‡é¢ç±»ï¼Œåˆ‡é¢ç±»ä¸­æœ‰é€šçŸ¥(å¢å¼ºåŠŸèƒ½æ–¹æ³•)</li><li> åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½®ç»‡å…¥å…³ç³»ï¼Œå³å°†å“ªäº›é€šçŸ¥ä¸å“ªäº›è¿æ¥ç‚¹è¿›è¡Œç»“åˆ</li></ul><h3 id="2-AOP-æŠ€æœ¯å®ç°çš„å†…å®¹"><a href="#2-AOP-æŠ€æœ¯å®ç°çš„å†…å®¹" class="headerlink" title="2.AOP æŠ€æœ¯å®ç°çš„å†…å®¹"></a>2.AOP æŠ€æœ¯å®ç°çš„å†…å®¹</h3><p>Spring æ¡†æ¶ç›‘æ§åˆ‡å…¥ç‚¹æ–¹æ³•çš„æ‰§è¡Œã€‚ä¸€æ—¦ç›‘æ§åˆ°åˆ‡å…¥ç‚¹æ–¹æ³•è¢«è¿è¡Œï¼Œä½¿ç”¨ä»£ç†æœºåˆ¶ï¼ŒåŠ¨æ€åˆ›å»ºç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡ï¼Œæ ¹æ®é€šçŸ¥ç±»åˆ«ï¼Œåœ¨ä»£ç†å¯¹è±¡çš„å¯¹åº”ä½ç½®ï¼Œå°†é€šçŸ¥å¯¹åº”çš„åŠŸèƒ½ç»‡å…¥ï¼Œå®Œæˆå®Œæ•´çš„ä»£ç é€»è¾‘è¿è¡Œã€‚</p><h3 id="3-AOPåº•å±‚ä½¿ç”¨å“ªç§ä»£ç†æ–¹å¼"><a href="#3-AOPåº•å±‚ä½¿ç”¨å“ªç§ä»£ç†æ–¹å¼" class="headerlink" title="3.AOPåº•å±‚ä½¿ç”¨å“ªç§ä»£ç†æ–¹å¼"></a>3.AOPåº•å±‚ä½¿ç”¨å“ªç§ä»£ç†æ–¹å¼</h3><p>åœ¨ spring ä¸­ï¼Œæ¡†æ¶ä¼šæ ¹æ®ç›®æ ‡ç±»æ˜¯å¦å®ç°äº†æ¥å£æ¥å†³å®šé‡‡ç”¨å“ªç§åŠ¨æ€ä»£ç†çš„æ–¹å¼ã€‚</p><h2 id="6-AOPçš„å®ç°"><a href="#6-AOPçš„å®ç°" class="headerlink" title="6.AOPçš„å®ç°"></a>6.AOPçš„å®ç°</h2><p>â‘ å¯¼å…¥ AOP ç›¸å…³åæ ‡</p><p>â‘¡åˆ›å»ºç›®æ ‡æ¥å£å’Œç›®æ ‡ç±»ï¼ˆå†…éƒ¨æœ‰åˆ‡ç‚¹ï¼‰</p><p>â‘¢åˆ›å»ºåˆ‡é¢ç±»ï¼ˆå†…éƒ¨æœ‰å¢å¼ºæ–¹æ³•ï¼‰</p><p>â‘£å°†ç›®æ ‡ç±»å’Œåˆ‡é¢ç±»çš„å¯¹è±¡åˆ›å»ºæƒäº¤ç»™ spring</p><p>â‘¤åœ¨ applicationContext.xml ä¸­é…ç½®ç»‡å…¥å…³ç³»</p><p>â‘¥æµ‹è¯•ä»£ç     </p><h3 id="0-å¯¼å…¥AOP-ç›¸å…³åæ ‡"><a href="#0-å¯¼å…¥AOP-ç›¸å…³åæ ‡" class="headerlink" title="0.å¯¼å…¥AOP ç›¸å…³åæ ‡"></a>0.å¯¼å…¥AOP ç›¸å…³åæ ‡</h3><ul><li>å¯¼å…¥maven jaråŒ…</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Spring_aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.8.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="1-è¡¨è¾¾å¼è¯­æ³•"><a href="#1-è¡¨è¾¾å¼è¯­æ³•" class="headerlink" title="1.è¡¨è¾¾å¼è¯­æ³•"></a>1.è¡¨è¾¾å¼è¯­æ³•</h3><p><strong>execution([ä¿®é¥°ç¬¦] è¿”å›å€¼ç±»å‹ åŒ…å.ç±»å.æ–¹æ³•å(å‚æ•°))</strong></p><ul><li> è®¿é—®ä¿®é¥°ç¬¦å¯ä»¥çœç•¥</li><li>è¿”å›å€¼ç±»å‹ã€åŒ…åã€ç±»åã€æ–¹æ³•åå¯ä»¥ä½¿ç”¨æ˜Ÿå·*  ä»£è¡¨ä»»æ„</li><li>åŒ…åä¸ç±»åä¹‹é—´ä¸€ä¸ªç‚¹ . ä»£è¡¨å½“å‰åŒ…ä¸‹çš„ç±»ï¼Œä¸¤ä¸ªç‚¹ .. è¡¨ç¤ºå½“å‰åŒ…åŠå…¶å­åŒ…ä¸‹çš„ç±»</li><li>å‚æ•°åˆ—è¡¨å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªç‚¹ .. è¡¨ç¤ºä»»æ„ä¸ªæ•°ï¼Œä»»æ„ç±»å‹çš„å‚æ•°åˆ—è¡¨</li></ul><p>ä¾‹å¦‚:</p><p>â€‹     execution(public void com.yuefeng.aop.Target.method())  </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å£°æ˜åˆ‡é¢--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;myAspect&quot;</span>&gt;</span> </span><br><span class="line">                <span class="comment">&lt;!--åˆ‡é¢=åˆ‡ç‚¹+é€šçŸ¥--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;before&quot;</span> <span class="attr">pointcut</span>=<span class="string">&quot;execution(public void com.yuefeng.aop.Target.save())&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:before</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">aop:after-returning</span> <span class="attr">method</span>=<span class="string">&quot;afterReturning&quot;</span> <span class="attr">pointcut</span>=<span class="string">&quot;execution(public void com.yuefeng.aop.Target.save())&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:after-returning</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">method</span>=<span class="string">&quot;around&quot;</span> <span class="attr">pointcut</span>=<span class="string">&quot;execution(public void com.yuefeng.aop.Target.save())&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:around</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">aop:after-throwing</span> <span class="attr">method</span>=<span class="string">&quot;afterThrowing&quot;</span> <span class="attr">pointcut</span>=<span class="string">&quot;execution(public void com.yuefeng.aop.Target.save())&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:after-throwing</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">&quot;after&quot;</span> <span class="attr">pointcut</span>=<span class="string">&quot;execution(public void com.yuefeng.aop.Target.save())&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:after</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-é€šçŸ¥çš„ç§ç±»"><a href="#2-é€šçŸ¥çš„ç§ç±»" class="headerlink" title="2.é€šçŸ¥çš„ç§ç±»"></a>2.é€šçŸ¥çš„ç§ç±»</h3><table><thead><tr><th><strong>åç§°</strong></th><th><strong>æ ‡ç­¾</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>å‰ç½®é€šçŸ¥</td><td><a href="aop:before">aop:before</a></td><td>ç”¨äºé…ç½®å‰ç½®é€šçŸ¥ã€‚æŒ‡å®šå¢å¼ºçš„æ–¹æ³•åœ¨åˆ‡å…¥ç‚¹æ–¹æ³•ä¹‹å‰æ‰§è¡Œ</td></tr><tr><td>åç½®é€šçŸ¥</td><td><a href="aop:after-returning">aop:after-returning</a></td><td>ç”¨äºé…ç½®åç½®é€šçŸ¥ã€‚æŒ‡å®šå¢å¼ºçš„æ–¹æ³•åœ¨åˆ‡å…¥ç‚¹æ–¹æ³•ä¹‹åæ‰§è¡Œ</td></tr><tr><td>ç¯ç»•é€šçŸ¥</td><td><a href="aop:around">aop:around</a></td><td>ç”¨äºé…ç½®ç¯ç»•é€šçŸ¥ã€‚æŒ‡å®šå¢å¼ºçš„æ–¹æ³•åœ¨åˆ‡å…¥ç‚¹æ–¹æ³•ä¹‹å‰å’Œä¹‹åéƒ½æ‰§è¡Œ</td></tr><tr><td>å¼‚å¸¸æŠ›å‡ºé€šçŸ¥</td><td><a href="aop:throwing">aop:throwing</a></td><td>ç”¨äºé…ç½®å¼‚å¸¸æŠ›å‡ºé€šçŸ¥ã€‚æŒ‡å®šå¢å¼ºçš„æ–¹æ³•åœ¨å‡ºç°å¼‚å¸¸æ—¶æ‰§è¡Œ</td></tr><tr><td>æœ€ç»ˆé€šçŸ¥</td><td><a href="aop:after">aop:after</a></td><td>ç”¨äºé…ç½®æœ€ç»ˆé€šçŸ¥ã€‚æ— è®ºå¢å¼ºæ–¹å¼æ‰§è¡Œæ˜¯å¦æœ‰å¼‚å¸¸éƒ½ä¼šæ‰§è¡Œ</td></tr></tbody></table><ul><li>å¢å¼ºç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAspect</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;before...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturning</span><span class="params">()</span></span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;after....&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Object <span class="title">around</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;aroundBefore....&quot;</span>);</span><br><span class="line">            Object proceed = pjp.proceed();<span class="comment">//åˆ‡ç‚¹æ–¹æ³•</span></span><br><span class="line">            System.out.println(<span class="string">&quot;aroundAfter....&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> proceed;</span><br><span class="line">    &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterThrowing</span><span class="params">()</span></span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Throwing...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;final...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>æ¥å£å’Œç›®æ ‡ç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Target</span> <span class="keyword">implements</span> <span class="title">TargetInterface</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">//        int i = 1/0;</span></span><br><span class="line">        System.out.println(<span class="string">&quot;save running&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TargetInterface</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-åˆ‡ç‚¹è¡¨è¾¾å¼çš„æŠ½å–"><a href="#3-åˆ‡ç‚¹è¡¨è¾¾å¼çš„æŠ½å–" class="headerlink" title="3.åˆ‡ç‚¹è¡¨è¾¾å¼çš„æŠ½å–"></a>3.åˆ‡ç‚¹è¡¨è¾¾å¼çš„æŠ½å–</h3><ul><li>å½“å¤šä¸ªå¢å¼ºçš„åˆ‡ç‚¹è¡¨è¾¾å¼ç›¸åŒæ—¶ï¼Œå¯ä»¥å°†åˆ‡ç‚¹è¡¨è¾¾å¼è¿›è¡ŒæŠ½å–ï¼Œåœ¨å¢å¼ºä¸­ä½¿ç”¨ pointcut-ref å±æ€§ä»£æ›¿ pointcut å±æ€§æ¥å¼•ç”¨æŠ½å–åçš„åˆ‡ç‚¹è¡¨è¾¾å¼ã€‚</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å£°æ˜åˆ‡é¢--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;myAspect&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;myPointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(public void com.yuefeng.aop.Target.save())&quot;</span>/&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--åˆ‡é¢=åˆ‡ç‚¹+é€šçŸ¥--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">method</span>=<span class="string">&quot;after&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;myPointcut&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="7-æ³¨è§£æ–¹å¼å®ç°aop"><a href="#7-æ³¨è§£æ–¹å¼å®ç°aop" class="headerlink" title="7.æ³¨è§£æ–¹å¼å®ç°aop"></a>7.æ³¨è§£æ–¹å¼å®ç°aop</h2><ul><li><p>åŸºäºæ³¨è§£çš„aopå¼€å‘æ­¥éª¤ï¼š</p><p>â‘ åˆ›å»ºç›®æ ‡æ¥å£å’Œç›®æ ‡ç±»ï¼ˆå†…éƒ¨æœ‰åˆ‡ç‚¹ï¼‰</p><p>â‘¡åˆ›å»ºåˆ‡é¢ç±»ï¼ˆå†…éƒ¨æœ‰å¢å¼ºæ–¹æ³•ï¼‰</p><p>â‘¢å°†ç›®æ ‡ç±»å’Œåˆ‡é¢ç±»çš„å¯¹è±¡åˆ›å»ºæƒäº¤ç»™ spring</p><p>â‘£åœ¨åˆ‡é¢ç±»ä¸­ä½¿ç”¨æ³¨è§£é…ç½®ç»‡å…¥å…³ç³»</p><p>â‘¤åœ¨é…ç½®æ–‡ä»¶ä¸­å¼€å¯ç»„ä»¶æ‰«æå’Œ AOP çš„è‡ªåŠ¨ä»£ç†</p><p>â‘¥æµ‹è¯•</p></li></ul><h3 id="1-æ³¨è§£aopå¼€å‘æ­¥éª¤"><a href="#1-æ³¨è§£aopå¼€å‘æ­¥éª¤" class="headerlink" title="1.æ³¨è§£aopå¼€å‘æ­¥éª¤"></a>1.æ³¨è§£aopå¼€å‘æ­¥éª¤</h3><p>â‘ ä½¿ç”¨@Aspectæ ‡æ³¨åˆ‡é¢ç±»</p><p>â‘¡ä½¿ç”¨@é€šçŸ¥æ³¨è§£æ ‡æ³¨é€šçŸ¥æ–¹æ³•</p><p>â‘¢åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®aopè‡ªåŠ¨ä»£ç†&lt;aop:aspectj-autoproxy/&gt;</p><p><img src="../../../img/md_img/Spring_Aop/1605967131631.png" alt="1605967131631"></p><ul><li>é…ç½®æ–‡ä»¶</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="tag"><span class="string">                http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">                http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">                http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ç»„ä»¶æ‰«æ--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.yuefeng.anno&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--Aopè‡ªåŠ¨ä»£ç†--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-é€šçŸ¥ç±»æ³¨é‡Š"><a href="#2-é€šçŸ¥ç±»æ³¨é‡Š" class="headerlink" title="2.é€šçŸ¥ç±»æ³¨é‡Š"></a>2.é€šçŸ¥ç±»æ³¨é‡Š</h3><table><thead><tr><th>å‰ç½®é€šçŸ¥</th><th>@Before</th><th>ç”¨äºé…ç½®å‰ç½®é€šçŸ¥ã€‚æŒ‡å®šå¢å¼ºçš„æ–¹æ³•åœ¨åˆ‡å…¥ç‚¹æ–¹æ³•ä¹‹å‰æ‰§è¡Œ</th></tr></thead><tbody><tr><td>åç½®é€šçŸ¥</td><td>@AfterReturning</td><td>ç”¨äºé…ç½®åç½®é€šçŸ¥ã€‚æŒ‡å®šå¢å¼ºçš„æ–¹æ³•åœ¨åˆ‡å…¥ç‚¹æ–¹æ³•ä¹‹åæ‰§è¡Œ</td></tr><tr><td>ç¯ç»•é€šçŸ¥</td><td>@Around</td><td>ç”¨äºé…ç½®ç¯ç»•é€šçŸ¥ã€‚æŒ‡å®šå¢å¼ºçš„æ–¹æ³•åœ¨åˆ‡å…¥ç‚¹æ–¹æ³•ä¹‹å‰å’Œä¹‹åéƒ½æ‰§è¡Œ</td></tr><tr><td>å¼‚å¸¸æŠ›å‡ºé€šçŸ¥</td><td>@AfterThrowing</td><td>ç”¨äºé…ç½®å¼‚å¸¸æŠ›å‡ºé€šçŸ¥ã€‚æŒ‡å®šå¢å¼ºçš„æ–¹æ³•åœ¨å‡ºç°å¼‚å¸¸æ—¶æ‰§è¡Œ</td></tr><tr><td>æœ€ç»ˆé€šçŸ¥</td><td>@After</td><td>ç”¨äºé…ç½®æœ€ç»ˆé€šçŸ¥ã€‚æ— è®ºå¢å¼ºæ–¹å¼æ‰§è¡Œæ˜¯å¦æœ‰å¼‚å¸¸éƒ½ä¼šæ‰§è¡Œ</td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;myAspect&quot;)</span></span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">//æ ‡æ³¨å½“å‰çš„æ˜¯ä¸€ä¸ªåˆ‡é¢ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAspect</span> </span>&#123;</span><br><span class="line">        <span class="comment">//é…ç½®å‰ç½®é€šçŸ¥</span></span><br><span class="line">        <span class="meta">@Before(&quot;execution(* com.yuefeng.anno.*.*(..))&quot;)</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;before...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">@AfterReturning(&quot;execution(* com.yuefeng.anno.*.*(..))&quot;)</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturning</span><span class="params">()</span></span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;after....&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">@Around(&quot;execution(* com.yuefeng.anno.*.*(..))&quot;)</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Object <span class="title">around</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;aroundBefore....&quot;</span>);</span><br><span class="line">            Object proceed = pjp.proceed();<span class="comment">//åˆ‡ç‚¹æ–¹æ³•</span></span><br><span class="line">            System.out.println(<span class="string">&quot;aroundAfter....&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> proceed;</span><br><span class="line">    &#125;</span><br><span class="line">        <span class="meta">@AfterThrowing(&quot;execution(* com.yuefeng.anno.*.*(..))&quot;)</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterThrowing</span><span class="params">()</span></span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Throwing...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">@After(&quot;execution(* com.yuefeng.anno.*.*(..))&quot;)</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;final...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>æµ‹è¯•ç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;classpath:applicationContext-anno.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnnoTest</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Autowired</span></span><br><span class="line">        <span class="keyword">private</span> TargetInterface target;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Test</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">                target.save();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-æ³¨è§£é€šçŸ¥ç§ç±»å’Œåˆ‡ç‚¹è¡¨è¾¾å¼æŠ½å–"><a href="#3-æ³¨è§£é€šçŸ¥ç§ç±»å’Œåˆ‡ç‚¹è¡¨è¾¾å¼æŠ½å–" class="headerlink" title="3.æ³¨è§£é€šçŸ¥ç§ç±»å’Œåˆ‡ç‚¹è¡¨è¾¾å¼æŠ½å–"></a>3.æ³¨è§£é€šçŸ¥ç§ç±»å’Œåˆ‡ç‚¹è¡¨è¾¾å¼æŠ½å–</h3><ul><li>åŒ xml é…ç½® aop ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å°†åˆ‡ç‚¹è¡¨è¾¾å¼æŠ½å–ã€‚æŠ½å–æ–¹å¼æ˜¯åœ¨åˆ‡é¢å†…å®šä¹‰æ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•ä¸Šä½¿ç”¨@Pointcutæ³¨è§£å®šä¹‰åˆ‡ç‚¹è¡¨è¾¾å¼ï¼Œç„¶ååœ¨åœ¨å¢å¼ºæ³¨è§£ä¸­è¿›è¡Œå¼•ç”¨ã€‚å…·ä½“å¦‚ä¸‹ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;myAspect&quot;)</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAspect</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Before(&quot;myPoint()&quot;)</span> <span class="comment">//MyAspect.myPoint()æˆ–è€…myPoint()</span></span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;        </span><br><span class="line">     System.out.println(<span class="string">&quot;å‰ç½®ä»£ç å¢å¼º.....&quot;</span>);    </span><br><span class="line">     &#125;</span><br><span class="line">     <span class="meta">@Pointcut(&quot;execution(* com.itheima.aop.*.*(..))&quot;)</span>    </span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">myPoint</span><span class="params">()</span></span>&#123;</span><br><span class="line">     </span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Springæ³¨è§£å¼€å‘</title>
      <link href="2020/11/Spring%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91/"/>
      <url>2020/11/Spring%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91/</url>
      
        <content type="html"><![CDATA[<h1 id="1-Springæ³¨è§£å¼€å‘"><a href="#1-Springæ³¨è§£å¼€å‘" class="headerlink" title="1.Springæ³¨è§£å¼€å‘"></a>1.Springæ³¨è§£å¼€å‘</h1><h2 id="1-SPringåŸå§‹æ³¨è§£"><a href="#1-SPringåŸå§‹æ³¨è§£" class="headerlink" title="1.SPringåŸå§‹æ³¨è§£"></a>1.SPringåŸå§‹æ³¨è§£</h2><ul><li>Springæ˜¯è½»ä»£ç è€Œä¸­é…ç½®çš„æ¡†æ¶ï¼Œé…ç½®æ¯”è¾ƒç¹é‡ï¼Œå½±å“å¼€å‘æ•ˆç‡ï¼Œæ‰€ä»¥æ³¨è§£å¼€å‘æ˜¯ä¸€ç§è¶‹åŠ¿ï¼Œæ³¨è§£ä»£æ›¿Xmlé…ç½®æ–‡ä»¶å¯ä»¥ç®€åŒ–é…ç½®ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</li></ul><table><thead><tr><th align="left"><strong>æ³¨è§£</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td align="left">@Component</td><td>ä½¿ç”¨åœ¨ç±»ä¸Šç”¨äºå®ä¾‹åŒ–Bean</td></tr><tr><td align="left">@Controller</td><td>ä½¿ç”¨åœ¨webå±‚ç±»ä¸Šç”¨äºå®ä¾‹åŒ–Bean</td></tr><tr><td align="left">@Service</td><td>ä½¿ç”¨åœ¨serviceå±‚ç±»ä¸Šç”¨äºå®ä¾‹åŒ–Bean</td></tr><tr><td align="left">@Repository</td><td>ä½¿ç”¨åœ¨daoå±‚ç±»ä¸Šç”¨äºå®ä¾‹åŒ–Bean</td></tr><tr><td align="left">@Autowired</td><td>ä½¿ç”¨åœ¨å­—æ®µä¸Šç”¨äºæ ¹æ®ç±»å‹ä¾èµ–æ³¨å…¥</td></tr><tr><td align="left">@Qualifier</td><td>ç»“åˆ@Autowiredä¸€èµ·ä½¿ç”¨ç”¨äºæ ¹æ®åç§°è¿›è¡Œä¾èµ–æ³¨å…¥</td></tr><tr><td align="left">@Resource</td><td>ç›¸å½“äº@Autowired+@Qualifierï¼ŒæŒ‰ç…§åç§°è¿›è¡Œæ³¨å…¥</td></tr><tr><td align="left">@Value</td><td>æ³¨å…¥æ™®é€šå±æ€§</td></tr><tr><td align="left">@Scope</td><td>æ ‡æ³¨Beançš„ä½œç”¨èŒƒå›´</td></tr><tr><td align="left">@PostConstruct</td><td>ä½¿ç”¨åœ¨æ–¹æ³•ä¸Šæ ‡æ³¨è¯¥æ–¹æ³•æ˜¯Beançš„åˆå§‹åŒ–æ–¹æ³•</td></tr><tr><td align="left">@PreDestroy</td><td>ä½¿ç”¨åœ¨æ–¹æ³•ä¸Šæ ‡æ³¨è¯¥æ–¹æ³•æ˜¯Beançš„é”€æ¯æ–¹æ³•</td></tr></tbody></table><h3 id="1-ç”¨xmlæ–‡ä»¶é…ç½®Spring"><a href="#1-ç”¨xmlæ–‡ä»¶é…ç½®Spring" class="headerlink" title="1.ç”¨xmlæ–‡ä»¶é…ç½®Spring"></a>1.ç”¨xmlæ–‡ä»¶é…ç½®Spring</h3><h4 id="1-UserDaoå±‚"><a href="#1-UserDaoå±‚" class="headerlink" title="1.UserDaoå±‚"></a>1.UserDaoå±‚</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;save running...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-Userserviceå±‚"><a href="#2-Userserviceå±‚" class="headerlink" title="2.Userserviceå±‚"></a>2.Userserviceå±‚</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserDao</span><span class="params">(UserDao userDao)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userDao = userDao;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        userDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-Webå±‚"><a href="#3-Webå±‚" class="headerlink" title="3.Webå±‚"></a>3.Webå±‚</h4><ul><li>å‡çš„webå±‚ç”¨æ¥æµ‹è¯•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ApplicationContext app = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        UserService userService = app.getBean(UserService.class);</span><br><span class="line">        userService.save();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-xmlæ–‡ä»¶"><a href="#4-xmlæ–‡ä»¶" class="headerlink" title="4.xmlæ–‡ä»¶"></a>4.xmlæ–‡ä»¶</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.yuefeng.dao.impl.UserDaoImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.yuefeng.service.impl.UserServiceImpl&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>è¿è¡ŒæˆåŠŸ</strong></p><p><img src="../../../img/md_img/Spring%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91/1605775910344.png" alt="1605775910344"></p><h3 id="2-ç”¨æ³¨è§£é…ç½®Spring"><a href="#2-ç”¨æ³¨è§£é…ç½®Spring" class="headerlink" title="2.ç”¨æ³¨è§£é…ç½®Spring"></a>2.ç”¨æ³¨è§£é…ç½®Spring</h3><p>1.ç”¨Component  ä»£æ›¿æ ‡ç­¾</p><p>åŸæ¥åœ¨applicationContext.xmlä¸­&lt;bean&gt;æ ‡ç­¾ç”¨æ³¨è§£ä»£æ›¿</p><h4 id="1-userDaoå±‚"><a href="#1-userDaoå±‚" class="headerlink" title="1.userDaoå±‚"></a>1.userDaoå±‚</h4><p>@Component(â€œuserDaoâ€<strong>)ä»£æ›¿</strong></p><p>&lt;bean id=â€userDaoâ€ class=â€com.yuefeng.dao.impl.UserDaoImplâ€&gt;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;&lt;bean id&#x3D;&quot;userDao&quot; class&#x3D;&quot;com.itheima.dao.impl.UserDaoImpl&quot;&gt;&lt;&#x2F;bean&gt;</span><br><span class="line">@Component(&quot;userDao&quot;)</span><br><span class="line">public class UserDaoImpl implements UserDao &#123;</span><br><span class="line">    public void save() &#123;</span><br><span class="line">        System.out.println(&quot;save running...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2-Userserviceå±‚-1"><a href="#2-Userserviceå±‚-1" class="headerlink" title="2.Userserviceå±‚"></a>2.Userserviceå±‚</h4><p>1.@Component(â€œuserServiceâ€)      <strong>ä»£æ›¿</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.yuefeng.service.impl.UserServiceImpl&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.yuefeng.service.impl.UserServiceImpl&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2.</p><p>@Autowired</p><p>@Qualifier(â€œuserDaoâ€)  ä»£æ›¿</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;property name&#x3D;&quot;userDao&quot; ref&#x3D;&quot;userDao&quot;&gt;&lt;&#x2F;property&gt;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//&lt;bean id=&quot;userService&quot; class=&quot;com.yuefeng.service.impl.UserServiceImpl&quot;&gt;</span></span><br><span class="line"><span class="meta">@Component(&quot;userService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        userDao.save();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserDao</span><span class="params">(UserDao userDao)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userDao = userDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-xmlé…ç½®"><a href="#3-xmlé…ç½®" class="headerlink" title="3.xmlé…ç½®"></a>3.xmlé…ç½®</h4><ul><li>å‘Šè¯‰Springæ³¨è§£ç»„ä»¶æ‰«æ</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®ç»„ä»¶æ‰«æ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.yuefeng&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><hr><h2 id="2-Springæ–°æ³¨è§£"><a href="#2-Springæ–°æ³¨è§£" class="headerlink" title="2.Springæ–°æ³¨è§£"></a>2.Springæ–°æ³¨è§£</h2><table><thead><tr><th><strong>æ³¨è§£</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>@Configuration</td><td>ç”¨äºæŒ‡å®šå½“å‰ç±»æ˜¯ä¸€ä¸ª Spring  é…ç½®ç±»ï¼Œå½“åˆ›å»ºå®¹å™¨æ—¶ä¼šä»è¯¥ç±»ä¸ŠåŠ è½½æ³¨è§£</td></tr><tr><td>@ComponentScan</td><td>ç”¨äºæŒ‡å®š Spring  åœ¨åˆå§‹åŒ–å®¹å™¨æ—¶è¦æ‰«æçš„åŒ…ã€‚  ä½œç”¨å’Œåœ¨ Spring  çš„ xml é…ç½®æ–‡ä»¶ä¸­çš„  &lt;context:component-scan  base-package=â€com.itheimaâ€/&gt;ä¸€æ ·</td></tr><tr><td>@Bean</td><td>ä½¿ç”¨åœ¨æ–¹æ³•ä¸Šï¼Œæ ‡æ³¨å°†è¯¥æ–¹æ³•çš„è¿”å›å€¼å­˜å‚¨åˆ°  Spring  å®¹å™¨ä¸­</td></tr><tr><td>@PropertySource</td><td>ç”¨äºåŠ è½½.properties  æ–‡ä»¶ä¸­çš„é…ç½®</td></tr><tr><td>@Import</td><td>ç”¨äºå¯¼å…¥å…¶ä»–é…ç½®ç±»</td></tr></tbody></table>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Spring_iocå…¥é—¨</title>
      <link href="2020/11/Spring-ioc%E5%85%A5%E9%97%A8/"/>
      <url>2020/11/Spring-ioc%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="1-Spring-é…ç½®æ–‡ä»¶"><a href="#1-Spring-é…ç½®æ–‡ä»¶" class="headerlink" title="1.Spring é…ç½®æ–‡ä»¶"></a>1.Spring é…ç½®æ–‡ä»¶</h2><p>åŸºæœ¬å±æ€§</p><p>   idï¼šBeanå®ä¾‹åœ¨Springå®¹å™¨ä¸­çš„å”¯ä¸€æ ‡è¯†</p><p>   classï¼šBeançš„å…¨é™å®šåç§°</p><p>   scopeï¼šæŒ‡å¯¹è±¡çš„ä½œç”¨èŒƒå›´ï¼Œå–å€¼å¦‚ä¸‹ï¼š</p><p>â€‹       <strong>singletonï¼šé»˜è®¤å€¼ï¼Œå•ä¾‹çš„</strong></p><p>â€‹        <strong>prototypeï¼šå¤šä¾‹çš„</strong></p><p>â€‹        requestï¼š WEB é¡¹ç›®ä¸­ï¼ŒSpring åˆ›å»ºä¸€ä¸ª Bean çš„å¯¹è±¡ï¼Œå°†å¯¹è±¡å­˜å…¥åˆ° request åŸŸä¸­</p><p>â€‹        sessionï¼šWEB é¡¹ç›®ä¸­ï¼ŒSpring åˆ›å»ºä¸€ä¸ª Bean çš„å¯¹è±¡ï¼Œå°†å¯¹è±¡å­˜å…¥åˆ° session åŸŸä¸­</p><p>â€‹        global session: WEB é¡¹ç›®ä¸­ï¼Œåº”ç”¨åœ¨ Portlet ç¯å¢ƒï¼Œå¦‚æœæ²¡æœ‰ Portlet ç¯å¢ƒé‚£globalSessionç›¸å½“äº session      </p><h3 id="singletonå’Œprototoypeçš„åŒºåˆ«"><a href="#singletonå’Œprototoypeçš„åŒºåˆ«" class="headerlink" title="singletonå’Œprototoypeçš„åŒºåˆ«"></a>singletonå’Œprototoypeçš„åŒºåˆ«</h3><ol><li><p>å½“scopeçš„å–å€¼ä¸ºsingletonæ—¶</p><p>Beançš„å®ä¾‹åŒ–ä¸ªæ•°ï¼š1ä¸ª</p><p>Beançš„å®ä¾‹åŒ–æ—¶æœºï¼šå½“Springæ ¸å¿ƒæ–‡ä»¶è¢«åŠ è½½æ—¶ï¼Œå®ä¾‹åŒ–é…ç½®çš„Beanå®ä¾‹</p><p>Beançš„ç”Ÿå‘½å‘¨æœŸï¼š</p></li></ol><ul><li> å¯¹è±¡åˆ›å»ºï¼šå½“åº”ç”¨åŠ è½½ï¼Œåˆ›å»ºå®¹å™¨æ—¶ï¼Œå¯¹è±¡å°±è¢«åˆ›å»ºäº†</li><li>å¯¹è±¡è¿è¡Œï¼šåªè¦å®¹å™¨åœ¨ï¼Œå¯¹è±¡ä¸€ç›´æ´»ç€</li><li>å¯¹è±¡é”€æ¯ï¼šå½“åº”ç”¨å¸è½½ï¼Œé”€æ¯å®¹å™¨æ—¶ï¼Œå¯¹è±¡å°±è¢«é”€æ¯äº†</li></ul><ol start="2"><li><p>å½“scopeçš„å–å€¼ä¸ºprototypeæ—¶</p><p>Beançš„å®ä¾‹åŒ–ä¸ªæ•°ï¼šå¤šä¸ª</p><p>Beançš„å®ä¾‹åŒ–æ—¶æœºï¼šå½“è°ƒç”¨getBean()æ–¹æ³•æ—¶å®ä¾‹åŒ–Bean</p></li></ol><ul><li>å¯¹è±¡åˆ›å»ºï¼šå½“ä½¿ç”¨å¯¹è±¡æ—¶ï¼Œåˆ›å»ºæ–°çš„å¯¹è±¡å®ä¾‹</li><li>å¯¹è±¡è¿è¡Œï¼šåªè¦å¯¹è±¡åœ¨ä½¿ç”¨ä¸­ï¼Œå°±ä¸€ç›´æ´»ç€</li><li>å¯¹è±¡é”€æ¯ï¼šå½“å¯¹è±¡é•¿æ—¶é—´ä¸ç”¨æ—¶ï¼Œè¢« Java çš„åƒåœ¾å›æ”¶å™¨å›æ”¶äº†</li></ul><h3 id="Spring-çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#Spring-çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Spring çš„ç”Ÿå‘½å‘¨æœŸ"></a>Spring çš„ç”Ÿå‘½å‘¨æœŸ</h3><p>init-method ï¼šæŒ‡å®šç±»ä¸­çš„åˆå§‹åŒ–æ–¹æ³•åç§°</p><p>destroy-method ï¼š æŒ‡å®šç±»ä¸­é”€æ¯æ–¹æ³•åç§°  </p><p>åœ¨applicationContextä¸­</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.yuefeng.dao.impl.UserDaoImpl&quot;</span> <span class="attr">init-method</span>=<span class="string">&quot;init&quot;</span><span class="attr">destroy-method</span>=<span class="string">&quot;destroy&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2-Beanå®ä¾‹åŒ–çš„ä¸‰ç§æ–¹å¼"><a href="#2-Beanå®ä¾‹åŒ–çš„ä¸‰ç§æ–¹å¼" class="headerlink" title="2.Beanå®ä¾‹åŒ–çš„ä¸‰ç§æ–¹å¼"></a>2.Beanå®ä¾‹åŒ–çš„ä¸‰ç§æ–¹å¼</h2><h3 id="1-æ— å‚æ„é€ æ–¹æ³•å®ä¾‹åŒ–"><a href="#1-æ— å‚æ„é€ æ–¹æ³•å®ä¾‹åŒ–" class="headerlink" title="1.æ— å‚æ„é€ æ–¹æ³•å®ä¾‹åŒ–"></a>1.æ— å‚<strong>æ„é€ </strong>æ–¹æ³•å®ä¾‹åŒ–</h3><h3 id="2-å·¥å‚é™æ€æ–¹æ³•å®ä¾‹åŒ–"><a href="#2-å·¥å‚é™æ€æ–¹æ³•å®ä¾‹åŒ–" class="headerlink" title="2.å·¥å‚é™æ€æ–¹æ³•å®ä¾‹åŒ–"></a>2.å·¥å‚<strong>é™æ€</strong>æ–¹æ³•å®ä¾‹åŒ–</h3><p>factory-method</p><p>åˆ›å»ºä¸€ä¸ªå·¥å‚å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> userDao <span class="title">getUserDao</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> UserDaoImpl();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.yuefeng.dao.impl.StaticFactory&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;getUserDao&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="../../../img/md_img/Spring-ioc%E7%AC%94%E8%AE%B0/1604923158016.png" alt="1604923158016"></p><div class="note info flat"><p>åŒæ ·å¯ä»¥å®ç°userDaoæ–¹æ³•çš„è°ƒç”¨</p></div> <h3 id="3-å·¥å‚å®ä¾‹æ–¹æ³•å®ä¾‹åŒ–"><a href="#3-å·¥å‚å®ä¾‹æ–¹æ³•å®ä¾‹åŒ–" class="headerlink" title="3.å·¥å‚å®ä¾‹æ–¹æ³•å®ä¾‹åŒ–"></a>3.å·¥å‚å®ä¾‹æ–¹æ³•å®ä¾‹åŒ–</h3><p>åˆ›å»ºä¸€ä¸ªå®ä¾‹å·¥å‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DynamicFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  userDao <span class="title">getUserDao</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> UserDaoImpl();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;factory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.yuefeng.dao.impl.DynamicFactory&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">factory-bean</span>=<span class="string">&quot;factory&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;getUserDao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="../../../img/md_img/Spring-ioc%E7%AC%94%E8%AE%B0/1604923158016.png" alt="1604923158016"></p><div class="note info flat"><p>åŒæ ·å¯ä»¥å®ç°userDaoæ–¹æ³•çš„è°ƒç”¨</p></div> <hr><h2 id="3-ä¾èµ–æ³¨å…¥"><a href="#3-ä¾èµ–æ³¨å…¥" class="headerlink" title="3.ä¾èµ–æ³¨å…¥"></a>3.ä¾èµ–æ³¨å…¥</h2><h3 id="1-setæ–¹æ³•æ³¨å…¥"><a href="#1-setæ–¹æ³•æ³¨å…¥" class="headerlink" title="1.setæ–¹æ³•æ³¨å…¥"></a>1.setæ–¹æ³•æ³¨å…¥</h3><p>è¦è¢«æ³¨å…¥çš„å±‚æ¬¡ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªSetæ–¹æ³•å’Œ å¯¹è±¡ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> userDao userDao;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUuseserDao</span><span class="params">(userDao userDao)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.userDao = userDao;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.yuefeng.service.impl.UserServiceImpl&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">propproerty</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="note info flat"><p>propproerty çš„ name æ˜¯setUserDao çš„å°å†™</p><p>ref=â€userDaoâ€     â€”â€”-&gt;  æ˜¯å¼•ç”¨idå</p></div> <hr><h3 id="2-På‘½åç©ºé—´æ³¨å…¥"><a href="#2-På‘½åç©ºé—´æ³¨å…¥" class="headerlink" title="2.På‘½åç©ºé—´æ³¨å…¥"></a>2.På‘½åç©ºé—´æ³¨å…¥</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.yuefeng.dao.impl.UserDaoImpl&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.yuefeng.service.impl.UserServiceImpl&quot;</span> <span class="attr">p:userDao-ref</span>=<span class="string">&quot;userDao&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    ApplicationContext app = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">    UserService userService  = (UserService) app.getBean(<span class="string">&quot;userService&quot;</span>);</span><br><span class="line">userService.save();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="3-æœ‰å‚æ„é€ æ³¨å…¥"><a href="#3-æœ‰å‚æ„é€ æ³¨å…¥" class="headerlink" title="3.æœ‰å‚æ„é€ æ³¨å…¥"></a>3.æœ‰å‚æ„é€ æ³¨å…¥</h3><ul><li>åˆ›å»ºæœ‰å‚æ„é€ å’Œæ— å‚æ„é€ </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> userDao userDao;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    public void setUserDao(userDao userDao) &#123;</span></span><br><span class="line"><span class="comment">        this.userDao = userDao;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UserServiceImpl</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UserServiceImpl</span><span class="params">(userDao userDao)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userDao = userDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        userDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å®šä¹‰æœ‰å‚æ³¨å…¥</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.yuefeng.dao.impl.UserDaoImpl&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.yuefeng.service.impl.UserServiceImpl&quot;</span> &gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="note info flat"><p>name=â€userDaoâ€  â€”â€”-&gt;æ˜¯æ„é€ å†…éƒ¨å‚æ•°å </p><p>ref=â€userDaoâ€     â€”â€”-&gt;  æ˜¯å¼•ç”¨idå</p></div> <hr><h3 id="4-Beançš„ä¾èµ–æ³¨å…¥çš„æ•°æ®ç±»å‹"><a href="#4-Beançš„ä¾èµ–æ³¨å…¥çš„æ•°æ®ç±»å‹" class="headerlink" title="4.Beançš„ä¾èµ–æ³¨å…¥çš„æ•°æ®ç±»å‹"></a>4.Beançš„ä¾èµ–æ³¨å…¥çš„æ•°æ®ç±»å‹</h3><p>é™¤äº†å¯¹çš„å¼•ç”¨å¯ä»¥æ³¨å…¥ï¼Œæ™®é€šæ•°æ®ç±»å‹ï¼Œé›†åˆç­‰éƒ½å¯ä»¥åœ¨å®¹å™¨ä¸­è¿›è¡Œæ³¨å…¥</p><ul><li>æ™®é€šæ•°æ®ç±»å‹</li><li>å¼•ç”¨æ•°æ®ç±»å‹</li><li>é›†åˆæ•°æ®ç±»å‹</li></ul><hr><h3 id="5-æ³¨å…¥æ™®é€šæ•°æ®ç±»å‹"><a href="#5-æ³¨å…¥æ™®é€šæ•°æ®ç±»å‹" class="headerlink" title="5.æ³¨å…¥æ™®é€šæ•°æ®ç±»å‹"></a>5.æ³¨å…¥æ™®é€šæ•°æ®ç±»å‹</h3><ul><li>æ³¨å…¥æ™®é€šæ•°æ®ç±»å‹</li><li>è¿™é‡Œä½¿ç”¨setæ³¨å…¥</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">       <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.yuefeng.dao.impl.UserDaoImpl&quot;</span> &gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;zhangsan&quot;</span> /&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;18&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.yuefeng.service.impl.UserServiceImpl&quot;</span> &gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å®šä¹‰<strong>username</strong>å’Œ<strong>age</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title">userDao</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(username + <span class="string">&quot;---&gt;&quot;</span> + age);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*public UserDaoImpl() &#123;</span></span><br><span class="line"><span class="comment">        System.out.println(&quot;UserDaoImplè¢«åˆ›å»ºã€‚ã€‚&quot;);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="6-é›†åˆé…ç½®æ–‡ä»¶æ³¨å…¥"><a href="#6-é›†åˆé…ç½®æ–‡ä»¶æ³¨å…¥" class="headerlink" title="6.é›†åˆé…ç½®æ–‡ä»¶æ³¨å…¥"></a>6.é›†åˆé…ç½®æ–‡ä»¶æ³¨å…¥</h3><p>é›†åˆæ•°æ®ç±»å‹ï¼ˆListï¼‰çš„æ³¨å…¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;list&gt;&lt;&#x2F;list&gt;</span><br></pre></td></tr></table></figure><p>é›†åˆæ•°æ®ç±»å‹ï¼ˆMap&lt;String,User&gt; ï¼‰çš„æ³¨å…¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  &lt;map&gt;</span><br><span class="line">&lt;entry&gt;&lt;&#x2F;entry&gt;</span><br><span class="line">  &lt;&#x2F;map&gt;</span><br></pre></td></tr></table></figure><p>é›†åˆæ•°æ®ç±»å‹ï¼ˆPropertiesï¼‰çš„æ³¨å…¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;props&gt;</span><br><span class="line">  &lt;prop&gt;&lt;&#x2F;prop&gt;</span><br><span class="line">&lt;&#x2F;props&gt;</span><br></pre></td></tr></table></figure><h3 id="7-Springçš„é‡ç‚¹é…ç½®"><a href="#7-Springçš„é‡ç‚¹é…ç½®" class="headerlink" title="7.Springçš„é‡ç‚¹é…ç½®"></a>7.Springçš„é‡ç‚¹é…ç½®</h3><p><bean>æ ‡ç­¾</p><p>  idå±æ€§:åœ¨å®¹å™¨ä¸­Beanå®ä¾‹çš„å”¯ä¸€æ ‡è¯†ï¼Œä¸å…è®¸é‡å¤</p><p>  classå±æ€§:è¦å®ä¾‹åŒ–çš„Beançš„å…¨é™å®šå</p><p>  scopeå±æ€§:Beançš„ä½œç”¨èŒƒå›´ï¼Œå¸¸ç”¨æ˜¯Singleton(é»˜è®¤)å’Œprototype</p><p>  <property>æ ‡ç­¾ï¼šå±æ€§æ³¨å…¥</p><p>â€‹    nameå±æ€§ï¼šå±æ€§åç§°</p><p>â€‹    valueå±æ€§ï¼šæ³¨å…¥çš„æ™®é€šå±æ€§å€¼</p><p>â€‹    refå±æ€§ï¼šæ³¨å…¥çš„å¯¹è±¡å¼•ç”¨å€¼</p><p>â€‹    <list>æ ‡ç­¾</p><p>â€‹    <map>æ ‡ç­¾</p><p>â€‹    <properties>æ ‡ç­¾</p><p>  <constructor-arg>æ ‡ç­¾</p><p><import>æ ‡ç­¾:å¯¼å…¥å…¶ä»–çš„Springçš„åˆ†æ–‡ä»¶</p><h2 id="4-Springé…ç½®æ•°æ®æº"><a href="#4-Springé…ç½®æ•°æ®æº" class="headerlink" title="4.Springé…ç½®æ•°æ®æº"></a>4.Springé…ç½®æ•°æ®æº</h2><p>æ•°æ®æºï¼ˆè¿æ¥æ± ï¼‰çš„ä½œç”¨ </p><p>â€¢æ•°æ®æº(è¿æ¥æ± )æ˜¯æé«˜ç¨‹åºæ€§èƒ½å¦‚å‡ºç°çš„</p><p>â€¢äº‹å…ˆå®ä¾‹åŒ–æ•°æ®æºï¼Œåˆå§‹åŒ–éƒ¨åˆ†è¿æ¥èµ„æº</p><p>â€¢ä½¿ç”¨è¿æ¥èµ„æºæ—¶ä»æ•°æ®æºä¸­è·å–</p><p>â€¢ä½¿ç”¨å®Œæ¯•åå°†è¿æ¥èµ„æºå½’è¿˜ç»™æ•°æ®æº</p><p>â€¢å¸¸è§çš„æ•°æ®æº(è¿æ¥æ± )ï¼š<strong>DBCP</strong>ã€<strong>C3P0</strong>ã€<strong>BoneCP</strong>ã€<strong>Druid</strong>ç­‰</p><h3 id="1-æŠ½å–JDBCçš„æŠ½å–"><a href="#1-æŠ½å–JDBCçš„æŠ½å–" class="headerlink" title="1.æŠ½å–JDBCçš„æŠ½å–"></a>1.æŠ½å–JDBCçš„æŠ½å–</h3><p>å¯ä»¥å°†DataSourceçš„åˆ›å»ºæƒäº¤ç”±Springå®¹å™¨å»å®Œæˆ</p><p>lDataSourceæœ‰æ— å‚æ„é€ æ–¹æ³•ï¼Œè€ŒSpringé»˜è®¤å°±æ˜¯é€šè¿‡æ— å‚æ„é€ æ–¹æ³•å®ä¾‹åŒ–å¯¹è±¡çš„</p><p>lDataSourceè¦æƒ³ä½¿ç”¨éœ€è¦é€šè¿‡setæ–¹æ³•è®¾ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼Œè€ŒSpringå¯ä»¥é€šè¿‡setæ–¹æ³•è¿›è¡Œå­—ç¬¦ä¸²æ³¨å…¥</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/test&quot;</span>/&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>Jdbc</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="meta">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/test</span></span><br><span class="line"><span class="meta">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">jdbc.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure><h3 id="2-pringå®¹å™¨åŠ è½½propertiesæ–‡ä»¶"><a href="#2-pringå®¹å™¨åŠ è½½propertiesæ–‡ä»¶" class="headerlink" title="2.pringå®¹å™¨åŠ è½½propertiesæ–‡ä»¶"></a>2.pringå®¹å™¨åŠ è½½propertiesæ–‡ä»¶</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="comment">//æµ‹è¯•Springå®¹å™¨äº§ç”Ÿæ•°æ®æºå¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    ApplicationContext app = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">    DataSource dataSource = app.getBean(DataSource.class);</span><br><span class="line">    Connection connection = dataSource.getConnection();</span><br><span class="line">    System.out.println(connection);</span><br><span class="line">    connection.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>applicationContext.xmlåŠ è½½jdbc.propertiesé…ç½®æ–‡ä»¶è·å¾—è¿æ¥ä¿¡æ¯</p><p>é¦–å…ˆï¼Œéœ€è¦å¼•å…¥contextå‘½åç©ºé—´å’Œçº¦æŸè·¯å¾„ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å‘½åç©ºé—´ï¼šxmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class="line">çº¦æŸè·¯å¾„ï¼šhttp://www.springframework.org/schema/context                          http://www.springframework.org/schema/context/spring-context.xsd</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="tag"><span class="string">    $&#123;jdbc.driver&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;xx.properties&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;key&#125;&quot;</span>/&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>JDBCç¬”è®°</title>
      <link href="2020/11/JDBC%E7%AC%94%E8%AE%B0/"/>
      <url>2020/11/JDBC%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<hr><!-- <div class="note success flat"><p>success æç¤ºå—æ ‡ç±¤</p></div><div class="note info flat"><p>info æç¤ºå—æ ‡ç±¤</p></div> --><h1 id="ä¸€-JDBC"><a href="#ä¸€-JDBC" class="headerlink" title="ä¸€.JDBC"></a>ä¸€.JDBC</h1><h2 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1.ç®€ä»‹"></a>1.ç®€ä»‹</h2><p>Javaæ•°æ®åº“è¿æ¥ï¼Œ<strong>ï¼ˆJava Database Connectivityï¼Œç®€ç§°JDBCï¼‰</strong>æ˜¯Javaè¯­è¨€ä¸­ç”¨æ¥è§„èŒƒå®¢æˆ·ç«¯ç¨‹åºå¦‚ä½•æ¥è®¿é—®æ•°æ®åº“çš„åº”ç”¨ç¨‹åºæ¥å£ï¼Œæä¾›äº†è¯¸å¦‚æŸ¥è¯¢å’Œæ›´æ–°æ•°æ®åº“ä¸­æ•°æ®çš„æ–¹æ³•ã€‚JDBCä¹Ÿæ˜¯Sun Microsystemsçš„å•†æ ‡ã€‚æˆ‘ä»¬é€šå¸¸è¯´çš„JDBCæ˜¯é¢å‘å…³ç³»å‹æ•°æ®åº“çš„ </p><h2 id="2-ä¸»è¦ç”¨é€”"><a href="#2-ä¸»è¦ç”¨é€”" class="headerlink" title="2.ä¸»è¦ç”¨é€”"></a>2.ä¸»è¦ç”¨é€”</h2><ol><li>ä¸æ•°æ®åº“å»ºç«‹è¿æ¥</li><li>å‘é€ SQL è¯­å¥</li><li>å¤„ç†ç»“æœ</li></ol><h2 id="3-å»ºç«‹è¿æ¥"><a href="#3-å»ºç«‹è¿æ¥" class="headerlink" title="3.å»ºç«‹è¿æ¥"></a>3.å»ºç«‹è¿æ¥</h2><p><strong>3.0å¯¼å…¥é©±åŠ¨jaråŒ…</strong></p><ol><li>æŠŠjdbcé©±åŠ¨åŒ…å¯¼å…¥libsç›®å½•ä¸‹</li><li>å³é”® Add as Library<img src="../../../img/md_img/JDBC%E7%AC%94%E8%AE%B0/1604806797851.png" alt="1604806797851"><img src="../../../img/md_img/JDBC%E7%AC%94%E8%AE%B0/1604806867867.png" alt="1604806867867">    </li></ol><hr><h3 id="3-1åŠ è½½ï¼ˆæ³¨å†Œï¼‰é©±åŠ¨"><a href="#3-1åŠ è½½ï¼ˆæ³¨å†Œï¼‰é©±åŠ¨" class="headerlink" title="3.1åŠ è½½ï¼ˆæ³¨å†Œï¼‰é©±åŠ¨"></a>3.1åŠ è½½ï¼ˆæ³¨å†Œï¼‰é©±åŠ¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;æ³¨å†Œé©±åŠ¨</span><br><span class="line">Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br></pre></td></tr></table></figure><ul><li><strong>Class.forName</strong> æ–¹æ³•çš„ä½œç”¨ï¼Œå°±æ˜¯åˆå§‹åŒ–ç»™å®šçš„ç±»ã€‚è€Œæˆ‘ä»¬ç»™å®šçš„ MySQL çš„ Driver ç±»ä¸­ï¼Œå®ƒåœ¨é™æ€ä»£ç å—ä¸­é€šè¿‡ JDBC çš„ DriverManager æ³¨å†Œäº†ä¸€ä¸‹é©±åŠ¨ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ JDBC çš„é©±åŠ¨ç®¡ç†å™¨æ³¨å†Œ mysql é©±åŠ¨ï¼Œä»è€Œä»£æ›¿ä½¿ç”¨ <strong>Class.forName</strong>ã€‚ </li></ul><h3 id="3-2å»ºç«‹é“¾æ¥"><a href="#3-2å»ºç«‹é“¾æ¥" class="headerlink" title="3.2å»ºç«‹é“¾æ¥"></a>3.2å»ºç«‹é“¾æ¥</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;è·å–æ•°æ®åº“è¿æ¥å¯¹è±¡        </span><br><span class="line">Connection conn &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;mydb&quot;, &quot;root&quot;, &quot;root&quot;);</span><br></pre></td></tr></table></figure><p>DriverManager.getConnection() æ–¹æ³•ç”¨äºè·å¾—è¯•å›¾å»ºç«‹åˆ°æŒ‡å®šæ•°æ®åº“ URL çš„è¿æ¥ã€‚DriverManager è¯•å›¾ä»å·²æ³¨å†Œçš„ JDBC é©±åŠ¨ç¨‹åºé›†ä¸­é€‰æ‹©ä¸€ä¸ªé€‚å½“çš„é©±åŠ¨ç¨‹åºã€‚ </p><h3 id="3-3æ‰§è¡ŒSQLè¯­å¥"><a href="#3-3æ‰§è¡ŒSQLè¯­å¥" class="headerlink" title="3.3æ‰§è¡ŒSQLè¯­å¥"></a>3.3æ‰§è¡ŒSQLè¯­å¥</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;å†™sqlè¯­å¥</span><br><span class="line">   String sql &#x3D; &quot;update student set age &#x3D; 18 where name&#x3D; &#39;yuefeng&#39;&quot;;</span><br></pre></td></tr></table></figure><ul><li>å®šä¹‰å­—ç¬¦ä¸²ç±»å‹çš„sqlè¯­å¥</li></ul><h3 id="3-4å¤„ç†ç»“æœé›†"><a href="#3-4å¤„ç†ç»“æœé›†" class="headerlink" title="3.4å¤„ç†ç»“æœé›†"></a>3.4å¤„ç†ç»“æœé›†</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Statement stmt &#x3D; conn.createStatement();</span><br><span class="line">int count &#x3D; stmt.executeUpdate(sql);</span><br><span class="line">System.out.println(count);</span><br></pre></td></tr></table></figure><h3 id="3-5å…³é—­æ•°æ®åº“"><a href="#3-5å…³é—­æ•°æ®åº“" class="headerlink" title="3.5å…³é—­æ•°æ®åº“"></a>3.5å…³é—­æ•°æ®åº“</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">stmt.close();</span><br><span class="line">conn.close();</span><br></pre></td></tr></table></figure><h2 id="4-JDBCå¯¹è±¡æ–¹æ³•"><a href="#4-JDBCå¯¹è±¡æ–¹æ³•" class="headerlink" title="4.JDBCå¯¹è±¡æ–¹æ³•"></a>4.JDBCå¯¹è±¡æ–¹æ³•</h2><h3 id="1-getConnection"><a href="#1-getConnection" class="headerlink" title="1.getConnection"></a>1.getConnection</h3><ul><li><p>static Connection      getConnection(String url, String user, String password) ;</p></li><li><p><strong>url:æŒ‡å®šé“¾æ¥çš„æ•°æ®åº“</strong> </p><ul><li>æ ¼å¼ â€œ <strong>jdbc:mysql://(IPåœ°å€):(ç«¯å£å·)/(æ•°æ®åº“åç§°)â€</strong></li><li>(IPåœ°å€):(ç«¯å£å·) :é»˜è®¤localhost:3306 å¯ä»¥ä¸å†™</li></ul></li><li><p>user: æ•°æ®åº“ç”¨æˆ·å</p></li><li><p>password: æ•°æ®åº“å¯†ç </p></li></ul><h3 id="2-Connectionï¼šæ•°æ®åº“è¿æ¥å¯¹è±¡"><a href="#2-Connectionï¼šæ•°æ®åº“è¿æ¥å¯¹è±¡" class="headerlink" title="2.Connectionï¼šæ•°æ®åº“è¿æ¥å¯¹è±¡"></a>2.Connectionï¼šæ•°æ®åº“è¿æ¥å¯¹è±¡</h3><p>1.åŠŸèƒ½ï¼š</p><ol><li>è·å–æ‰§è¡Œsql çš„å¯¹è±¡<pre><code>     * Statement createStatement()     * PreparedStatement prepareStatement(String sql)   2. ç®¡ç†äº‹åŠ¡ï¼š     * å¼€å¯äº‹åŠ¡ï¼šsetAutoCommit(boolean autoCommit) ï¼šè°ƒç”¨è¯¥æ–¹æ³•è®¾ç½®å‚æ•°ä¸ºfalseï¼Œå³å¼€å¯äº‹åŠ¡     * æäº¤äº‹åŠ¡ï¼šcommit()      * å›æ»šäº‹åŠ¡ï¼šrollback() </code></pre></li></ol><hr><p>3.Statementï¼šæ‰§è¡Œsqlçš„å¯¹è±¡</p><ol><li><p>boolean execute(String sql) ï¼šå¯ä»¥æ‰§è¡Œä»»æ„çš„sql äº†è§£ </p></li><li><p>int executeUpdate(String sql) ï¼š</p><ul><li><p>æ‰§è¡ŒDMLï¼ˆinsertã€updateã€deleteï¼‰è¯­å¥ã€DDL(createï¼Œalterã€drop)è¯­å¥</p></li><li><p>è¿”å›å€¼ï¼šå½±å“çš„è¡Œæ•°ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªå½±å“çš„è¡Œæ•°åˆ¤æ–­DMLè¯­å¥æ˜¯å¦æ‰§è¡ŒæˆåŠŸ è¿”å›å€¼&gt;0çš„åˆ™æ‰§è¡ŒæˆåŠŸï¼Œåä¹‹ï¼Œåˆ™å¤±è´¥ã€‚</p></li></ul></li><li><p>ResultSet executeQuery(String sql)  ï¼šæ‰§è¡ŒDQLï¼ˆselect)è¯­å¥</p></li></ol><hr><h1 id="äºŒ-JDBCè¿æ¥æ± "><a href="#äºŒ-JDBCè¿æ¥æ± " class="headerlink" title="äºŒ.JDBCè¿æ¥æ± "></a>äºŒ.JDBCè¿æ¥æ± </h1><ul><li>æ¦‚å¿µ : å°±æ˜¯ä¸€ä¸ªé›†åˆ ,å­˜æ”¾æ•°æ®åº“è¿æ¥çš„å®¹å™¨</li><li>å¥½å¤„ : èŠ‚çº¦èµ„æº ,ç”¨æˆ·è®¿é—®é«˜æ•ˆ</li></ul><p> 1.æ¥å£ : DataSource</p><pre><code> 1. æ–¹æ³• :       1.  è·å–è¿æ¥ :    getconnection();      2. å½’è¿˜è¿æ¥ :     Connection.close(); 2. æ•°æ®åº“è¿æ¥æ± :      1. C3P0      2. Druid </code></pre><ol><li><p>Druid è¿æ¥æ± </p></li><li><p>å¯¼å…¥jaråŒ… druid-1.0.09.jar  </p><p>â€‹    <div class="note default flat"><p>åˆ«å¿˜è®°å¯¼å…¥æ•°æ®åº“é©±åŠ¨jaråŒ…</p></div></p><ol start="3"><li>å®šä¹‰é…ç½®æ–‡ä»¶ï¼š</li></ol><ul><li>æ˜¯propertieså½¢å¼çš„</li><li>å¯ä»¥å«ä»»æ„åç§°ï¼Œå¯ä»¥æ”¾åœ¨ä»»æ„ç›®å½•ä¸‹</li></ul><ol start="4"><li><p>åŠ è½½é…ç½®æ–‡ä»¶</p><p>InputStream is = JDBCUtils.class.getClassLoader().getResourceAsStream(â€œdruid.propertiesâ€);<br>pp.load(is);</p></li><li><p>è·å–è¿æ¥æ± å¯¹è±¡<br>ds = DruidDataSourceFactory.createDataSource(pp);</p></li><li><p>å¾—åˆ°è¿æ¥å¯¹è±¡</p><p>public static Connection getConnection() throws SQLException {  </p><p> return ds.getConnection();</p><p>}</p></li></ol></li></ol><hr><h1 id="ä¸‰-Jdbc-Utilsç±»"><a href="#ä¸‰-Jdbc-Utilsç±»" class="headerlink" title="ä¸‰.Jdbc Utilsç±»"></a>ä¸‰.Jdbc Utilsç±»</h1><ul><li>ç›®çš„ï¼šç®€åŒ–ä¹¦å†™</li><li>åˆ†æï¼š<ol><li><p>æ³¨å†Œé©±åŠ¨ä¹ŸæŠ½å–</p></li><li><p>æŠ½å–ä¸€ä¸ªæ–¹æ³•è·å–è¿æ¥å¯¹è±¡</p><p> åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶</p><ul><li><p>JDBC.Properties</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">driverClassName&#x3D;com.mysql.jdbc.Driver</span><br><span class="line">url&#x3D;jdbc:mysql:&#x2F;&#x2F;&#x2F;database_name</span><br><span class="line">username&#x3D;root</span><br><span class="line">password&#x3D;root</span><br><span class="line">initialSize&#x3D;5</span><br><span class="line">maxActive&#x3D;10</span><br><span class="line">maxWait&#x3D;3000</span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ªJDBC Utilsç±»</p></li><li><p>JDBC Utilsç±»</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">import com.alibaba.druid.pool.DruidDataSourceFactory;</span><br><span class="line"></span><br><span class="line">import javax.sql.DataSource;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.InputStream;</span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">import java.util.Properties;</span><br><span class="line"></span><br><span class="line">&#x2F;*</span><br><span class="line">1. å£°æ˜é™æ€æ•°æ®æºæˆå‘˜å˜é‡</span><br><span class="line">2. åˆ›å»ºè¿æ¥æ± å¯¹è±¡</span><br><span class="line">3. å®šä¹‰å…¬æœ‰çš„å¾—åˆ°æ•°æ®æºçš„æ–¹æ³•</span><br><span class="line">4. å®šä¹‰å¾—åˆ°è¿æ¥å¯¹è±¡çš„æ–¹æ³•</span><br><span class="line">5. å®šä¹‰å…³é—­èµ„æºçš„æ–¹æ³•</span><br><span class="line"> *&#x2F;</span><br><span class="line">public class JDBCUtils &#123;</span><br><span class="line">&#x2F;&#x2F; 1.å£°æ˜é™æ€æ•°æ®æºæˆå‘˜å˜é‡</span><br><span class="line">private static DataSource ds;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 2. åˆ›å»ºè¿æ¥æ± å¯¹è±¡</span><br><span class="line">static &#123;</span><br><span class="line">&#x2F;&#x2F; åŠ è½½é…ç½®æ–‡ä»¶ä¸­çš„æ•°æ®</span><br><span class="line">InputStream is &#x3D; JDBCUtils.class.getClassLoader().getResourceAsStream(&quot;druid.properties&quot;);</span><br><span class="line">Properties pp &#x3D; new Properties();</span><br><span class="line">try &#123;</span><br><span class="line">pp.load(is);</span><br><span class="line">&#x2F;&#x2F; åˆ›å»ºè¿æ¥æ± ï¼Œä½¿ç”¨é…ç½®æ–‡ä»¶ä¸­çš„å‚æ•°</span><br><span class="line">ds &#x3D; DruidDataSourceFactory.createDataSource(pp);</span><br><span class="line">&#125; catch (IOException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125; catch (Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 3. å®šä¹‰å…¬æœ‰çš„å¾—åˆ°æ•°æ®æºçš„æ–¹æ³•</span><br><span class="line">public static DataSource getDataSource() &#123;</span><br><span class="line">return ds;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 4. å®šä¹‰å¾—åˆ°è¿æ¥å¯¹è±¡çš„æ–¹æ³•</span><br><span class="line">public static Connection getConnection() throws SQLException &#123;</span><br><span class="line">return ds.getConnection();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 5.å®šä¹‰å…³é—­èµ„æºçš„æ–¹æ³•</span><br><span class="line">public static void close(Connection conn, Statement stmt, ResultSet rs) &#123;</span><br><span class="line">if (rs !&#x3D; null) &#123;</span><br><span class="line">try &#123;</span><br><span class="line">rs.close();</span><br><span class="line">&#125; catch (SQLException e) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if (stmt !&#x3D; null) &#123;</span><br><span class="line">try &#123;</span><br><span class="line">stmt.close();</span><br><span class="line">&#125; catch (SQLException e) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if (conn !&#x3D; null) &#123;</span><br><span class="line">try &#123;</span><br><span class="line">conn.close();</span><br><span class="line">&#125; catch (SQLException e) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 6.é‡è½½å…³é—­æ–¹æ³•</span><br><span class="line">public static void close(Connection conn, Statement stmt) &#123;</span><br><span class="line">close(conn, stmt, null);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul></li></ol></li></ul><hr><hr><h1 id="å››-Spring-JDBC"><a href="#å››-Spring-JDBC" class="headerlink" title="å››.Spring  JDBC"></a>å››.Spring  JDBC</h1><h2 id="1-JDBC-Template"><a href="#1-JDBC-Template" class="headerlink" title="1.JDBC Template"></a>1.JDBC Template</h2><ol><li><p>å¯¼å…¥JaråŒ…</p></li><li><p>åˆ›å»ºJdbc Template å¯¹è±¡.</p><ul><li>JdbcTemplate template = new JdbcTemplate(ds);</li></ul></li><li><p>è°ƒç”¨JdbcTemplateçš„æ–¹æ³•æ¥å®Œæˆå¢åˆ æ”¹æŸ¥çš„æ“ä½œ</p><ul><li>update() : æ‰§è¡ŒDMlè¯­å¥ å¢åˆ æ”¹ è¯­å¥</li><li>queryForMap() : æŸ¥è¯¢ç»“æœå°è£…ä¸ºMapé›†åˆ</li><li>queryForLIst() : æŸ¥è¯¢ç»“æœå°è£…ä¸ºLIsté›†åˆ</li><li>query():æŸ¥è¯¢ç»“æœå°è£…ä¸ºJavaBeané›†åˆ</li><li>queryForObject():æŸ¥è¯¢ç»“æœå°è£…ä¸ºå¯¹è±¡</li></ul></li></ol><h3 id="update-è¯­å¥"><a href="#update-è¯­å¥" class="headerlink" title="update()è¯­å¥"></a>update()è¯­å¥</h3><ul><li>æ‰§è¡ŒDMlè¯­å¥ å¢åˆ æ”¹ è¯­å¥</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public class Test &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">         JdbcTemplate template &#x3D; new JdbcTemplate(JDBCUtils.getDataSource());</span><br><span class="line">            String sql &#x3D; &quot;update tab_user set status &#x3D; ?,name &#x3D; ? where uid &#x3D; ?&quot;;</span><br><span class="line">            template.update(sql, &quot;V&quot;,&quot;æœˆå³°&quot;,&quot;25&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="queryForMap"><a href="#queryForMap" class="headerlink" title="queryForMap()"></a>queryForMap()</h3><ul><li>queryForMap() : æŸ¥è¯¢ç»“æœå°è£…ä¸ºMapé›†åˆ</li><li>å°†åˆ—åä½œä¸ºkeyï¼Œå°†å€¼ä½œä¸ºvalue å°†è¿™æ¡è®°å½•å°è£…ä¸ºä¸€ä¸ªmapé›†åˆ</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class Test &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">         JdbcTemplate template &#x3D; new JdbcTemplate(JDBCUtils.getDataSource());</span><br><span class="line">            String sql &#x3D; &quot;select * from tab_user where uid &#x3D; ? &quot;;</span><br><span class="line">        Map&lt;String, Object&gt; map &#x3D; template.queryForMap(sql, 25);</span><br><span class="line">        System.out.println(map);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h3 id="queryForLIst"><a href="#queryForLIst" class="headerlink" title="queryForLIst()"></a>queryForLIst()</h3><ul><li>queryForLIst() : æŸ¥è¯¢ç»“æœå°è£…ä¸ºLIsté›†åˆ</li><li>å°†æ¯ä¸€æ¡è®°å½•å°è£…ä¸ºä¸€ä¸ªMapé›†åˆï¼Œå†å°†Mapé›†åˆè£…è½½åˆ°Listé›†åˆä¸­</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class Test &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">         JdbcTemplate template &#x3D; new JdbcTemplate(JDBCUtils.getDataSource());</span><br><span class="line">            String sql &#x3D; &quot;select * from tab_user&quot;;</span><br><span class="line">        List&lt;Map&lt;String, Object&gt;&gt; list &#x3D; template.queryForList(sql);</span><br><span class="line">        for (Map&lt;String, Object&gt; map : list) &#123;</span><br><span class="line">            System.out.println(map);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="query"><a href="#query" class="headerlink" title="query()"></a>query()</h3><ul><li>query():æŸ¥è¯¢ç»“æœå°è£…ä¸ºJavaBeané›†åˆ</li><li>queryçš„å‚æ•°ï¼šRowMapper<ul><li>ä¸€èˆ¬æˆ‘ä»¬ä½¿ç”¨BeanPropertyRowMapperå®ç°ç±»ã€‚å¯ä»¥å®Œæˆæ•°æ®åˆ°JavaBeançš„è‡ªåŠ¨å°è£…</li><li>new BeanPropertyRowMapper&lt;ç±»å‹&gt;(ç±»å‹.class)</li></ul></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class Test &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        JdbcTemplate template &#x3D; new JdbcTemplate(JDBCUtils.getDataSource());</span><br><span class="line">        String sql &#x3D; &quot;select * from tab_user  &quot;;</span><br><span class="line"></span><br><span class="line">        List&lt;User&gt; query &#x3D; template.query(sql, new BeanPropertyRowMapper&lt;User&gt;(User.class));</span><br><span class="line">        for (User user : query) &#123;</span><br><span class="line">            System.out.println(user.getUsername());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="queryForObject"><a href="#queryForObject" class="headerlink" title="queryForObject()"></a>queryForObject()</h3><ul><li>queryForObject():æŸ¥è¯¢ç»“æœå°è£…ä¸ºå¯¹è±¡</li><li>ä¸€èˆ¬ç”¨äºèšåˆå‡½æ•°çš„æŸ¥è¯¢</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class Test &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        JdbcTemplate template &#x3D; new JdbcTemplate(JDBCUtils.getDataSource());</span><br><span class="line">        String sql &#x3D; &quot;select count(uid) from tab_user  &quot;;</span><br><span class="line"></span><br><span class="line">        Long count &#x3D; template.queryForObject(sql, Long.class);</span><br><span class="line">        System.out.println(count);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Jqueryç¬”è®°</title>
      <link href="2020/10/JQuery%E7%AC%94%E8%AE%B0/"/>
      <url>2020/10/JQuery%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸€-JQuery-é€‰æ‹©å™¨"><a href="#ä¸€-JQuery-é€‰æ‹©å™¨" class="headerlink" title="ä¸€.JQuery_é€‰æ‹©å™¨"></a>ä¸€.JQuery_é€‰æ‹©å™¨</h3><h4 id="1-åŸºæœ¬é€‰æ‹©å™¨"><a href="#1-åŸºæœ¬é€‰æ‹©å™¨" class="headerlink" title="1.åŸºæœ¬é€‰æ‹©å™¨"></a>1.åŸºæœ¬é€‰æ‹©å™¨</h4><ol><li>åŸºæœ¬é€‰æ‹©å™¨<ol start="2"><li>æ ‡ç­¾é€‰æ‹©å™¨ï¼ˆå…ƒç´ é€‰æ‹©å™¨ï¼‰<ul><li>è¯­æ³•ï¼š $(â€œhtmlæ ‡ç­¾åâ€) è·å¾—æ‰€æœ‰åŒ¹é…æ ‡ç­¾åç§°çš„å…ƒç´ </li></ul></li><li>idé€‰æ‹©å™¨ <ul><li>è¯­æ³•ï¼š $(â€œ#idçš„å±æ€§å€¼â€) è·å¾—ä¸æŒ‡å®šidå±æ€§å€¼åŒ¹é…çš„å…ƒç´ </li></ul></li><li>ç±»é€‰æ‹©å™¨<ul><li>è¯­æ³•ï¼š $(â€œ.classçš„å±æ€§å€¼â€) è·å¾—ä¸æŒ‡å®šçš„classå±æ€§å€¼åŒ¹é…çš„å…ƒç´ </li></ul></li><li>å¹¶é›†é€‰æ‹©å™¨ï¼š<ul><li>è¯­æ³•ï¼š $(â€œé€‰æ‹©å™¨1,é€‰æ‹©å™¨2â€¦.â€) è·å–å¤šä¸ªé€‰æ‹©å™¨é€‰ä¸­çš„æ‰€æœ‰å…ƒç´ </li></ul></li></ol></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#x2F;&#x2F; &lt;input type&#x3D;&quot;button&quot; value&#x3D;&quot;æ”¹å˜ id ä¸º one çš„å…ƒç´ çš„èƒŒæ™¯è‰²ä¸º çº¢è‰²&quot;  id&#x3D;&quot;b1&quot;&#x2F;&gt;</span><br><span class="line">&#x2F;&#x2F; &lt;input type&#x3D;&quot;button&quot; value&#x3D;&quot; æ”¹å˜å…ƒç´ åä¸º &lt;div&gt; çš„æ‰€æœ‰å…ƒç´ çš„èƒŒæ™¯è‰²ä¸º çº¢è‰²&quot;  id&#x3D;&quot;b2&quot;&#x2F;&gt;</span><br><span class="line">&#x2F;&#x2F; &lt;input type&#x3D;&quot;button&quot; value&#x3D;&quot; æ”¹å˜ class ä¸º mini çš„æ‰€æœ‰å…ƒç´ çš„èƒŒæ™¯è‰²ä¸º çº¢è‰²&quot;  id&#x3D;&quot;b3&quot;&#x2F;&gt;</span><br><span class="line">&#x2F;&#x2F; &lt;input type&#x3D;&quot;button&quot; value&#x3D;&quot; æ”¹å˜æ‰€æœ‰çš„&lt;span&gt;å…ƒç´ å’Œ id ä¸º two çš„å…ƒç´ çš„èƒŒæ™¯è‰²ä¸ºçº¢è‰²&quot;  id&#x3D;&quot;b4&quot;&#x2F;&gt;</span><br><span class="line"></span><br><span class="line">$(function () &#123;</span><br><span class="line">    $(&quot;#b1&quot;).click(function () &#123;</span><br><span class="line">        $(&quot;#one&quot;).css(&quot;backgroundColor&quot;,&quot;red&quot;);</span><br><span class="line">    &#125;)</span><br><span class="line">    $(&quot;#b2&quot;).click(function () &#123;</span><br><span class="line">        $(&quot;div&quot;).css(&quot;backgroundColor&quot;,&quot;red&quot;);</span><br><span class="line">    &#125;)</span><br><span class="line">    $(&quot;#b3&quot;).click(function () &#123;</span><br><span class="line">        $(&quot;.mini&quot;).css(&quot;backgroundColor&quot;,&quot;red&quot;);</span><br><span class="line">    &#125;)</span><br><span class="line">    $(&quot;#b4&quot;).click(function () &#123;</span><br><span class="line">        $(&quot;span,.two&quot;).css(&quot;backgroundColor&quot;,&quot;red&quot;);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><hr><h4 id="2-å±‚çº§é€‰æ‹©å™¨"><a href="#2-å±‚çº§é€‰æ‹©å™¨" class="headerlink" title="2.å±‚çº§é€‰æ‹©å™¨"></a>2.å±‚çº§é€‰æ‹©å™¨</h4><ol><li>åä»£é€‰æ‹©å™¨<ul><li>è¯­æ³•ï¼š $(â€œA B â€œ) é€‰æ‹©Aå…ƒç´ å†…éƒ¨çš„æ‰€æœ‰Bå…ƒç´         </li></ul></li><li>å­é€‰æ‹©å™¨<ul><li>è¯­æ³•ï¼š $(â€œA &gt; Bâ€) é€‰æ‹©Aå…ƒç´ å†…éƒ¨çš„æ‰€æœ‰Bå­å…ƒç´ </li></ul></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; &lt;input type&#x3D;&quot;button&quot; value&#x3D;&quot; æ”¹å˜ &lt;body&gt; å†…æ‰€æœ‰ &lt;div&gt; çš„èƒŒæ™¯è‰²ä¸ºçº¢è‰²&quot;  id&#x3D;&quot;b1&quot;&#x2F;&gt;</span><br><span class="line">&#x2F;&#x2F; &lt;input type&#x3D;&quot;button&quot; value&#x3D;&quot; æ”¹å˜ &lt;body&gt; å†…å­ &lt;div&gt; çš„èƒŒæ™¯è‰²ä¸º çº¢è‰²&quot;  id&#x3D;&quot;b2&quot;&#x2F;&gt;</span><br><span class="line">$(function () &#123;</span><br><span class="line">    $(&quot;#b1&quot;).click(function () &#123;</span><br><span class="line">    $(&quot;body div&quot;).css(&quot;backgroundColor&quot;,&quot;red&quot;)</span><br><span class="line">    &#125;)</span><br><span class="line">    $(&quot;#b2&quot;).click(function () &#123;</span><br><span class="line">        $(&quot;body&gt;div&quot;).css(&quot;backgroundColor&quot;,&quot;red&quot;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><hr><h4 id="3-å±æ€§é€‰æ‹©å™¨"><a href="#3-å±æ€§é€‰æ‹©å™¨" class="headerlink" title="3. å±æ€§é€‰æ‹©å™¨"></a>3. å±æ€§é€‰æ‹©å™¨</h4><ol><li>å±æ€§åç§°é€‰æ‹©å™¨ <ul><li>è¯­æ³•ï¼š $(â€œA[å±æ€§å]â€) åŒ…å«æŒ‡å®šå±æ€§çš„é€‰æ‹©å™¨</li></ul></li><li>å±æ€§é€‰æ‹©å™¨<ul><li>è¯­æ³•ï¼š $(â€œA[å±æ€§å=â€™å€¼â€™]â€) åŒ…å«æŒ‡å®šå±æ€§ç­‰äºæŒ‡å®šå€¼çš„é€‰æ‹©å™¨</li></ul></li><li>å¤åˆå±æ€§é€‰æ‹©å™¨<ul><li>è¯­æ³•ï¼š $(â€œA[å±æ€§å=â€™å€¼â€™][]â€¦â€) åŒ…å«å¤šä¸ªå±æ€§æ¡ä»¶çš„é€‰æ‹©å™¨</li></ul></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">    &#x2F;&#x2F; &lt;input type&#x3D;&quot;button&quot; value&#x3D;&quot; å±æ€§titleå€¼ç­‰äºtestçš„divå…ƒç´ èƒŒæ™¯è‰²ä¸ºçº¢è‰²&quot;  id&#x3D;&quot;b2&quot;&#x2F;&gt;</span><br><span class="line">    &#x2F;&#x2F; &lt;input type&#x3D;&quot;button&quot; value&#x3D;&quot; å±æ€§titleå€¼ä¸ç­‰äºtestçš„divå…ƒç´ (æ²¡æœ‰å±æ€§titleçš„ä¹Ÿå°†è¢«é€‰ä¸­)èƒŒæ™¯è‰²ä¸ºçº¢è‰²&quot;  id&#x3D;&quot;b3&quot;&#x2F;&gt;</span><br><span class="line">    &#x2F;&#x2F; &lt;input type&#x3D;&quot;button&quot; value&#x3D;&quot; å±æ€§titleå€¼ ä»¥teå¼€å§‹ çš„divå…ƒç´ èƒŒæ™¯è‰²ä¸ºçº¢è‰²&quot;  id&#x3D;&quot;b4&quot;&#x2F;&gt;</span><br><span class="line">    &#x2F;&#x2F; &lt;input type&#x3D;&quot;button&quot; value&#x3D;&quot; å±æ€§titleå€¼ ä»¥estç»“æŸ çš„divå…ƒç´ èƒŒæ™¯è‰²ä¸ºçº¢è‰²&quot;  id&#x3D;&quot;b5&quot;&#x2F;&gt;</span><br><span class="line">    &#x2F;&#x2F; &lt;input type&#x3D;&quot;button&quot; value&#x3D;&quot;å±æ€§titleå€¼ å«æœ‰esçš„divå…ƒç´ èƒŒæ™¯è‰²ä¸ºçº¢è‰²&quot;  id&#x3D;&quot;b6&quot;&#x2F;&gt;</span><br><span class="line">    &#x2F;&#x2F; &lt;input type&#x3D;&quot;button&quot; value&#x3D;&quot;é€‰å–æœ‰å±æ€§idçš„divå…ƒç´ ï¼Œç„¶ååœ¨ç»“æœä¸­é€‰å–å±æ€§titleå€¼å«æœ‰â€œesâ€çš„ div å…ƒç´ èƒŒæ™¯è‰²ä¸ºçº¢è‰²&quot;  id&#x3D;&quot;b7&quot;&#x2F;&gt;</span><br><span class="line"></span><br><span class="line">$(function () &#123;</span><br><span class="line">    $(&quot;#b1&quot;).click(function () &#123;</span><br><span class="line">        $(&quot;div[title]&quot;).css(&quot;backgroundColor&quot;,&quot;red&quot;)</span><br><span class="line">    &#125;)</span><br><span class="line">    $(&quot;#b2&quot;).click(function () &#123;</span><br><span class="line">        $(&quot;div[title&#x3D;test]&quot;).css(&quot;backgroundColor&quot;,&quot;red&quot;)</span><br><span class="line">    &#125;)</span><br><span class="line">    $(&quot;#b3&quot;).click(function () &#123;</span><br><span class="line">        $(&quot;div[title!&#x3D;test]&quot;).css(&quot;backgroundColor&quot;,&quot;red&quot;)</span><br><span class="line">    &#125;)</span><br><span class="line">    $(&quot;#b4&quot;).click(function () &#123;</span><br><span class="line">        $(&quot;div[title^&#x3D;te]&quot;).css(&quot;backgroundColor&quot;,&quot;red&quot;)</span><br><span class="line">    &#125;)</span><br><span class="line">    $(&quot;#b5&quot;).click(function () &#123;</span><br><span class="line">        $(&quot;div[title$&#x3D;est]&quot;).css(&quot;backgroundColor&quot;,&quot;red&quot;)</span><br><span class="line">    &#125;)</span><br><span class="line">    $(&quot;#b6&quot;).click(function () &#123;</span><br><span class="line">        $(&quot;div[title*&#x3D;est]&quot;).css(&quot;backgroundColor&quot;,&quot;red&quot;)</span><br><span class="line">    &#125;)</span><br><span class="line">    $(&quot;#b7&quot;).click(function () &#123;</span><br><span class="line">        $(&quot;div[id][title*&#x3D;est]&quot;).css(&quot;backgroundColor&quot;,&quot;red&quot;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure><hr><h4 id="4-è¿‡æ»¤é€‰æ‹©å™¨"><a href="#4-è¿‡æ»¤é€‰æ‹©å™¨" class="headerlink" title="4. è¿‡æ»¤é€‰æ‹©å™¨"></a>4. è¿‡æ»¤é€‰æ‹©å™¨</h4><ol><li>é¦–å…ƒç´ é€‰æ‹©å™¨ <ul><li>è¯­æ³•ï¼š :first è·å¾—é€‰æ‹©çš„å…ƒç´ ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ </li></ul></li><li>å°¾å…ƒç´ é€‰æ‹©å™¨ <ul><li>è¯­æ³•ï¼š :last è·å¾—é€‰æ‹©çš„å…ƒç´ ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ </li></ul></li><li>éå…ƒç´ é€‰æ‹©å™¨<ul><li>è¯­æ³•ï¼š :not(selector) ä¸åŒ…æ‹¬æŒ‡å®šå†…å®¹çš„å…ƒç´ </li></ul></li><li>å¶æ•°é€‰æ‹©å™¨<ul><li>è¯­æ³•ï¼š :even å¶æ•°ï¼Œä» 0 å¼€å§‹è®¡æ•°</li></ul></li><li>å¥‡æ•°é€‰æ‹©å™¨<ul><li>è¯­æ³•ï¼š :odd å¥‡æ•°ï¼Œä» 0 å¼€å§‹è®¡æ•°</li></ul></li><li>ç­‰äºç´¢å¼•é€‰æ‹©å™¨<ul><li>è¯­æ³•ï¼š :eq(index) æŒ‡å®šç´¢å¼•å…ƒç´ </li></ul></li><li>å¤§äºç´¢å¼•é€‰æ‹©å™¨ <ul><li>è¯­æ³•ï¼š :gt(index) å¤§äºæŒ‡å®šç´¢å¼•å…ƒç´ </li></ul></li><li>å°äºç´¢å¼•é€‰æ‹©å™¨ <ul><li>è¯­æ³•ï¼š :lt(index) å°äºæŒ‡å®šç´¢å¼•å…ƒç´ </li></ul></li><li>æ ‡é¢˜é€‰æ‹©å™¨<ul><li>è¯­æ³•ï¼š :header è·å¾—æ ‡é¢˜ï¼ˆh1~h6ï¼‰å…ƒç´ ï¼Œå›ºå®šå†™æ³•</li></ul></li></ol><hr><h4 id="5-è¡¨å•è¿‡æ»¤é€‰æ‹©å™¨"><a href="#5-è¡¨å•è¿‡æ»¤é€‰æ‹©å™¨" class="headerlink" title="5. è¡¨å•è¿‡æ»¤é€‰æ‹©å™¨"></a>5. è¡¨å•è¿‡æ»¤é€‰æ‹©å™¨</h4><ol><li>å¯ç”¨å…ƒç´ é€‰æ‹©å™¨ <ul><li>è¯­æ³•ï¼š :enabled è·å¾—å¯ç”¨å…ƒç´ </li></ul></li><li>ä¸å¯ç”¨å…ƒç´ é€‰æ‹©å™¨ <ul><li>è¯­æ³•ï¼š :disabled è·å¾—ä¸å¯ç”¨å…ƒç´ </li></ul></li><li>é€‰ä¸­é€‰æ‹©å™¨ <ul><li>è¯­æ³•ï¼š :checked è·å¾—å•é€‰/å¤é€‰æ¡†é€‰ä¸­çš„å…ƒç´ </li></ul></li><li>é€‰ä¸­é€‰æ‹©å™¨ <ul><li>è¯­æ³•ï¼š :selected è·å¾—ä¸‹æ‹‰æ¡†é€‰ä¸­çš„å…ƒç´ </li></ul></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">    &#x2F;&#x2F; &lt;input type&#x3D;&quot;button&quot; value&#x3D;&quot; åˆ©ç”¨ jQuery å¯¹è±¡çš„ val() æ–¹æ³•æ”¹å˜è¡¨å•å†…å¯ç”¨ &lt;input&gt; å…ƒç´ çš„å€¼&quot;  id&#x3D;&quot;b1&quot;&#x2F;&gt;</span><br><span class="line">    &#x2F;&#x2F; &lt;input type&#x3D;&quot;button&quot; value&#x3D;&quot; åˆ©ç”¨ jQuery å¯¹è±¡çš„ val() æ–¹æ³•æ”¹å˜è¡¨å•å†…ä¸å¯ç”¨ &lt;input&gt; å…ƒç´ çš„å€¼&quot;  id&#x3D;&quot;b2&quot;&#x2F;&gt;</span><br><span class="line">    &#x2F;&#x2F; &lt;input type&#x3D;&quot;button&quot; value&#x3D;&quot; åˆ©ç”¨ jQuery å¯¹è±¡çš„ length å±æ€§è·å–å¤é€‰æ¡†é€‰ä¸­çš„ä¸ªæ•°&quot;  id&#x3D;&quot;b3&quot;&#x2F;&gt;</span><br><span class="line">    &#x2F;&#x2F; &lt;input type&#x3D;&quot;button&quot; value&#x3D;&quot; åˆ©ç”¨ jQuery å¯¹è±¡çš„ length å±æ€§è·å–ä¸‹æ‹‰æ¡†é€‰ä¸­çš„ä¸ªæ•°&quot;  id&#x3D;&quot;b4&quot;&#x2F;&gt;</span><br><span class="line">$(function () &#123;</span><br><span class="line">    $(&quot;#b1&quot;).click(function () &#123;</span><br><span class="line">        $(&quot;input[type&#x3D;text]:enabled&quot;).val(&quot;hahaha&quot;);</span><br><span class="line">    &#125;)</span><br><span class="line">    $(&quot;#b2&quot;).click(function () &#123;</span><br><span class="line">        $(&quot;input[type&#x3D;text]:disabled&quot;).val(&quot;hahaha&quot;);</span><br><span class="line">    &#125;)</span><br><span class="line">    $(&quot;#b3&quot;).click(function () &#123;</span><br><span class="line">        alert($(&quot;input[type&#x3D;&#39;checkbox&#39;]:checked&quot;).length)</span><br><span class="line">    &#125;)</span><br><span class="line">    $(&quot;#b4&quot;).click(function () &#123;</span><br><span class="line">        alert($(&quot;#job &gt; option:selected&quot;).length)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><hr><h3 id="äºŒ-DOMæ“ä½œ"><a href="#äºŒ-DOMæ“ä½œ" class="headerlink" title="äºŒ.DOMæ“ä½œ"></a>äºŒ.DOMæ“ä½œ</h3><ol><li>å†…å®¹æ“ä½œ<ol><li>html(): è·å–/è®¾ç½®å…ƒç´ çš„æ ‡ç­¾ä½“å†…å®¹   <a><font>å†…å®¹</font></a>  â€“&gt; <font>å†…å®¹</font></li><li>text(): è·å–/è®¾ç½®å…ƒç´ çš„æ ‡ç­¾ä½“çº¯æ–‡æœ¬å†…å®¹   <a><font>å†…å®¹</font></a> â€“&gt; å†…å®¹</li><li>val()ï¼š è·å–/è®¾ç½®å…ƒç´ çš„valueå±æ€§å€¼</li></ol></li></ol><hr><ol start="2"><li><p>å±æ€§æ“ä½œ</p><ol><li><p>é€šç”¨å±æ€§æ“ä½œ</p><pre><code>1. attr(): è·å–/è®¾ç½®å…ƒç´ çš„å±æ€§   2. removeAttr():åˆ é™¤å±æ€§           3. prop():è·å–/è®¾ç½®å…ƒç´ çš„å±æ€§         4. removeProp():åˆ é™¤å±æ€§            * attrå’ŒpropåŒºåˆ«ï¼Ÿ</code></pre><ol><li>å¦‚æœæ“ä½œçš„æ˜¯å…ƒç´ çš„å›ºæœ‰å±æ€§ï¼Œåˆ™å»ºè®®ä½¿ç”¨prop</li><li>å¦‚æœæ“ä½œçš„æ˜¯å…ƒç´ è‡ªå®šä¹‰çš„å±æ€§ï¼Œåˆ™å»ºè®®ä½¿ç”¨attr</li></ol></li><li><p>å¯¹classå±æ€§æ“ä½œ</p><pre><code>1. addClass():æ·»åŠ classå±æ€§å€¼   2. removeClass():åˆ é™¤classå±æ€§å€¼           3. toggleClass():åˆ‡æ¢classå±æ€§</code></pre><ul><li>toggleClass(â€œoneâ€): <ul><li>åˆ¤æ–­å¦‚æœå…ƒç´ å¯¹è±¡ä¸Šå­˜åœ¨class=â€oneâ€ï¼Œåˆ™å°†å±æ€§å€¼oneåˆ é™¤æ‰ã€‚  å¦‚æœå…ƒç´ å¯¹è±¡ä¸Šä¸å­˜åœ¨class=â€oneâ€ï¼Œåˆ™æ·»åŠ </li></ul></li></ul><ol start="4"><li>css():</li></ol></li></ol></li><li><p>CRUDæ“ä½œ:</p><ol><li><p>append():çˆ¶å…ƒç´ å°†å­å…ƒç´ è¿½åŠ åˆ°æœ«å°¾</p><pre><code>* å¯¹è±¡1.append(å¯¹è±¡2): å°†å¯¹è±¡2æ·»åŠ åˆ°å¯¹è±¡1å…ƒç´ å†…éƒ¨ï¼Œå¹¶ä¸”åœ¨æœ«å°¾</code></pre></li><li><p>prepend():çˆ¶å…ƒç´ å°†å­å…ƒç´ è¿½åŠ åˆ°å¼€å¤´</p><pre><code>* å¯¹è±¡1.prepend(å¯¹è±¡2):å°†å¯¹è±¡2æ·»åŠ åˆ°å¯¹è±¡1å…ƒç´ å†…éƒ¨ï¼Œå¹¶ä¸”åœ¨å¼€å¤´</code></pre></li><li><p>appendTo():</p><pre><code>* å¯¹è±¡1.appendTo(å¯¹è±¡2):å°†å¯¹è±¡1æ·»åŠ åˆ°å¯¹è±¡2å†…éƒ¨ï¼Œå¹¶ä¸”åœ¨æœ«å°¾</code></pre></li><li><p>prependTo()ï¼š</p><pre><code>* å¯¹è±¡1.prependTo(å¯¹è±¡2):å°†å¯¹è±¡1æ·»åŠ åˆ°å¯¹è±¡2å†…éƒ¨ï¼Œå¹¶ä¸”åœ¨å¼€å¤´</code></pre></li><li><p>after():æ·»åŠ å…ƒç´ åˆ°å…ƒç´ åè¾¹</p><pre><code>* å¯¹è±¡1.after(å¯¹è±¡2)ï¼š å°†å¯¹è±¡2æ·»åŠ åˆ°å¯¹è±¡1åè¾¹ã€‚å¯¹è±¡1å’Œå¯¹è±¡2æ˜¯å…„å¼Ÿå…³ç³»</code></pre></li><li><p>before():æ·»åŠ å…ƒç´ åˆ°å…ƒç´ å‰è¾¹</p><pre><code>* å¯¹è±¡1.before(å¯¹è±¡2)ï¼š å°†å¯¹è±¡2æ·»åŠ åˆ°å¯¹è±¡1å‰è¾¹ã€‚å¯¹è±¡1å’Œå¯¹è±¡2æ˜¯å…„å¼Ÿå…³ç³»</code></pre></li><li><p>insertAfter()</p><pre><code>* å¯¹è±¡1.insertAfter(å¯¹è±¡2)ï¼šå°†å¯¹è±¡2æ·»åŠ åˆ°å¯¹è±¡1åè¾¹ã€‚å¯¹è±¡1å’Œå¯¹è±¡2æ˜¯å…„å¼Ÿå…³ç³»</code></pre></li><li><p>insertBefore()</p><pre><code>* å¯¹è±¡1.insertBefore(å¯¹è±¡2)ï¼š å°†å¯¹è±¡2æ·»åŠ åˆ°å¯¹è±¡1å‰è¾¹ã€‚å¯¹è±¡1å’Œå¯¹è±¡2æ˜¯å…„å¼Ÿå…³ç³»</code></pre></li><li><p>remove():ç§»é™¤å…ƒç´ </p><pre><code>* å¯¹è±¡.remove():å°†å¯¹è±¡åˆ é™¤æ‰</code></pre></li><li><p>empty():æ¸…ç©ºå…ƒç´ çš„æ‰€æœ‰åä»£å…ƒç´ ã€‚</p><pre><code> * å¯¹è±¡.empty():å°†å¯¹è±¡çš„åä»£å…ƒç´ å…¨éƒ¨æ¸…ç©ºï¼Œä½†æ˜¯ä¿ç•™å½“å‰å¯¹è±¡ä»¥åŠå…¶å±æ€§èŠ‚ç‚¹</code></pre></li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> WEB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jquery </tag>
            
            <tag> WEB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cookie&amp;session</title>
      <link href="2020/09/Cookie%E5%92%8Csession/"/>
      <url>2020/09/Cookie%E5%92%8Csession/</url>
      
        <content type="html"><![CDATA[<p><strong>ä¼šè¯æŠ€æœ¯</strong></p><ol><li>ä¼šè¯ï¼šä¸€æ¬¡ä¼šè¯ä¸­åŒ…å«å¤šæ¬¡è¯·æ±‚å’Œå“åº”ã€‚<ul><li>ä¸€æ¬¡ä¼šè¯ï¼šæµè§ˆå™¨ç¬¬ä¸€æ¬¡ç»™æœåŠ¡å™¨èµ„æºå‘é€è¯·æ±‚ï¼Œä¼šè¯å»ºç«‹ï¼Œç›´åˆ°æœ‰ä¸€æ–¹æ–­å¼€ä¸ºæ­¢</li></ul></li><li>åŠŸèƒ½ï¼šåœ¨ä¸€æ¬¡ä¼šè¯çš„èŒƒå›´å†…çš„å¤šæ¬¡è¯·æ±‚é—´ï¼Œå…±äº«æ•°æ®</li><li>æ–¹å¼ï¼š<ol><li>å®¢æˆ·ç«¯ä¼šè¯æŠ€æœ¯ï¼šCookie</li><li>æœåŠ¡å™¨ç«¯ä¼šè¯æŠ€æœ¯ï¼šSession</li></ol></li></ol><hr><h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><h2 id="1-æ¦‚å¿µï¼š"><a href="#1-æ¦‚å¿µï¼š" class="headerlink" title="1.æ¦‚å¿µï¼š"></a>1.æ¦‚å¿µï¼š</h2><p>å®¢æˆ·ç«¯ä¼šè¯æŠ€æœ¯ï¼Œå°†æ•°æ®ä¿å­˜åˆ°å®¢æˆ·ç«¯</p><h2 id="2-å¿«é€Ÿå…¥é—¨ï¼š"><a href="#2-å¿«é€Ÿå…¥é—¨ï¼š" class="headerlink" title="2.å¿«é€Ÿå…¥é—¨ï¼š"></a>2.å¿«é€Ÿå…¥é—¨ï¼š</h2><ul><li>ä½¿ç”¨æ­¥éª¤ï¼š<ol><li>åˆ›å»ºCookieå¯¹è±¡ï¼Œç»‘å®šæ•°æ®<ul><li>new Cookie(String name, String value) </li></ul></li><li>å‘é€Cookieå¯¹è±¡<ul><li>response.addCookie(Cookie cookie) </li></ul></li><li>è·å–Cookieï¼Œæ‹¿åˆ°æ•°æ®<ul><li>Cookie[]  request.getCookies() </li></ul></li></ol></li></ul><ol start="3"><li><p>å®ç°åŸç†</p><ul><li>åŸºäºå“åº”å¤´set-cookieå’Œè¯·æ±‚å¤´cookieå®ç°</li></ul></li><li><p>cookieçš„ç»†èŠ‚</p><ol><li><p>ä¸€æ¬¡å¯ä¸å¯ä»¥å‘é€å¤šä¸ªcookie?</p><ul><li>å¯ä»¥</li><li>å¯ä»¥åˆ›å»ºå¤šä¸ªCookieå¯¹è±¡ï¼Œä½¿ç”¨responseè°ƒç”¨å¤šæ¬¡addCookieæ–¹æ³•å‘é€cookieå³å¯ã€‚</li></ul></li><li><p>cookieåœ¨æµè§ˆå™¨ä¸­ä¿å­˜å¤šé•¿æ—¶é—´ï¼Ÿ</p><ol><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“æµè§ˆå™¨å…³é—­åï¼ŒCookieæ•°æ®è¢«é”€æ¯</li><li>æŒä¹…åŒ–å­˜å‚¨ï¼š<ul><li>setMaxAge(int seconds)<ol><li>æ­£æ•°ï¼šå°†Cookieæ•°æ®å†™åˆ°ç¡¬ç›˜çš„æ–‡ä»¶ä¸­ã€‚æŒä¹…åŒ–å­˜å‚¨ã€‚å¹¶æŒ‡å®šcookieå­˜æ´»æ—¶é—´ï¼Œæ—¶é—´åˆ°åï¼Œcookieæ–‡ä»¶è‡ªåŠ¨å¤±æ•ˆ</li><li>è´Ÿæ•°ï¼šé»˜è®¤å€¼</li><li>é›¶ï¼šåˆ é™¤cookieä¿¡æ¯</li></ol></li></ul></li></ol></li><li><p>cookieèƒ½ä¸èƒ½å­˜ä¸­æ–‡ï¼Ÿ</p><ul><li>åœ¨tomcat 8 ä¹‹å‰ cookieä¸­ä¸èƒ½ç›´æ¥å­˜å‚¨ä¸­æ–‡æ•°æ®ã€‚<ul><li>éœ€è¦å°†ä¸­æ–‡æ•°æ®è½¬ç â€”ä¸€èˆ¬é‡‡ç”¨URLç¼–ç (%E3)</li></ul></li><li>åœ¨tomcat 8 ä¹‹åï¼Œcookieæ”¯æŒä¸­æ–‡æ•°æ®ã€‚ç‰¹æ®Šå­—ç¬¦è¿˜æ˜¯ä¸æ”¯æŒï¼Œå»ºè®®ä½¿ç”¨URLç¼–ç å­˜å‚¨ï¼ŒURLè§£ç è§£æ</li></ul></li><li><p>cookieå…±äº«é—®é¢˜ï¼Ÿ</p><ol><li><p>å‡è®¾åœ¨ä¸€ä¸ªtomcatæœåŠ¡å™¨ä¸­ï¼Œéƒ¨ç½²äº†å¤šä¸ªwebé¡¹ç›®ï¼Œé‚£ä¹ˆåœ¨è¿™äº›webé¡¹ç›®ä¸­cookieèƒ½ä¸èƒ½å…±äº«ï¼Ÿ</p><ul><li><p>é»˜è®¤æƒ…å†µä¸‹cookieä¸èƒ½å…±äº«</p></li><li><p>setPath(String path):è®¾ç½®cookieçš„è·å–èŒƒå›´ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè®¾ç½®å½“å‰çš„è™šæ‹Ÿç›®å½•</p><ul><li>å¦‚æœè¦å…±äº«ï¼Œåˆ™å¯ä»¥å°†pathè®¾ç½®ä¸ºâ€/â€œ</li></ul></li></ul></li></ol></li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cookie </tag>
            
            <tag> session </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Servletå’Œhttpså’ŒRequest</title>
      <link href="2020/09/Servlet%E5%92%8Chttps%E5%92%8CRequest/"/>
      <url>2020/09/Servlet%E5%92%8Chttps%E5%92%8CRequest/</url>
      
        <content type="html"><![CDATA[<h2 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h2><h1 id="servlet"><a href="#servlet" class="headerlink" title="servlet"></a>servlet</h1><p>å…¨ç§° ï¼š server applet</p><ul><li>æ¦‚å¿µï¼šè¿è¡Œåœ¨æœåŠ¡å™¨ç«¯çš„å°ç¨‹åº<ul><li>Servletå°±æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®šä¹‰äº†Javaç±»è¢«æµè§ˆå™¨è®¿é—®åˆ°(tomcatè¯†åˆ«)çš„è§„åˆ™ã€‚</li><li>å°†æ¥æˆ‘ä»¬è‡ªå®šä¹‰ä¸€ä¸ªç±»ï¼Œå®ç°Servletæ¥å£ï¼Œå¤å†™æ–¹æ³•ã€‚</li></ul></li></ul><h3 id="Servletç›¸å…³é…ç½®"><a href="#Servletç›¸å…³é…ç½®" class="headerlink" title="Servletç›¸å…³é…ç½®"></a>Servletç›¸å…³é…ç½®</h3><h2 id="urlpartten-Servletè®¿é—®è·¯å¾„"><a href="#urlpartten-Servletè®¿é—®è·¯å¾„" class="headerlink" title="urlpartten:Servletè®¿é—®è·¯å¾„"></a>urlpartten:Servletè®¿é—®è·¯å¾„</h2><ol><li>ä¸€ä¸ªServletå¯ä»¥å®šä¹‰å¤šä¸ªè®¿é—®è·¯å¾„ ï¼š                   @WebServlet({â€œ/d4â€,â€/dd4â€,â€/ddd4â€})<ol start="2"><li>è·¯å¾„å®šä¹‰è§„åˆ™ï¼š</li><li>/xxxï¼šè·¯å¾„åŒ¹é…</li><li>/xxx/xxx:å¤šå±‚è·¯å¾„ï¼Œç›®å½•ç»“æ„</li><li>*.doï¼šæ‰©å±•ååŒ¹é…</li></ol></li></ol><hr><h1 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h1><ol><li><p>requestå¯¹è±¡å’Œresponseå¯¹è±¡çš„åŸç†</p><ol><li>requestå’Œresponseå¯¹è±¡æ˜¯ç”±æœåŠ¡å™¨åˆ›å»ºçš„ã€‚æˆ‘ä»¬æ¥ä½¿ç”¨å®ƒä»¬</li><li>requestå¯¹è±¡æ˜¯æ¥è·å–è¯·æ±‚æ¶ˆæ¯ï¼Œresponseå¯¹è±¡æ˜¯æ¥è®¾ç½®å“åº”æ¶ˆæ¯</li></ol></li><li><p>requestå¯¹è±¡ç»§æ‰¿ä½“ç³»ç»“æ„ï¼š<br> ServletRequest        â€“    æ¥å£</p><pre><code> |    ç»§æ‰¿</code></pre><p> HttpServletRequest    â€“ æ¥å£</p><pre><code> |    å®ç°</code></pre><p> org.apache.catalina.connector.RequestFacade ç±»(tomcat)</p></li><li><p>requeståŠŸèƒ½ï¼š</p><ol><li><p>è·å–è¯·æ±‚æ¶ˆæ¯æ•°æ®</p><ol><li><p>è·å–è¯·æ±‚è¡Œæ•°æ®</p><ul><li><p>GET /day14/demo1?name=zhangsan HTTP/1.1</p></li><li><p>æ–¹æ³•ï¼š</p><ol><li><p>è·å–è¯·æ±‚æ–¹å¼ ï¼šGET</p><ul><li>String getMethod()  </li></ul></li><li><p>(*)è·å–è™šæ‹Ÿç›®å½•ï¼š/day14</p><ul><li>String getContextPath()</li></ul></li><li><p>è·å–Servletè·¯å¾„: /demo1</p><ul><li>String getServletPath()</li></ul></li><li><p>è·å–getæ–¹å¼è¯·æ±‚å‚æ•°ï¼šname=zhangsan</p><ul><li>String getQueryString()</li></ul></li><li><p>(*)è·å–è¯·æ±‚URIï¼š/day14/demo1</p><ul><li><p>String getRequestURI():        /day14/demo1</p></li><li><p>StringBuffer getRequestURL()  :<a href="http://localhost/day14/demo1">http://localhost/day14/demo1</a></p></li><li><p>URL:ç»Ÿä¸€èµ„æºå®šä½ç¬¦ ï¼š <a href="http://localhost/day14/demo1">http://localhost/day14/demo1</a>    ä¸­åäººæ°‘å…±å’Œå›½</p></li><li><p>URIï¼šç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ : /day14/demo1                    å…±å’Œå›½</p></li></ul></li><li><p>è·å–åè®®åŠç‰ˆæœ¬ï¼šHTTP/1.1</p><ul><li>String getProtocol()</li></ul></li><li><p>è·å–å®¢æˆ·æœºçš„IPåœ°å€ï¼š</p><ul><li>String getRemoteAddr()</li></ul></li></ol></li></ul></li></ol></li></ol></li></ol><p>â€‹    </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">           */</span><br><span class="line">       <span class="comment">//1. è·å–è¯·æ±‚æ–¹å¼ ï¼šGET</span></span><br><span class="line">       String method = request.getMethod();</span><br><span class="line">       System.out.println(method);</span><br><span class="line">       <span class="comment">//2.(*)è·å–è™šæ‹Ÿç›®å½•ï¼š/day14</span></span><br><span class="line">       String contextPath = request.getContextPath();</span><br><span class="line">       System.out.println(contextPath);</span><br><span class="line">       <span class="comment">//3. è·å–Servletè·¯å¾„: /demo1</span></span><br><span class="line">       String servletPath = request.getServletPath();</span><br><span class="line">       System.out.println(servletPath);</span><br><span class="line">       <span class="comment">//4. è·å–getæ–¹å¼è¯·æ±‚å‚æ•°ï¼šname=zhangsan</span></span><br><span class="line">       String queryString = request.getQueryString();</span><br><span class="line">       System.out.println(queryString);</span><br><span class="line">       <span class="comment">//5.(*)è·å–è¯·æ±‚URIï¼š/day14/demo1</span></span><br><span class="line">       String requestURI = request.getRequestURI();</span><br><span class="line">       StringBuffer requestURL = request.getRequestURL();</span><br><span class="line">       System.out.println(requestURI);</span><br><span class="line">       System.out.println(requestURL);</span><br><span class="line">       <span class="comment">//6. è·å–åè®®åŠç‰ˆæœ¬ï¼šHTTP/1.1</span></span><br><span class="line">       String protocol = request.getProtocol();</span><br><span class="line">       System.out.println(protocol);</span><br><span class="line">       <span class="comment">//7. è·å–å®¢æˆ·æœºçš„IPåœ°å€ï¼š</span></span><br><span class="line">       String remoteAddr = request.getRemoteAddr();</span><br><span class="line">       System.out.println(remoteAddr);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>â€‹<br>2. è·å–è¯·æ±‚å¤´æ•°æ®<br>            * æ–¹æ³•ï¼š<br>                * (*)String getHeader(String name):é€šè¿‡è¯·æ±‚å¤´çš„åç§°è·å–è¯·æ±‚å¤´çš„å€¼<br>                * Enumeration<String> getHeaderNames():è·å–æ‰€æœ‰çš„è¯·æ±‚å¤´åç§°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/requestDemo2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestDemo2</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//æ¼”ç¤ºè·å–è¯·æ±‚å¤´æ•°æ®</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//1.è·å–æ‰€æœ‰è¯·æ±‚å¤´åç§°</span></span><br><span class="line">        Enumeration&lt;String&gt; headerNames = request.getHeaderNames();</span><br><span class="line">        <span class="comment">//2.éå†</span></span><br><span class="line">        <span class="keyword">while</span>(headerNames.hasMoreElements())&#123;</span><br><span class="line">            String name = headerNames.nextElement();</span><br><span class="line">            <span class="comment">//æ ¹æ®åç§°è·å–è¯·æ±‚å¤´çš„å€¼</span></span><br><span class="line">            String value = request.getHeader(name);</span><br><span class="line">            System.out.println(name+<span class="string">&quot;---&quot;</span>+value);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/requestDemo2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestDemo2</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//æ¼”ç¤ºè·å–è¯·æ±‚å¤´æ•°æ®</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//1.è·å–æ‰€æœ‰è¯·æ±‚å¤´åç§°</span></span><br><span class="line">        Enumeration&lt;String&gt; headerNames = request.getHeaderNames();</span><br><span class="line">        <span class="comment">//2.éå†</span></span><br><span class="line">        <span class="keyword">while</span>(headerNames.hasMoreElements())&#123;</span><br><span class="line">            String name = headerNames.nextElement();</span><br><span class="line">            <span class="comment">//æ ¹æ®åç§°è·å–è¯·æ±‚å¤´çš„å€¼</span></span><br><span class="line">            String value = request.getHeader(name);</span><br><span class="line">            System.out.println(name+<span class="string">&quot;---&quot;</span>+value);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ ¹æ®å‚æ•°åç§°è·å–å‚æ•°å€¼"><a href="#æ ¹æ®å‚æ•°åç§°è·å–å‚æ•°å€¼" class="headerlink" title="æ ¹æ®å‚æ•°åç§°è·å–å‚æ•°å€¼"></a>æ ¹æ®å‚æ•°åç§°è·å–å‚æ•°å€¼</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ¹æ®å‚æ•°åç§°è·å–å‚æ•°å€¼</span></span><br><span class="line">String username = req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">System.out.println(username);</span><br></pre></td></tr></table></figure><p><img src="../../../img/md_img/Servlet%E5%92%8Chttps%E5%92%8CRequest/1599968021091.png">.png) <img src="../../../img/posts_img/Servlet%E5%92%8Chttps%E5%92%8CRequest/2020-10-11-17-58-40.png"></p><p>æ ¹æ®å‚æ•°åç§°è·å–å‚æ•°å€¼çš„æ•°ç»„</p>   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//æ ¹æ®å‚æ•°åç§°è·å–å‚æ•°å€¼çš„æ•°ç»„</span></span><br><span class="line">String[] hobbies = request.getParameterValues(<span class="string">&quot;hobby&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (String hobby : hobbies) &#123;</span><br><span class="line">System.out.println(hobby);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="../../../img/md_img/Servlet%E5%92%8Chttps%E5%92%8CRequest/1599971251205.png"> .png)<br><img src="../../../img/posts_img/Servlet%E5%92%8Chttps%E5%92%8CRequest/2020-10-11-18-03-37.png"></p><h3 id="è·å–æ‰€ä»¥å‚æ•°çš„Mapé›†åˆ"><a href="#è·å–æ‰€ä»¥å‚æ•°çš„Mapé›†åˆ" class="headerlink" title="è·å–æ‰€ä»¥å‚æ•°çš„Mapé›†åˆ"></a>è·å–æ‰€ä»¥å‚æ•°çš„Mapé›†åˆ</h3> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, String[]&gt; parameterMap = req.getParameterMap();</span><br><span class="line">        Set&lt;String&gt; key = parameterMap.keySet();</span><br><span class="line">        <span class="keyword">for</span> (String name : key) &#123;</span><br><span class="line">            String[] values = req.getParameterMap().get(name);</span><br><span class="line">            System.out.println(name);</span><br><span class="line">            <span class="keyword">for</span> (String value : values) &#123;</span><br><span class="line">                System.out.println(value);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;-------------------&quot;</span>);</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p><img src="../../../img/md_img/Servlet%E5%92%8Chttps%E5%92%8CRequest/2020-10-11-18-02-01.png"><br><img src="../../../img/md_img/Servlet%E5%92%8Chttps%E5%92%8CRequest/2020-10-11-18-02-44.png"></p><h3 id="ä¸­æ–‡ä¹±ç é—®é¢˜"><a href="#ä¸­æ–‡ä¹±ç é—®é¢˜" class="headerlink" title="ä¸­æ–‡ä¹±ç é—®é¢˜"></a>ä¸­æ–‡ä¹±ç é—®é¢˜</h3><ul><li>getæ–¹å¼ï¼štomcat 8 å·²ç»å°†getæ–¹å¼ä¹±ç é—®é¢˜è§£å†³äº†<pre><code>      * postæ–¹å¼ï¼šä¼šä¹±ç           * è§£å†³ï¼šåœ¨è·å–å‚æ•°å‰ï¼Œè®¾ç½®requestçš„ç¼–ç request.setCharacterEncoding(&quot;utf-8&quot;);</code></pre></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.è®¾ç½®æµçš„ç¼–ç </span></span><br><span class="line">request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–è¯·æ±‚å‚æ•°username</span></span><br><span class="line">String username = request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(username);</span><br></pre></td></tr></table></figure><h3 id="è¯·æ±‚è½¬å‘"><a href="#è¯·æ±‚è½¬å‘" class="headerlink" title="è¯·æ±‚è½¬å‘"></a>è¯·æ±‚è½¬å‘</h3><p>ä¸€ç§åœ¨æœåŠ¡å™¨å†…éƒ¨çš„èµ„æºè·³è½¬æ–¹å¼</p><ol><li>æ­¥éª¤ï¼š<ol><li><p>é€šè¿‡requestå¯¹è±¡è·å–è¯·æ±‚è½¬å‘å™¨å¯¹è±¡ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RequestDispatcher getRequestDispatcher(String path)</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨RequestDispatcherå¯¹è±¡æ¥è¿›è¡Œè½¬å‘ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">forward(ServletRequest request, ServletResponse response) </span><br></pre></td></tr></table></figure></li></ol></li><li>ç‰¹ç‚¹ï¼š<ol><li>æµè§ˆå™¨åœ°å€æ è·¯å¾„ä¸å‘ç”Ÿå˜åŒ–</li><li>åªèƒ½è½¬å‘åˆ°å½“å‰æœåŠ¡å™¨å†…éƒ¨èµ„æºä¸­ã€‚</li><li>è½¬å‘æ˜¯ä¸€æ¬¡è¯·æ±‚</li></ol></li></ol><h3 id="å…±äº«æ•°æ®"><a href="#å…±äº«æ•°æ®" class="headerlink" title="å…±äº«æ•°æ®"></a>å…±äº«æ•°æ®</h3><pre><code>* åŸŸå¯¹è±¡ï¼šä¸€ä¸ªæœ‰ä½œç”¨èŒƒå›´çš„å¯¹è±¡ï¼Œå¯ä»¥åœ¨èŒƒå›´å†…å…±äº«æ•°æ®* requeståŸŸï¼šä»£è¡¨ä¸€æ¬¡è¯·æ±‚çš„èŒƒå›´ï¼Œä¸€èˆ¬ç”¨äºè¯·æ±‚è½¬å‘çš„å¤šä¸ªèµ„æºä¸­å…±äº«* æ–¹æ³•ï¼š    1. void setAttribute(String name,Object obj):å­˜å‚¨æ•°æ®    2. Object getAttitude(String name):é€šè¿‡é”®è·å–å€¼    3. void removeAttribute(String name):é€šè¿‡é”®ç§»é™¤é”®å€¼å¯¹</code></pre><h1 id="æ¡ˆä¾‹-ç”¨æˆ·ç™»å½•"><a href="#æ¡ˆä¾‹-ç”¨æˆ·ç™»å½•" class="headerlink" title="æ¡ˆä¾‹:ç”¨æˆ·ç™»å½•"></a>æ¡ˆä¾‹:ç”¨æˆ·ç™»å½•</h1><h4 id="ç”¨æˆ·ç™»å½•æ¡ˆä¾‹éœ€æ±‚ï¼š"><a href="#ç”¨æˆ·ç™»å½•æ¡ˆä¾‹éœ€æ±‚ï¼š" class="headerlink" title="ç”¨æˆ·ç™»å½•æ¡ˆä¾‹éœ€æ±‚ï¼š"></a>ç”¨æˆ·ç™»å½•æ¡ˆä¾‹éœ€æ±‚ï¼š</h4><p>1.ç¼–å†™login.htmlç™»å½•é¡µé¢</p><ul><li>username &amp; password ä¸¤ä¸ªè¾“å…¥æ¡†</li></ul><p>2.ä½¿ç”¨Druidæ•°æ®åº“è¿æ¥æ± æŠ€æœ¯,æ“ä½œmysqlï¼Œday14æ•°æ®åº“ä¸­userè¡¨<br>3.ä½¿ç”¨JdbcTemplateæŠ€æœ¯å°è£…JDBC<br>4.ç™»å½•æˆåŠŸè·³è½¬åˆ°SuccessServletå±•ç¤ºï¼šç™»å½•æˆåŠŸï¼ç”¨æˆ·å,æ¬¢è¿æ‚¨<br>5.ç™»å½•å¤±è´¥è·³è½¬åˆ°FailServletå±•ç¤ºï¼šç™»å½•å¤±è´¥ï¼Œç”¨æˆ·åæˆ–å¯†ç é”™è¯¯</p><h4 id="åˆ›å»ºé¡¹ç›®ï¼Œå¯¼å…¥htmlé¡µé¢ï¼Œé…ç½®æ–‡ä»¶ï¼ŒjaråŒ…"><a href="#åˆ›å»ºé¡¹ç›®ï¼Œå¯¼å…¥htmlé¡µé¢ï¼Œé…ç½®æ–‡ä»¶ï¼ŒjaråŒ…" class="headerlink" title="åˆ›å»ºé¡¹ç›®ï¼Œå¯¼å…¥htmlé¡µé¢ï¼Œé…ç½®æ–‡ä»¶ï¼ŒjaråŒ…"></a>åˆ›å»ºé¡¹ç›®ï¼Œå¯¼å…¥htmlé¡µé¢ï¼Œé…ç½®æ–‡ä»¶ï¼ŒjaråŒ…</h4><ol><li><p>å¯¼å…¥HTMLé¡µé¢</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/day14_test/LoginServlet&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        ç”¨æˆ·å:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        å¯†ç :<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç™»å½•&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="../../../img/md_img/Servlet%E5%92%8Chttps%E5%92%8CRequest/1600162908530.png">.png)</p></li></ol><ol start="2"><li>å¯¼å…¥jaråŒ…</li></ol><ul><li>å¯¼å…¥è·¯å¾„  web/ WEB-INF/lib</li></ul><p><img src="../../../img/md_img/Servlet%E5%92%8Chttps%E5%92%8CRequest/2020-10-11-18-05-28.png"></p><p><img src="../../../img/md_img/Servlet%E5%92%8Chttps%E5%92%8CRequest/1600164120350.png">.png)</p><hr><h4 id="åˆ›å»ºæ•°æ®åº“ç¯å¢ƒ"><a href="#åˆ›å»ºæ•°æ®åº“ç¯å¢ƒ" class="headerlink" title="åˆ›å»ºæ•°æ®åº“ç¯å¢ƒ"></a>åˆ›å»ºæ•°æ®åº“ç¯å¢ƒ</h4><p><img src="../../../img/md_img/Servlet%E5%92%8Chttps%E5%92%8CRequest/1600162293781.png">.png)</p><hr><h4 id="åˆ›å»ºç±»User"><a href="#åˆ›å»ºç±»User" class="headerlink" title="åˆ›å»ºç±»User"></a>åˆ›å»ºç±»User</h4><p>åˆ›å»ºUserç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.yuefeng.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String username ;</span><br><span class="line">    <span class="keyword">private</span> String password ;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, username=&quot;</span> + username +</span><br><span class="line">                <span class="string">&quot;, password=&quot;</span> + password +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h4 id="ç¼–å†™å·¥å…·ç±»JDBCUtils"><a href="#ç¼–å†™å·¥å…·ç±»JDBCUtils" class="headerlink" title="ç¼–å†™å·¥å…·ç±»JDBCUtils"></a>ç¼–å†™å·¥å…·ç±»JDBCUtils</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.yuefeng.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.pool.DruidDataSourceFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCUtils</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DataSource ds ;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1.åŠ è½½é…ç½®æ–‡ä»¶</span></span><br><span class="line">            Properties pro = <span class="keyword">new</span> Properties();</span><br><span class="line">            <span class="comment">//ä½¿ç”¨ClassLoaderåŠ è½½é…ç½®æ–‡ä»¶ï¼Œè·å–å­—èŠ‚è¾“å…¥æµ</span></span><br><span class="line">            InputStream is = JDBCUtils.class.getClassLoader().getResourceAsStream(<span class="string">&quot;druid.properties&quot;</span>);</span><br><span class="line">            pro.load(is);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//2.åˆå§‹åŒ–è¿æ¥æ± å¯¹è±¡</span></span><br><span class="line">            ds = DruidDataSourceFactory.createDataSource(pro);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–è¿æ¥æ± å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DataSource <span class="title">getDataSource</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ds;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–è¿æ¥Connectionå¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span>  ds.getConnection();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºç±»UserDao-æä¾›loginæ–¹æ³•"><a href="#åˆ›å»ºç±»UserDao-æä¾›loginæ–¹æ³•" class="headerlink" title="åˆ›å»ºç±»UserDao,æä¾›loginæ–¹æ³•"></a>åˆ›å»ºç±»UserDao,æä¾›loginæ–¹æ³•</h4><p>åˆ›å»ºåŒ…cn.yuefeng.dao</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.yuefeng.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.yuefeng.domain.User;</span><br><span class="line"><span class="keyword">import</span> cn.yuefeng.util.JDBCUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.dao.DataAccessException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.BeanPropertyRowMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.JdbcTemplate;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æ“ä½œUserè¡¨çš„ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate template = <span class="keyword">new</span> JdbcTemplate(JDBCUtils.getDataSource());</span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">Login</span><span class="params">(User loginUser)</span></span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1.ç¼–å†™sql</span></span><br><span class="line">            String sql = <span class="string">&quot;select * from user where username = ? and password = ?&quot;</span>;</span><br><span class="line">            <span class="comment">//2.è°ƒç”¨queryæ–¹æ³•</span></span><br><span class="line">            User user = template.queryForObject(sql,</span><br><span class="line">                    <span class="keyword">new</span> BeanPropertyRowMapper&lt;User&gt;(User.class),</span><br><span class="line">                    loginUser.getUsername(), loginUser.getPassword());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> user;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (DataAccessException e) &#123;</span><br><span class="line">            e.printStackTrace();<span class="comment">//è®°å½•æ—¥å¿—</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h4 id="åˆ›å»ºæµ‹è¯•ç±»UserDaoTest"><a href="#åˆ›å»ºæµ‹è¯•ç±»UserDaoTest" class="headerlink" title="åˆ›å»ºæµ‹è¯•ç±»UserDaoTest"></a>åˆ›å»ºæµ‹è¯•ç±»UserDaoTest</h4><ul><li>æµ‹è¯•JDBCé“¾æ¥æ˜¯å¦é“¾æ¥æ•°æ®åº“</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.yuefeng.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.yuefeng.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> cn.yuefeng.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">     <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span>  <span class="title">testLogin</span><span class="params">()</span></span>&#123;</span><br><span class="line">        User LoginUser = <span class="keyword">new</span> User();</span><br><span class="line">        LoginUser.setUsername(<span class="string">&quot;yuefeng&quot;</span>);</span><br><span class="line">        LoginUser.setPassword(<span class="string">&quot;123&quot;</span>);</span><br><span class="line"></span><br><span class="line">        UserDao dao = <span class="keyword">new</span> UserDao();</span><br><span class="line">        User user = dao.Login(LoginUser);</span><br><span class="line">        System.out.println(user);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User&#123;id&#x3D;3, username&#x3D;yuefeng, password&#x3D;123&#125;</span><br></pre></td></tr></table></figure><hr><h4 id="ç¼–å†™LoginServletç±»"><a href="#ç¼–å†™LoginServletç±»" class="headerlink" title="ç¼–å†™LoginServletç±»"></a>ç¼–å†™LoginServletç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.yuefeng.web.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.yuefeng.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> cn.yuefeng.domain.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="meta">@WebServlet(&quot;/LoginServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//1,è®¾ç½®ç¼–ç </span></span><br><span class="line">        req.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">//2,è·å–è¯·æ±‚å‚æ•°</span></span><br><span class="line"></span><br><span class="line">        String username = req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        String password = req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        User LoginUser = <span class="keyword">new</span> User();</span><br><span class="line">        LoginUser.setUsername(username);</span><br><span class="line">        LoginUser.setPassword(password);</span><br><span class="line">        <span class="comment">//4.è°ƒç”¨UserDaoDLoginæ–¹æ³•</span></span><br><span class="line">        UserDao dao = <span class="keyword">new</span> UserDao();</span><br><span class="line">        User user = dao.Login(LoginUser);</span><br><span class="line">        <span class="comment">//5.åˆ¤æ–­User</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (user == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">//ç™»å½•å¤±è´¥</span></span><br><span class="line"></span><br><span class="line">            req.getRequestDispatcher(<span class="string">&quot;/failServlet&quot;</span>).forward(req,resp);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//ç™»å½•æˆåŠŸ</span></span><br><span class="line">            <span class="comment">//å­˜å‚¨æ•°æ®</span></span><br><span class="line"></span><br><span class="line">            req.setAttribute(<span class="string">&quot;user&quot;</span>,user);</span><br><span class="line">            req.getRequestDispatcher(<span class="string">&quot;/successServlet&quot;</span>).forward(req,resp);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.doGet(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h4 id="ç¼–å†™FailServletå’ŒSuccessServletç±»"><a href="#ç¼–å†™FailServletå’ŒSuccessServletç±»" class="headerlink" title="ç¼–å†™FailServletå’ŒSuccessServletç±»"></a>ç¼–å†™FailServletå’ŒSuccessServletç±»</h4><ul><li>FailServletç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.yuefeng.web.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/failServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FailServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//ç»™é¡µé¢å†™ä¸€å¥è¯</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¾ç½®ç¼–ç </span></span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">//è¾“å‡º</span></span><br><span class="line">        response.getWriter().write(<span class="string">&quot;ç™»å½•å¤±è´¥ï¼Œç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request,response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>SuccessServletç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.yuefeng.web.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.yuefeng.domain.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/successServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SuccessServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//è·å–requeståŸŸä¸­å…±äº«çš„userå¯¹è±¡</span></span><br><span class="line">        User user = (User) request.getAttribute(<span class="string">&quot;user&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(user != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">//ç»™é¡µé¢å†™ä¸€å¥è¯</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//è®¾ç½®ç¼–ç </span></span><br><span class="line">            response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">            <span class="comment">//è¾“å‡º</span></span><br><span class="line">            response.getWriter().write(<span class="string">&quot;ç™»å½•æˆåŠŸï¼&quot;</span>+user.getUsername()+<span class="string">&quot;,æ¬¢è¿æ‚¨&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request,response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h4><ul><li>è¾“å…¥æ­£ç¡®çš„è´¦æˆ·å¯†ç </li></ul><p><img src="../../../img/md_img/Servlet%E5%92%8Chttps%E5%92%8CRequest/1600164498845.png">.png)</p><ul><li>è´¦å·æˆ–è€…å¯†ç é”™è¯¯</li></ul><p><img src="../../../img/md_img/Servlet%E5%92%8Chttps%E5%92%8CRequest/2020-10-11-18-06-56-1604726911944.png"></p><h4 id="BeanUtilså·¥å…·ç±»ï¼Œç®€åŒ–æ•°æ®å°è£…"><a href="#BeanUtilså·¥å…·ç±»ï¼Œç®€åŒ–æ•°æ®å°è£…" class="headerlink" title="BeanUtilså·¥å…·ç±»ï¼Œç®€åŒ–æ•°æ®å°è£…"></a>BeanUtilså·¥å…·ç±»ï¼Œç®€åŒ–æ•°æ®å°è£…</h4><ol><li>å¯¼å…¥jaråŒ…</li><li>ç”¨BeanUtilså°è£…</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.yuefeng.web.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.yuefeng.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> cn.yuefeng.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.beanutils.BeanUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationTargetException;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/LoginServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//1,è®¾ç½®ç¼–ç </span></span><br><span class="line">        req.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">//2,è·å–è¯·æ±‚å‚æ•°</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">        String username = req.getParameter(&quot;username&quot;);</span></span><br><span class="line"><span class="comment">        String password = req.getParameter(&quot;password&quot;);</span></span><br><span class="line"><span class="comment">        User LoginUser = new User();</span></span><br><span class="line"><span class="comment">        LoginUser.setUsername(username);</span></span><br><span class="line"><span class="comment">        LoginUser.setPassword(password);*/</span></span><br><span class="line">        Map&lt;String, String[]&gt; map = req.getParameterMap();</span><br><span class="line">        User LoginUser = <span class="keyword">new</span> User();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            BeanUtils.populate(LoginUser,map);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InvocationTargetException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//4.è°ƒç”¨UserDaoDLoginæ–¹æ³•</span></span><br><span class="line">        UserDao dao = <span class="keyword">new</span> UserDao();</span><br><span class="line">        User user = dao.Login(LoginUser);</span><br><span class="line">        <span class="comment">//5.åˆ¤æ–­User</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (user == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">//ç™»å½•å¤±è´¥</span></span><br><span class="line"></span><br><span class="line">            req.getRequestDispatcher(<span class="string">&quot;/failServlet&quot;</span>).forward(req,resp);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//ç™»å½•æˆåŠŸ</span></span><br><span class="line">            <span class="comment">//å­˜å‚¨æ•°æ®</span></span><br><span class="line"></span><br><span class="line">            req.setAttribute(<span class="string">&quot;user&quot;</span>,user);</span><br><span class="line">            req.getRequestDispatcher(<span class="string">&quot;/successServlet&quot;</span>).forward(req,resp);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.doGet(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> web </category>
          
          <category> Servlet </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Servlet </tag>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Blogå­¦ä¹ </title>
      <link href="2020/09/Blog%E5%AD%A6%E4%B9%A0/"/>
      <url>2020/09/Blog%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h2 id="Markdownè¯­æ³•"><a href="#Markdownè¯­æ³•" class="headerlink" title="Markdownè¯­æ³•"></a>Markdownè¯­æ³•</h2><h2 id="ä¸€-Markdownè¯­æ³•"><a href="#ä¸€-Markdownè¯­æ³•" class="headerlink" title="ä¸€.Markdownè¯­æ³•"></a>ä¸€.Markdownè¯­æ³•</h2><h3 id="1-æ ‡é¢˜"><a href="#1-æ ‡é¢˜" class="headerlink" title="1.æ ‡é¢˜"></a>1.æ ‡é¢˜</h3><h4 id="ä½¿ç”¨-å’Œ-æ ‡è®°ä¸€çº§å’ŒäºŒçº§æ ‡é¢˜"><a href="#ä½¿ç”¨-å’Œ-æ ‡è®°ä¸€çº§å’ŒäºŒçº§æ ‡é¢˜" class="headerlink" title="ä½¿ç”¨ = å’Œ - æ ‡è®°ä¸€çº§å’ŒäºŒçº§æ ‡é¢˜"></a>ä½¿ç”¨ = å’Œ - æ ‡è®°ä¸€çº§å’ŒäºŒçº§æ ‡é¢˜</h4><h4 id="å’Œ-æ ‡è®°è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š"><a href="#å’Œ-æ ‡è®°è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š" class="headerlink" title="= å’Œ - æ ‡è®°è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š"></a>= å’Œ - æ ‡è®°è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">æˆ‘å±•ç¤ºçš„æ˜¯ä¸€çº§æ ‡é¢˜</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line"></span><br><span class="line">æˆ‘å±•ç¤ºçš„æ˜¯äºŒçº§æ ‡é¢˜</span><br><span class="line">-----------------</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="ä½¿ç”¨-å·æ ‡è®°"><a href="#ä½¿ç”¨-å·æ ‡è®°" class="headerlink" title="ä½¿ç”¨ # å·æ ‡è®°"></a>ä½¿ç”¨ # å·æ ‡è®°</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># ä¸€çº§æ ‡é¢˜</span><br><span class="line">## äºŒçº§æ ‡é¢˜</span><br><span class="line">### ä¸‰çº§æ ‡é¢˜</span><br><span class="line">#### å››çº§æ ‡é¢˜</span><br><span class="line">##### äº”çº§æ ‡é¢˜</span><br><span class="line">###### å…­çº§æ ‡é¢˜</span><br></pre></td></tr></table></figure><hr><h3 id="2-å­—ä½“"><a href="#2-å­—ä½“" class="headerlink" title="2.å­—ä½“"></a>2.å­—ä½“</h3><p> Markdown å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‡ ç§å­—ä½“ï¼š </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">*æ–œä½“æ–‡æœ¬*</span><br><span class="line">_æ–œä½“æ–‡æœ¬_</span><br><span class="line">**ç²—ä½“æ–‡æœ¬**</span><br><span class="line">__ç²—ä½“æ–‡æœ¬__</span><br><span class="line">***ç²—æ–œä½“æ–‡æœ¬***</span><br><span class="line">___ç²—æ–œä½“æ–‡æœ¬___</span><br></pre></td></tr></table></figure><p> æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š </p><p><em>æ–œä½“æ–‡æœ¬</em><br><em>æ–œä½“æ–‡æœ¬</em><br><strong>ç²—ä½“æ–‡æœ¬</strong><br><strong>ç²—ä½“æ–‡æœ¬</strong><br><strong><em>ç²—æ–œä½“æ–‡æœ¬</em></strong><br><strong><em>ç²—æ–œä½“æ–‡æœ¬</em></strong></p><hr><h3 id="3-åˆ†å‰²çº¿"><a href="#3-åˆ†å‰²çº¿" class="headerlink" title="3.åˆ†å‰²çº¿"></a>3.åˆ†å‰²çº¿</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">***</span><br><span class="line"></span><br><span class="line">* * *</span><br><span class="line"></span><br><span class="line">*****</span><br><span class="line"></span><br><span class="line">- - -</span><br><span class="line"></span><br><span class="line">----------</span><br></pre></td></tr></table></figure><hr><hr><hr><hr><hr><hr><h3 id="4-åˆ é™¤çº¿"><a href="#4-åˆ é™¤çº¿" class="headerlink" title="4.åˆ é™¤çº¿"></a>4.åˆ é™¤çº¿</h3><p> å¦‚æœæ®µè½ä¸Šçš„æ–‡å­—è¦æ·»åŠ åˆ é™¤çº¿ï¼Œåªéœ€è¦åœ¨æ–‡å­—çš„ä¸¤ç«¯åŠ ä¸Šä¸¤ä¸ªæ³¢æµªçº¿ <strong>~~</strong> å³å¯ï¼Œå®ä¾‹å¦‚ä¸‹ï¼š </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RUNOOB.COM</span><br><span class="line">GOOGLE.COM</span><br><span class="line">~~BAIDU.COM~~</span><br></pre></td></tr></table></figure><p> æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š </p><p>RUNOOB.COM<br>GOOGLE.COM<br><del>BAIDU.COM</del></p><hr><h3 id="5-ä¸‹åˆ’çº¿"><a href="#5-ä¸‹åˆ’çº¿" class="headerlink" title="5.ä¸‹åˆ’çº¿"></a>5.ä¸‹åˆ’çº¿</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;u&gt;å¸¦ä¸‹åˆ’çº¿æ–‡æœ¬&lt;&#x2F;u&gt;</span><br></pre></td></tr></table></figure><p><u>å¸¦ä¸‹åˆ’çº¿æ–‡æœ¬</u></p><hr><h3 id="6-è„šæ³¨"><a href="#6-è„šæ³¨" class="headerlink" title="6.è„šæ³¨"></a>6.è„šæ³¨</h3><p>è„šæ³¨æ˜¯å¯¹æ–‡æœ¬çš„è¡¥å……è¯´æ˜ã€‚</p><p>Markdown è„šæ³¨çš„æ ¼å¼å¦‚ä¸‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[^è¦æ³¨æ˜çš„æ–‡æœ¬]</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">åˆ›å»ºè„šæ³¨æ ¼å¼ç±»ä¼¼è¿™æ · [^è„šæ³¨]ã€‚</span><br><span class="line"></span><br><span class="line">[^è„šæ³¨]:  æˆ‘æ˜¯ä¸€ä¸ªè„šæ³¨QWQ</span><br></pre></td></tr></table></figure><hr><h3 id="7-åˆ—è¡¨"><a href="#7-åˆ—è¡¨" class="headerlink" title="7.åˆ—è¡¨"></a>7.åˆ—è¡¨</h3><p>Markdown æ”¯æŒæœ‰åºåˆ—è¡¨å’Œæ— åºåˆ—è¡¨ã€‚</p><p>æ— åºåˆ—è¡¨ä½¿ç”¨æ˜Ÿå·(*<strong>**)ã€åŠ å·(</strong>+<strong>)æˆ–æ˜¯å‡å·(</strong>-**)ä½œä¸ºåˆ—è¡¨æ ‡è®°ï¼Œè¿™äº›æ ‡è®°åé¢è¦æ·»åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œç„¶åå†å¡«å†™å†…å®¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* ç¬¬ä¸€é¡¹</span><br><span class="line">* ç¬¬äºŒé¡¹</span><br><span class="line">* ç¬¬ä¸‰é¡¹</span><br><span class="line"></span><br><span class="line">+ ç¬¬ä¸€é¡¹</span><br><span class="line">+ ç¬¬äºŒé¡¹</span><br><span class="line">+ ç¬¬ä¸‰é¡¹</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- ç¬¬ä¸€é¡¹</span><br><span class="line">- ç¬¬äºŒé¡¹</span><br><span class="line">- ç¬¬ä¸‰é¡¹</span><br></pre></td></tr></table></figure><ul><li>ç¬¬ä¸€é¡¹</li><li>ç¬¬äºŒé¡¹</li><li>ç¬¬ä¸‰é¡¹</li></ul><ul><li>ç¬¬ä¸€é¡¹</li><li>ç¬¬äºŒé¡¹</li><li>ç¬¬ä¸‰é¡¹</li></ul><ul><li><p>ç¬¬ä¸€é¡¹</p></li><li><p>ç¬¬äºŒé¡¹</p></li><li><p>ç¬¬ä¸‰é¡¹</p></li></ul><hr><h3 id="8-åˆ—è¡¨åµŒå¥—"><a href="#8-åˆ—è¡¨åµŒå¥—" class="headerlink" title="8.åˆ—è¡¨åµŒå¥—"></a>8.åˆ—è¡¨åµŒå¥—</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1. ç¬¬ä¸€é¡¹ï¼š</span><br><span class="line">    - ç¬¬ä¸€é¡¹åµŒå¥—çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span><br><span class="line">    - ç¬¬ä¸€é¡¹åµŒå¥—çš„ç¬¬äºŒä¸ªå…ƒç´ </span><br><span class="line">2. ç¬¬äºŒé¡¹ï¼š</span><br><span class="line">    - ç¬¬äºŒé¡¹åµŒå¥—çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span><br><span class="line">    - ç¬¬äºŒé¡¹åµŒå¥—çš„ç¬¬äºŒä¸ªå…ƒç´ </span><br></pre></td></tr></table></figure><ol><li>ç¬¬ä¸€é¡¹ï¼š<ul><li>ç¬¬ä¸€é¡¹åµŒå¥—çš„ç¬¬ä¸€ä¸ªå…ƒç´ </li><li>ç¬¬ä¸€é¡¹åµŒå¥—çš„ç¬¬äºŒä¸ªå…ƒç´ </li></ul></li><li>ç¬¬äºŒé¡¹ï¼š<ul><li>ç¬¬äºŒé¡¹åµŒå¥—çš„ç¬¬ä¸€ä¸ªå…ƒç´ </li><li>ç¬¬äºŒé¡¹åµŒå¥—çš„ç¬¬äºŒä¸ªå…ƒç´ </li></ul></li></ol><hr><h3 id="9-åŒºå—"><a href="#9-åŒºå—" class="headerlink" title="9.åŒºå—"></a>9.åŒºå—</h3><p>Markdown åŒºå—å¼•ç”¨æ˜¯åœ¨æ®µè½å¼€å¤´ä½¿ç”¨ <strong>&gt;</strong> ç¬¦å· ï¼Œç„¶ååé¢ç´§è·Ÿä¸€ä¸ª<strong>ç©ºæ ¼</strong>ç¬¦å·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; ç¬¬ä¸€å±‚</span><br><span class="line">&gt;&gt; ç¬¬äºŒå±‚</span><br><span class="line">&gt;&gt;&gt;ç¬¬ä¸‰å±‚</span><br></pre></td></tr></table></figure><blockquote><p>ç¬¬ä¸€å±‚</p><blockquote><p>ç¬¬äºŒå±‚</p><blockquote><p>ç¬¬ä¸‰å±‚</p></blockquote></blockquote></blockquote><p><strong>10.åˆ—è¡¨ä¸­ä½¿ç”¨åŒºå—</strong></p><p>å¦‚æœè¦åœ¨åˆ—è¡¨é¡¹ç›®å†…æ”¾è¿›åŒºå—ï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨ <strong>&gt;</strong> å‰æ·»åŠ å››ä¸ªç©ºæ ¼çš„ç¼©è¿›ã€‚</p><p>åŒºå—ä¸­ä½¿ç”¨åˆ—è¡¨å®ä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* ç¬¬ä¸€é¡¹</span><br><span class="line">    &gt; èœé¸Ÿæ•™ç¨‹</span><br><span class="line">    &gt; å­¦çš„ä¸ä»…æ˜¯æŠ€æœ¯æ›´æ˜¯æ¢¦æƒ³</span><br><span class="line">* ç¬¬äºŒé¡¹</span><br></pre></td></tr></table></figure><ul><li><p>ç¬¬ä¸€é¡¹</p><blockquote><p>èœé¸Ÿæ•™ç¨‹<br>å­¦çš„ä¸ä»…æ˜¯æŠ€æœ¯æ›´æ˜¯æ¢¦æƒ³</p></blockquote></li><li><p>ç¬¬äºŒé¡¹</p><p><strong>åŒºå—ä¸­ä½¿ç”¨åˆ—è¡¨</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; åŒºå—ä¸­ä½¿ç”¨åˆ—è¡¨</span><br><span class="line">&gt; 1. ç¬¬ä¸€é¡¹</span><br><span class="line">&gt; 2. ç¬¬äºŒé¡¹</span><br><span class="line">&gt; + ç¬¬ä¸€é¡¹</span><br><span class="line">&gt; + ç¬¬äºŒé¡¹</span><br><span class="line">&gt; + ç¬¬ä¸‰é¡¹</span><br></pre></td></tr></table></figure><blockquote><p>åŒºå—ä¸­ä½¿ç”¨åˆ—è¡¨</p><ol><li>ç¬¬ä¸€é¡¹</li><li>ç¬¬äºŒé¡¹</li></ol><ul><li>ç¬¬ä¸€é¡¹</li><li>ç¬¬äºŒé¡¹</li><li>ç¬¬ä¸‰é¡¹</li></ul></blockquote></li></ul><hr><h3 id="10-é“¾æ¥"><a href="#10-é“¾æ¥" class="headerlink" title="10.é“¾æ¥"></a>10.é“¾æ¥</h3><p>é“¾æ¥ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[é“¾æ¥åç§°](é“¾æ¥åœ°å€)</span><br></pre></td></tr></table></figure><p><strong>æˆ–è€…</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;é“¾æ¥åœ°å€&gt;</span><br></pre></td></tr></table></figure><p><strong>ä¾‹å¦‚:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¿™æ˜¯ä¸€ä¸ªé“¾æ¥ [ç™¾åº¦](https:&#x2F;&#x2F;www.baidu.com)</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªé“¾æ¥ <a href="https://www.baidu.com/">ç™¾åº¦</a></p><p><strong>é«˜çº§é“¾æ¥</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è¿™æ˜¯[Bç«™][1]</span><br><span class="line">è¿™æ˜¯[ç™¾åº¦][ç™¾åº¦]</span><br><span class="line"></span><br><span class="line">[ç™¾åº¦]: https:&#x2F;&#x2F;www.baidu.com&#x2F;</span><br><span class="line">[1]: https:&#x2F;&#x2F;www.bilibili.com&#x2F;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯<a href="https://www.bilibili.com/">Bç«™</a><br>è¿™æ˜¯<a href="https://www.baidu.com/">ç™¾åº¦</a></p><hr><h3 id="11-å›¾ç‰‡"><a href="#11-å›¾ç‰‡" class="headerlink" title="11.å›¾ç‰‡"></a>11.å›¾ç‰‡</h3><p> Markdown å›¾ç‰‡è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">![alt å±æ€§æ–‡æœ¬](å›¾ç‰‡åœ°å€)</span><br><span class="line"></span><br><span class="line">![alt å±æ€§æ–‡æœ¬](å›¾ç‰‡åœ°å€ &quot;å¯é€‰æ ‡é¢˜&quot;)</span><br></pre></td></tr></table></figure><ul><li>å¼€å¤´ä¸€ä¸ªæ„Ÿå¹å· !</li><li>æ¥ç€ä¸€ä¸ªæ–¹æ‹¬å·ï¼Œé‡Œé¢æ”¾ä¸Šå›¾ç‰‡çš„æ›¿ä»£æ–‡å­—</li><li>æ¥ç€ä¸€ä¸ªæ™®é€šæ‹¬å·ï¼Œé‡Œé¢æ”¾ä¸Šå›¾ç‰‡çš„ç½‘å€ï¼Œæœ€åè¿˜å¯ä»¥ç”¨å¼•å·åŒ…ä½å¹¶åŠ ä¸Šé€‰æ‹©æ€§çš„ â€˜titleâ€™ å±æ€§çš„æ–‡å­—ã€‚</li></ul><h3 id="12-è¡¨æ ¼"><a href="#12-è¡¨æ ¼" class="headerlink" title="12.è¡¨æ ¼"></a>12.è¡¨æ ¼</h3><p>Markdown åˆ¶ä½œè¡¨æ ¼ä½¿ç”¨ <strong>|</strong> æ¥åˆ†éš”ä¸åŒçš„å•å…ƒæ ¼ï¼Œä½¿ç”¨ <strong>-</strong> æ¥åˆ†éš”è¡¨å¤´å’Œå…¶ä»–è¡Œã€‚</p><p>è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">|  è¡¨å¤´   | è¡¨å¤´  |</span><br><span class="line">|  ----  | ----  |</span><br><span class="line">| å•å…ƒæ ¼  | å•å…ƒæ ¼ |</span><br><span class="line">| å•å…ƒæ ¼  | å•å…ƒæ ¼ |</span><br></pre></td></tr></table></figure><table><thead><tr><th>è¡¨å¤´</th><th>è¡¨å¤´</th></tr></thead><tbody><tr><td>å•å…ƒæ ¼</td><td>å•å…ƒæ ¼</td></tr><tr><td>å•å…ƒæ ¼</td><td>å•å…ƒæ ¼</td></tr></tbody></table><p>å¯¹é½æ–¹å¼</p><p><strong>æˆ‘ä»¬å¯ä»¥è®¾ç½®è¡¨æ ¼çš„å¯¹é½æ–¹å¼ï¼š</strong></p><ul><li><strong>-:</strong> è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…å³å¯¹é½ã€‚</li><li><strong>:-</strong> è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…å·¦å¯¹é½ã€‚</li><li><strong>:-:</strong> è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…ä¸­å¯¹é½ã€‚</li></ul><p>å®ä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">| å·¦å¯¹é½ | å³å¯¹é½ | å±…ä¸­å¯¹é½ |</span><br><span class="line">| :-----| ----: | :----: |</span><br><span class="line">| å•å…ƒæ ¼ | å•å…ƒæ ¼ | å•å…ƒæ ¼ |</span><br><span class="line">| å•å…ƒæ ¼ | å•å…ƒæ ¼ | å•å…ƒæ ¼ |</span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">å·¦å¯¹é½</th><th align="right">å³å¯¹é½</th><th align="center">å±…ä¸­å¯¹é½</th></tr></thead><tbody><tr><td align="left">å•å…ƒæ ¼</td><td align="right">å•å…ƒæ ¼</td><td align="center">å•å…ƒæ ¼</td></tr><tr><td align="left">å•å…ƒæ ¼</td><td align="right">å•å…ƒæ ¼</td><td align="center">å•å…ƒæ ¼</td></tr></tbody></table><hr><hr><hr><h2 id="äºŒ-Hexo-ç‰¹æ®Šè¯­æ³•"><a href="#äºŒ-Hexo-ç‰¹æ®Šè¯­æ³•" class="headerlink" title="äºŒ.Hexo ç‰¹æ®Šè¯­æ³•"></a>äºŒ.Hexo ç‰¹æ®Šè¯­æ³•</h2><h3 id="1-Front-matter"><a href="#1-Front-matter" class="headerlink" title="1.Front-matter"></a>1.Front-matter</h3><table><thead><tr><th>å†™æ³•</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>title</td><td>ã€å¿…éœ€ã€‘é¡µé¢æ ‡é¢˜</td></tr><tr><td>date</td><td>ã€å¿…éœ€ã€‘é¡µé¢åˆ›å»ºæ—¥æœŸ</td></tr><tr><td>type</td><td>ã€å¿…éœ€ã€‘æ ‡ç±¤ã€åˆ†ç±»å’Œå‹æƒ…é“¾æ¥ä¸‰ä¸ªé¡µé¢éœ€è¦é…ç½®</td></tr><tr><td>updated</td><td>ã€å¯é€‰ã€‘é¡µé¢æ›´æ–°æ—¥æœŸ</td></tr><tr><td>description</td><td>ã€å¯é€‰ã€‘é¡µé¢æè¿°</td></tr><tr><td>keywords</td><td>ã€å¯é€‰ã€‘é¡µé¢å…³é”®å­—</td></tr><tr><td>comments</td><td>ã€å¯é€‰ã€‘æ˜¾ç¤ºé¡µé¢è¯„è®ºæ¨¡å— (é»˜è®¤ true)</td></tr><tr><td>top_img</td><td>ã€å¯é€‰ã€‘é¡µé¢é¡¶éƒ¨å›¾ç‰‡</td></tr><tr><td>mathjax</td><td>ã€å¯é€‰ã€‘æ˜¾ç¤º mathjax (å½“è®¾ç½® mathjax çš„ per_page: false æ—¶ï¼Œæ‰éœ€è¦é…ç½®ï¼Œé»˜è®¤ false)</td></tr><tr><td>katex</td><td>ã€å¯é€‰ã€‘æ˜¾ç¤º katex (å½“è®¾ç½® katex çš„ per_page: false æ—¶ï¼Œæ‰éœ€è¦é…ç½®ï¼Œé»˜è®¤ false)</td></tr><tr><td>aside</td><td>ã€å¯é€‰ã€‘æ˜¾ç¤ºä¾§è¾¹æ  (é»˜è®¤ true)</td></tr><tr><td>aplayer</td><td>ã€å¯é€‰ã€‘åœ¨éœ€è¦çš„é¡µé¢åŠ è½½ aplayer çš„ js å’Œ css, è¯·å‚è€ƒæ–‡ç« ä¸‹é¢çš„éŸ³ä¹ é…ç½®</td></tr><tr><td>highlight_shrink</td><td>ã€å¯é€‰ã€‘é…ç½®ä»£ç æ¡†æ˜¯å¦å±•å¼€ (true/false)(é»˜è®¤ä¸ºè®¾ç½®ä¸­ highlight_shrink çš„é…ç½®)</td></tr></tbody></table><h3 id="2-Post-Front-matter"><a href="#2-Post-Front-matter" class="headerlink" title="2.Post Front-matter"></a><strong>2.Post Front-matter</strong></h3><table><thead><tr><th>å†™æ³•</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>title</td><td>ã€å¿…éœ€ã€‘æ–‡ç« æ ‡é¢˜</td></tr><tr><td>date</td><td>ã€å¿…éœ€ã€‘æ–‡ç« åˆ›å»ºæ—¥æœŸ</td></tr><tr><td>updated</td><td>ã€å¯é€‰ã€‘æ–‡ç« æ›´æ–°æ—¥æœŸ</td></tr><tr><td>tags</td><td>ã€å¯é€‰ã€‘æ–‡ç« æ ‡ç±¤</td></tr><tr><td>categories</td><td>ã€å¯é€‰ã€‘æ–‡ç« åˆ†ç±»</td></tr><tr><td>keywords</td><td>ã€å¯é€‰ã€‘æ–‡ç« å…³é”®å­—</td></tr><tr><td>description</td><td>ã€å¯é€‰ã€‘æ–‡ç« æè¿°</td></tr><tr><td>top_img</td><td>ã€å¯é€‰ã€‘æ–‡ç« é¡¶éƒ¨å›¾ç‰‡</td></tr><tr><td>cover</td><td>ã€å¯é€‰ã€‘æ–‡ç« ç¼©ç•¥å›¾ (å¦‚æœæ²¡æœ‰è®¾ç½® top_img, æ–‡ç« é¡µé¡¶éƒ¨å°†æ˜¾ç¤ºç¼©ç•¥å›¾ï¼Œå¯è®¾ä¸º false / å›¾ç‰‡åœ°å€ / ç•™ç©º)</td></tr><tr><td>comments</td><td>ã€å¯é€‰ã€‘æ˜¾ç¤ºæ–‡ç« è¯„è®ºæ¨¡å— (é»˜è®¤ true)</td></tr><tr><td>toc</td><td>ã€å¯é€‰ã€‘æ˜¾ç¤ºæ–‡ç«  TOC (é»˜è®¤ä¸ºè®¾ç½®ä¸­ toc çš„ enable é…ç½®)</td></tr><tr><td>toc_number</td><td>ã€å¯é€‰ã€‘æ˜¾ç¤º toc_number (é»˜è®¤ä¸ºè®¾ç½®ä¸­ toc çš„ number é…ç½®)</td></tr><tr><td>auto_open</td><td>ã€å¯é€‰ã€‘æ˜¯å¦è‡ªåŠ¨æ‰“å¼€ TOC (é»˜è®¤ä¸ºè®¾ç½®ä¸­ toc çš„ auto_open é…ç½®)</td></tr><tr><td>copyright</td><td>ã€å¯é€‰ã€‘æ˜¾ç¤ºæ–‡ç« ç‰ˆæƒæ¨¡å— (é»˜è®¤ä¸ºè®¾ç½®ä¸­ post_copyright çš„ enable é…ç½®)</td></tr><tr><td>copyright_author</td><td>ã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„æ–‡ç« ä½œè€…</td></tr><tr><td>copyright_author_href</td><td>ã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„æ–‡ç« ä½œè€…é“¾æ¥</td></tr><tr><td>copyright_url</td><td>ã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„æ–‡ç« è¿ç»“é“¾æ¥</td></tr><tr><td>copyright_info</td><td>ã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„ç‰ˆæƒå£°æ˜æ–‡å­—</td></tr><tr><td>mathjax</td><td>ã€å¯é€‰ã€‘æ˜¾ç¤º mathjax (å½“è®¾ç½® mathjax çš„ per_page: false æ—¶ï¼Œæ‰éœ€è¦é…ç½®ï¼Œé»˜è®¤ false)</td></tr><tr><td>katex</td><td>ã€å¯é€‰ã€‘æ˜¾ç¤º katex (å½“è®¾ç½® katex çš„ per_page: false æ—¶ï¼Œæ‰éœ€è¦é…ç½®ï¼Œé»˜è®¤ false)</td></tr><tr><td>aplayer</td><td>ã€å¯é€‰ã€‘åœ¨éœ€è¦çš„é¡µé¢åŠ è½½ aplayer çš„ js å’Œ css, è¯·å‚è€ƒæ–‡ç« ä¸‹é¢çš„éŸ³ä¹ é…ç½®</td></tr><tr><td>highlight_shrink</td><td>ã€å¯é€‰ã€‘é…ç½®ä»£ç æ¡†æ˜¯å¦å±•å¼€ (true/false)(é»˜è®¤ä¸ºè®¾ç½®ä¸­ highlight_shrink çš„é…ç½®)</td></tr></tbody></table><hr><h3 id="3-æ ‡ç±¤å¤–æŒ‚ï¼ˆTag-Pluginsï¼‰"><a href="#3-æ ‡ç±¤å¤–æŒ‚ï¼ˆTag-Pluginsï¼‰" class="headerlink" title="3.æ ‡ç±¤å¤–æŒ‚ï¼ˆTag Pluginsï¼‰"></a>3.æ ‡ç±¤å¤–æŒ‚ï¼ˆTag Pluginsï¼‰</h3><p>æ ‡ç±¤å¤–æŒ‚æ˜¯ Hexo ç‹¬æœ‰çš„åŠŸèƒ½ï¼Œå¹¶ä¸æ˜¯æ ‡æº–çš„ Markdown æ ¼å¼ã€‚</p><p>ä»¥ä¸‹çš„å†™æ³•ï¼Œåªé€‚ç”¨äº Butterfly ä¸»é¢˜ï¼Œç”¨åœ¨å…¶å®ƒä¸»é¢˜ä¸Šä¸ä¼šæœ‰æ•ˆæœï¼Œç”šè‡³å¯èƒ½ä¼šæŠ¥é”™ã€‚ä½¿ç”¨å‰è¯·ç•™æ„</p><p><strong>ç”¨æ³•</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note [class] [no-icon] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">[class]   : default | primary | success | info | warning | danger.</span><br><span class="line">[no-icon] : Disable icon in note.</span><br><span class="line"></span><br><span class="line">All parameters are optional.</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><div class="note default flat"><p>default æç¤ºå—æ ‡ç±¤</p></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note default %&#125;</span><br><span class="line">default æç¤ºå—æ ‡ç±¤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note primary flat"><p>primary æç¤ºå—æ ‡ç±¤</p></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note primary  %&#125;</span><br><span class="line">primary æç¤ºå—æ ‡ç±¤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note success flat"><p>success æç¤ºå—æ ‡ç±¤</p></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note success %&#125;</span><br><span class="line">success æç¤ºå—æ ‡ç±¤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note info flat"><p>info æç¤ºå—æ ‡ç±¤</p></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note info %&#125;</span><br><span class="line">info æç¤ºå—æ ‡ç±¤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note warning flat"><p>warning æç¤ºå—æ ‡ç±¤</p></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note warning %&#125;</span><br><span class="line">warning æç¤ºå—æ ‡ç±¤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note danger flat"><p>danger æç¤ºå—æ ‡ç±¤</p></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note danger %&#125;</span><br><span class="line">danger æç¤ºå—æ ‡ç±¤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><hr><div class="note icon simple"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#39;fab fa-cc-visa&#39; simple %&#125;</span><br><span class="line">ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note blue icon simple"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦.</p></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note blue &#39;fas fa-bullhorn&#39; simple %&#125;</span><br><span class="line">2021å¹´å¿«åˆ°äº†....</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note pink icon simple"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note pink &#39;fas fa-car-crash&#39; simple %&#125;</span><br><span class="line">å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note red icon simple"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note red &#39;fas fa-fan&#39; simple%&#125;</span><br><span class="line">è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note orange icon simple"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note orange &#39;fas fa-battery-half&#39; simple %&#125;</span><br><span class="line">ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note purple icon simple"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note purple &#39;far fa-hand-scissors&#39; simple %&#125;</span><br><span class="line">å‰ªåˆ€çŸ³å¤´å¸ƒ</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note green icon simple"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note green &#39;fab fa-internet-explorer&#39; simple %&#125;</span><br><span class="line">å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note icon modern"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#39;fab fa-cc-visa&#39; modern %&#125;</span><br><span class="line">ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note blue icon modern"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦.</p></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note blue &#39;fas fa-bullhorn&#39; modern %&#125;</span><br><span class="line">2021å¹´å¿«åˆ°äº†....</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note pink icon modern"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note pink &#39;fas fa-car-crash&#39; modern %&#125;</span><br><span class="line">å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note red icon modern"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note red &#39;fas fa-fan&#39; modern%&#125;</span><br><span class="line">è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note orange icon modern"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note orange &#39;fas fa-battery-half&#39; modern %&#125;</span><br><span class="line">ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note purple icon modern"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note purple &#39;far fa-hand-scissors&#39; modern %&#125;</span><br><span class="line">å‰ªåˆ€çŸ³å¤´å¸ƒ</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note green icon modern"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note green &#39;fab fa-internet-explorer&#39; modern %&#125;</span><br><span class="line">å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p><a href="https://demo.jerryc.me/posts/4aa8abbe/#%E6%A8%99%E7%B1%A4%E5%A4%96%E6%8E%9B%EF%BC%88Tag-Plugins%EF%BC%89">ButterflyåŸç½‘å€</a></p><h4 id="Tabs"><a href="#Tabs" class="headerlink" title="Tabs"></a>Tabs</h4><p>ä½¿ç”¨æ–¹æ³•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs Unique name, [index] %&#125;</span><br><span class="line">&lt;!-- tab [Tab caption] [@icon] --&gt;</span><br><span class="line">Any content (support inline tags too).</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br><span class="line"></span><br><span class="line">Unique name   : Unique name of tabs block tag without comma.</span><br><span class="line">                Will be used in #id&#39;s as prefix for each tab with their index numbers.</span><br><span class="line">                If there are whitespaces in name, for generate #id all whitespaces will replaced by dashes.</span><br><span class="line">                Only for current url of post&#x2F;page must be unique!</span><br><span class="line">[index]       : Index number of active tab.</span><br><span class="line">                If not specified, first tab (1) will be selected.</span><br><span class="line">                If index is -1, no tab will be selected. It&#39;s will be something like spoiler.</span><br><span class="line">                Optional parameter.</span><br><span class="line">[Tab caption] : Caption of current tab.</span><br><span class="line">                If not caption specified, unique name with tab index suffix will be used as caption of tab.</span><br><span class="line">                If not caption specified, but specified icon, caption will empty.</span><br><span class="line">                Optional parameter.</span><br><span class="line">[@icon]       : FontAwesome icon name (full-name, look like &#39;fas fa-font&#39;)</span><br><span class="line">                Can be specified with or without space; e.g. &#39;Tab caption @icon&#39; similar to &#39;Tab caption@icon&#39;.</span><br><span class="line">                Optional parameter.</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>ä¸¾ä¾‹ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test4 %&#125;</span><br><span class="line">&lt;!-- tab ç¬¬ä¸€ä¸ªTab --&gt;</span><br><span class="line">**tabåå­—ä¸ºç¬¬ä¸€ä¸ªTab**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab @fab fa-apple-pay --&gt;</span><br><span class="line">**åªæœ‰å›¾æ ‡ æ²¡æœ‰Tabåå­—**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab ç‚¸å¼¹@fas fa-bomb --&gt;</span><br><span class="line">**åå­—+icon**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><div class="tabs" id="test4"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test4-1">ç¬¬ä¸€ä¸ªTab</button></li><li class="tab"><button type="button" data-href="#test4-2"><i class="fab fa-apple-pay" style="text-align: center;"></i></button></li><li class="tab"><button type="button" data-href="#test4-3"><i class="fas fa-bomb"></i>ç‚¸å¼¹</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä»£ç å—</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-2"><p><img src="../../../img/posts_img/Blog%E5%AD%A6%E4%B9%A0/!%5B1599582002005%5D(../img/jietu/1599582002005.png).png"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-3"><table><thead><tr><th>1</th><th>2</th></tr></thead><tbody><tr><td>4</td><td>3</td></tr></tbody></table><p><strong>åå­—+icon</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h4 id="Button"><a href="#Button" class="headerlink" title="Button"></a>Button</h4><p>ä½¿ç”¨æ–¹æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btn [url],[text],[icon],[color] [style] [layout] [position] [size] %&#125;</span><br><span class="line"></span><br><span class="line">[url]         : é“¾æ¥</span><br><span class="line">[text]        : æŒ‰é’®æ–‡å­—</span><br><span class="line">[icon]        : [å¯é€‰] å›¾æ ‡</span><br><span class="line">[color]       : [å¯é€‰] æŒ‰é’®èƒŒæ™¯é¡”è‰²(é»˜è®¤styleæ—¶ï¼‰</span><br><span class="line">                      æŒ‰é’®å­—ä½“å’Œè¾¹æ¡†é¡”è‰²(outlineæ—¶)</span><br><span class="line">                      default&#x2F;blue&#x2F;pink&#x2F;red&#x2F;purple&#x2F;orange&#x2F;green</span><br><span class="line">[style]       : [å¯é€‰] æŒ‰é’®æ ·å¼ é»˜è®¤å®å¿ƒ</span><br><span class="line">                      outline&#x2F;ç•™ç©º</span><br><span class="line">[layout]      : [å¯é€‰] æŒ‰é’®ä½ˆå±€ é»˜è®¤ä¸ºline</span><br><span class="line">                      block&#x2F;ç•™ç©º</span><br><span class="line">[position]    : [å¯é€‰] æŒ‰é’®ä½ç½® å‰ææ˜¯è®¾ç½®äº†layoutä¸ºblock é»˜è®¤ä¸ºå·¦è¾¹</span><br><span class="line">                      center&#x2F;right&#x2F;ç•™ç©º</span><br><span class="line">[size]        : [å¯é€‰] æŒ‰é’®å¤§å°</span><br><span class="line">                      larger&#x2F;ç•™ç©º</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ç‚¹è¿™ä¸ªæŒ‰é’®è¿›å…¥æœˆå³°çš„Blog &#123;% btn &#39;isyuefeng.gitee.io&#39;,Blog %&#125;</span><br><span class="line">ç‚¹è¿™ä¸ªæŒ‰é’®è¿›å…¥æœˆå³°çš„Blog &#123;% btn &#39;isyuefeng.gitee.io&#39;,Blog,far fa-hand-point-right %&#125;</span><br><span class="line">ç‚¹è¿™ä¸ªæŒ‰é’®è¿›å…¥æœˆå³°çš„Blog &#123;% btn &#39;isyuefeng.gitee.io&#39;,Blog,,outline %&#125;</span><br><span class="line">ç‚¹è¿™ä¸ªæŒ‰é’®è¿›å…¥æœˆå³°çš„Blog &#123;% btn &#39;isyuefeng.gitee.io&#39;,Blog,far fa-hand-point-right,outline %&#125;</span><br><span class="line">ç‚¹è¿™ä¸ªæŒ‰é’®è¿›å…¥æœˆå³°çš„Blog &#123;% btn &#39;isyuefeng.gitee.io&#39;,Blog,far fa-hand-point-right,larger %&#125;</span><br></pre></td></tr></table></figure><p>ç‚¹è¿™ä¸ªæŒ‰é’®è¿›å…¥æœˆå³°çš„Blog <a class="btn-beautify button--animated " href="http://isyuefeng.gitee.io"   title="Blog"><span>Blog</span></a><br>ç‚¹è¿™ä¸ªæŒ‰é’®è¿›å…¥æœˆå³°çš„Blog <a class="btn-beautify button--animated " href="http://isyuefeng.gitee.io"   title="Blog"><i class="far fa-hand-point-right fa-fw"></i><span>Blog</span></a><br>ç‚¹è¿™ä¸ªæŒ‰é’®è¿›å…¥æœˆå³°çš„Blog <a class="btn-beautify button--animated outline" href="http://isyuefeng.gitee.io"   title="Blog"><span>Blog</span></a><br>ç‚¹è¿™ä¸ªæŒ‰é’®è¿›å…¥æœˆå³°çš„Blog <a class="btn-beautify button--animated outline" href="http://isyuefeng.gitee.io"   title="Blog"><i class="far fa-hand-point-right fa-fw"></i><span>Blog</span></a><br>ç‚¹è¿™ä¸ªæŒ‰é’®è¿›å…¥æœˆå³°çš„Blog <a class="btn-beautify button--animated larger" href="http://isyuefeng.gitee.io"   title="Blog"><i class="far fa-hand-point-right fa-fw"></i><span>Blog</span></a>    </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btn  &#39;http:&#x2F;&#x2F;isyuefeng.gitee.io&#39;,Blog,far fa-hand-point-right,larger %&#125;</span><br><span class="line">&#123;% btn  &#39;http:&#x2F;&#x2F;isyuefeng.gitee.io&#39;,Blog,far fa-hand-point-right,blue larger %&#125;</span><br><span class="line">&#123;% btn  &#39;http:&#x2F;&#x2F;isyuefeng.gitee.io&#39;,Blog,far fa-hand-point-right,pink larger %&#125;</span><br><span class="line">&#123;% btn  &#39;http:&#x2F;&#x2F;isyuefeng.gitee.io&#39;,Blog,far fa-hand-point-right,red larger %&#125;</span><br><span class="line">&#123;% btn  &#39;http:&#x2F;&#x2F;isyuefeng.gitee.io&#39;,Blog,far fa-hand-point-right,purple larger %&#125;</span><br><span class="line">&#123;% btn  &#39;http:&#x2F;&#x2F;isyuefeng.gitee.io&#39;,Blog,far fa-hand-point-right,orange larger %&#125;</span><br><span class="line">&#123;% btn  &#39;http:&#x2F;&#x2F;isyuefeng.gitee.io&#39;,Blog,far fa-hand-point-right,green larger %&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><a class="btn-beautify button--animated larger" href="http://isyuefeng.gitee.io"   title="Blog"><i class="far fa-hand-point-right fa-fw"></i><span>Blog</span></a><a class="btn-beautify button--animated blue larger" href="http://isyuefeng.gitee.io"   title="Blog"><i class="far fa-hand-point-right fa-fw"></i><span>Blog</span></a><a class="btn-beautify button--animated pink larger" href="http://isyuefeng.gitee.io"   title="Blog"><i class="far fa-hand-point-right fa-fw"></i><span>Blog</span></a><a class="btn-beautify button--animated red larger" href="http://isyuefeng.gitee.io"   title="Blog"><i class="far fa-hand-point-right fa-fw"></i><span>Blog</span></a><a class="btn-beautify button--animated purple larger" href="http://isyuefeng.gitee.io"   title="Blog"><i class="far fa-hand-point-right fa-fw"></i><span>Blog</span></a><a class="btn-beautify button--animated orange larger" href="http://isyuefeng.gitee.io"   title="Blog"><i class="far fa-hand-point-right fa-fw"></i><span>Blog</span></a><a class="btn-beautify button--animated green larger" href="http://isyuefeng.gitee.io"   title="Blog"><i class="far fa-hand-point-right fa-fw"></i><span>Blog</span></a><h2 id="ä¸‰-Gallery-ç›¸å†Œå›¾åº“"><a href="#ä¸‰-Gallery-ç›¸å†Œå›¾åº“" class="headerlink" title="ä¸‰.Gallery ç›¸å†Œå›¾åº“"></a>ä¸‰.Gallery ç›¸å†Œå›¾åº“</h2><figure class="highlight plain"><figcaption><span>ç›¸å†Œå›¾åº“</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;gallery-group-main&quot;&gt;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>nameï¼šå›¾åº“åå­—<br>descriptionï¼šå›¾åº“æè¿°<br>linkï¼šè¿æ¥åˆ°å¯¹åº”ç›¸å†Œçš„åœ°å€<br>img-urlï¼šå›¾åº“å°é¢çš„åœ°å€</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight plain"><figcaption><span>ç›¸å†Œå›¾åº“</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;gallery-group-main&quot;&gt;</span><br><span class="line">&#123;% galleryGroup &#39;å£çº¸&#39; &#39;æ”¶è—çš„ä¸€äº›å£çº¸&#39; &#39;&#x2F;Gallery&#x2F;wallpaper&#39; https:&#x2F;&#x2F;i.loli.net&#x2F;2019&#x2F;11&#x2F;10&#x2F;T7Mu8Aod3egmC4Q.png %&#125;</span><br><span class="line">&#123;% galleryGroup &#39;æ¼«å¨&#39; &#39;å…³äºæ¼«å¨çš„å›¾ç‰‡&#39; &#39;&#x2F;Gallery&#x2F;marvel&#39; https:&#x2F;&#x2F;i.loli.net&#x2F;2019&#x2F;12&#x2F;25&#x2F;8t97aVlp4hgyBGu.jpg %&#125;</span><br><span class="line">&#123;% galleryGroup &#39;OH MY GIRL&#39; &#39;å…³äºOH MY GIRLçš„å›¾ç‰‡&#39; &#39;&#x2F;Gallery&#x2F;ohmygirl&#39; https:&#x2F;&#x2F;i.loli.net&#x2F;2019&#x2F;12&#x2F;25&#x2F;hOqbQ3BIwa6KWpo.jpg %&#125;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure><div class="gallery-group-main">  <figure class="gallery-group">  <img class="gallery-group-img" src='https://i.loli.net/2019/11/10/T7Mu8Aod3egmC4Q.png' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">å£çº¸</div>  <p>æ”¶è—çš„ä¸€äº›å£çº¸</p>  <a href='/Gallery/wallpaper'></a>  </figcaption>  </figure>    <figure class="gallery-group">  <img class="gallery-group-img" src='https://i.loli.net/2019/12/25/8t97aVlp4hgyBGu.jpg' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">æ¼«å¨</div>  <p>å…³äºæ¼«å¨çš„å›¾ç‰‡</p>  <a href='/Gallery/marvel'></a>  </figcaption>  </figure>    <figure class="gallery-group">  <img class="gallery-group-img" src='https://i.loli.net/2019/12/25/hOqbQ3BIwa6KWpo.jpg' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">OH MY GIRL</div>  <p>å…³äºOH MY GIRLçš„å›¾ç‰‡</p>  <a href='/Gallery/ohmygirl'></a>  </figcaption>  </figure>  </div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">markdown å›¾ç‰‡æ ¼å¼</span><br><span class="line">&#123;% endgallery %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;div class&#x3D;&quot;gallery-group-main&quot;&gt;</span><br><span class="line">&#123;% galleryGroup &#39;å£çº¸&#39; &#39;æ”¶è—çš„ä¸€äº›å£çº¸&#39; &#39;&#x2F;Gallery&#x2F;wallpaper&#39; https:&#x2F;&#x2F;i.loli.net&#x2F;2019&#x2F;11&#x2F;10&#x2F;T7Mu8Aod3egmC4Q.png %&#125;</span><br><span class="line">&#123;% galleryGroup &#39;æ¼«å¨&#39; &#39;å…³äºæ¼«å¨çš„å›¾ç‰‡&#39; &#39;&#x2F;Gallery&#x2F;marvel&#39; https:&#x2F;&#x2F;i.loli.net&#x2F;2019&#x2F;12&#x2F;25&#x2F;8t97aVlp4hgyBGu.jpg %&#125;</span><br><span class="line">&#123;% galleryGroup &#39;OH MY GIRL&#39; &#39;å…³äºOH MY GIRLçš„å›¾ç‰‡&#39; &#39;&#x2F;Gallery&#x2F;ohmygirl&#39; https:&#x2F;&#x2F;i.loli.net&#x2F;2019&#x2F;12&#x2F;25&#x2F;hOqbQ3BIwa6KWpo.jpg %&#125;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><div class="gallery-group-main">  <figure class="gallery-group">  <img class="gallery-group-img" src='https://i.loli.net/2019/11/10/T7Mu8Aod3egmC4Q.png' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">å£çº¸</div>  <p>æ”¶è—çš„ä¸€äº›å£çº¸</p>  <a href='/Gallery/wallpaper'></a>  </figcaption>  </figure>    <figure class="gallery-group">  <img class="gallery-group-img" src='https://i.loli.net/2019/12/25/8t97aVlp4hgyBGu.jpg' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">æ¼«å¨</div>  <p>å…³äºæ¼«å¨çš„å›¾ç‰‡</p>  <a href='/Gallery/marvel'></a>  </figcaption>  </figure>    <figure class="gallery-group">  <img class="gallery-group-img" src='https://i.loli.net/2019/12/25/hOqbQ3BIwa6KWpo.jpg' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">OH MY GIRL</div>  <p>å…³äºOH MY GIRLçš„å›¾ç‰‡</p>  <a href='/Gallery/ohmygirl'></a>  </figcaption>  </figure>  </div>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ä½è¿ç®—ç»ƒä¹ </title>
      <link href="2020/08/%E4%BD%8D%E8%BF%90%E7%AE%97/"/>
      <url>2020/08/%E4%BD%8D%E8%BF%90%E7%AE%97/</url>
      
        <content type="html"><![CDATA[<h2 id="ä½è¿ç®—"><a href="#ä½è¿ç®—" class="headerlink" title="ä½è¿ç®—"></a>ä½è¿ç®—</h2><h3 id="åˆ¤æ–­å¥‡å¶æ•°"><a href="#åˆ¤æ–­å¥‡å¶æ•°" class="headerlink" title="åˆ¤æ–­å¥‡å¶æ•°"></a>åˆ¤æ–­å¥‡å¶æ•°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">X &amp; 1 &#x3D; 1 &#x2F;&#x2F;å¥‡æ•°</span><br></pre></td></tr></table></figure><h3 id="æ‰¾å‡ºå”¯ä¸€æˆå¯¹çš„æ•°"><a href="#æ‰¾å‡ºå”¯ä¸€æˆå¯¹çš„æ•°" class="headerlink" title="æ‰¾å‡ºå”¯ä¸€æˆå¯¹çš„æ•°"></a>æ‰¾å‡ºå”¯ä¸€æˆå¯¹çš„æ•°</h3><p>è¿™1000ä¸ªæ•°æ”¾åœ¨å«æœ‰1001ä¸ªå…ƒç´ çš„æ•°ç»„ä¸­,åªæœ‰å”¯ä¸€çš„ä¸ªå…ƒç´ å€¼é‡å¤,å…¶å®ƒå‡åªå‡ºç°ä¸€æ¬¡ã€‚æ¯ä¸ªæ•°ç»„å…ƒç´ åªèƒ½è®¿é—®æ¬¡,è®¾è®¡ä¸€ä¸ªç®—æ³•,å°†å®ƒæ‰¾å‡ºæ¥;ä¸ç”¨è¾…åŠ©å­˜å‚¨ç©ºé—´,èƒ½å¦è®¾è®¡ä¸ªç®—æ³•å®ç°?</p><p>A ^ A =0    ä¸¤è€…ç›¸åŒå¼‚æˆ–ä¸º0</p><p>B ^ 0 = B    </p><p>è®¾å¤šçš„æ•°ä¸ºKæŠŠæ•°ç»„é‡Œçš„æ•°å­—å…¨éƒ¨å’Œ1-1000çš„æ•°å­—å¼‚æˆ–åœ¨ä¸€èµ·å°±ä¿©ä¿©å°±æ¶ˆæ‰åªå‰©3ä¸ªK ,åœ¨2ä¸ªKæ¶ˆé™¤,å°±å‰©ä¸‹æœ€ç»ˆå¤šå‡ºçš„æ•°å­—</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @ author: yuefeng</span></span><br><span class="line"><span class="comment"> * @ date: 2020/8/20 22:57</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> N = <span class="number">1001</span>;</span><br><span class="line">        <span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            arr[i] = i + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        arr[arr.length - <span class="number">1</span>] = <span class="keyword">new</span> Random().nextInt(N - <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">        swap(arr, N - <span class="number">1</span>, arr[<span class="keyword">new</span> Random().nextInt(N)]);</span><br><span class="line">        System.out.println(Arrays.toString(arr));</span><br><span class="line">        <span class="keyword">int</span> x1 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; N; i++) &#123;</span><br><span class="line">            x1 = x1 ^ i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">            x1 = x1 ^ arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(x1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] a, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> t = a[i];</span><br><span class="line">        a[i] = a[j];</span><br><span class="line">        a[j] = t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æš´åŠ›ç ´è§£è¿‡ç¨‹</p><p>æ–°å»ºä¸€ä¸ªæ•°ç»„arr2  æœ‰ä¸€ä¸ªæ•°å­—å°±è®°å½•åœ¨arr2å¯¹åº”è§’æ ‡çš„å€¼åŠ 1</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @ author: yuefeng</span></span><br><span class="line"><span class="comment"> * @ date: 2020/8/20 23:52</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> N = <span class="number">11</span>;</span><br><span class="line">        <span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            arr[i] = i + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        arr[arr.length - <span class="number">1</span>] = <span class="keyword">new</span> Random().nextInt(N - <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">        swap(arr, N - <span class="number">1</span>, arr[<span class="keyword">new</span> Random().nextInt(N)]);</span><br><span class="line">        System.out.println(Arrays.toString(arr));</span><br><span class="line">        baoli(N, arr);</span><br><span class="line">        <span class="keyword">int</span> x1 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; N; i++) &#123;</span><br><span class="line">            x1 = x1 ^ i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">            x1 = x1 ^ arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(x1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">baoli</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] arr2 = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i : arr2) &#123;</span><br><span class="line">            arr2[i] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(Arrays.toString(arr2));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i : arr) &#123;</span><br><span class="line">            arr2[i] += <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> x = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i : arr2) &#123;</span><br><span class="line"></span><br><span class="line">            x+=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (i == <span class="number">2</span>) &#123;</span><br><span class="line">                System.out.println(x);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//        System.out.println(Arrays.toString(arr2));</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] a, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> t = a[i];</span><br><span class="line">        a[i] = a[j];</span><br><span class="line">        a[j] = t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="../../../img/posts_img/%E4%BD%8D%E8%BF%90%E7%AE%97/2020-10-11-17-54-10.png"></p><h3 id="è¾“å…¥ä¸€ä¸ªæ•´æ•°-è¾“å‡ºè¯¥æ•°äºŒè¿›åˆ¶è¡¨ç¤ºä¸­1çš„ä¸ªæ•°"><a href="#è¾“å…¥ä¸€ä¸ªæ•´æ•°-è¾“å‡ºè¯¥æ•°äºŒè¿›åˆ¶è¡¨ç¤ºä¸­1çš„ä¸ªæ•°" class="headerlink" title="è¾“å…¥ä¸€ä¸ªæ•´æ•°,è¾“å‡ºè¯¥æ•°äºŒè¿›åˆ¶è¡¨ç¤ºä¸­1çš„ä¸ªæ•°"></a>è¾“å…¥ä¸€ä¸ªæ•´æ•°,è¾“å‡ºè¯¥æ•°äºŒè¿›åˆ¶è¡¨ç¤ºä¸­1çš„ä¸ªæ•°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¯·å®ç°ä¸€ä¸ªå‡½æ•°,è¾“å…¥ä¸€ä¸ªæ•´æ•°,è¾“å‡ºè¯¥æ•°äºŒè¿›åˆ¶è¡¨ç¤ºä¸­1çš„ä¸ªæ•°ã€‚</span><br><span class="line">&gt;ä¾‹:9çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸º1001,æœ‰2ä½æ˜¯1</span><br></pre></td></tr></table></figure><p> æ€è·¯ï¼šæŠŠä¸€ä¸ªæ•´æ•°å‡å»1ï¼Œå†å’ŒåŸæ•´æ•°åšä¸è¿ç®—ï¼Œä¼šæŠŠè¯¥æ•´æ•°çš„æœ€å³è¾¹çš„1å˜æˆ0ã€‚é‚£ä¹ˆä¸€ä¸ªæ•´æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­æœ‰å¤šå°‘ä¸ª1ï¼Œå°±å¯ä»¥è¿›è¡Œå¤šå°‘æ¬¡è¿™æ ·çš„æ“ä½œã€‚</p><p>ä¸¾ä¸ªæ —å­ï¼š1100ï¼Œå®ƒçš„ç¬¬äºŒä½æ˜¯ä»æœ€å³è¾¹æ•°èµ·çš„ä¸€ä¸ª1.å‡å»1åï¼Œç¬¬äºŒä½å˜æˆ0ï¼Œå®ƒåé¢çš„ä¸¤ä½0å˜æˆ1ï¼Œè€Œå‰é¢çš„1ä¿æŒä¸å˜ï¼Œå› æ­¤å¾—åˆ°çš„ç»“æœä¸º1011.</p><p>N&amp;(n-1)= 0</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @ author: yuefeng</span></span><br><span class="line"><span class="comment"> * @ date: 2020/8/21 0:39</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test3</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">int</span> n = sc.nextInt();</span><br><span class="line">        System.out.println(Integer.toString(n, <span class="number">2</span>));</span><br><span class="line"></span><br><span class="line">        System.out.println(number(n));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">number</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (n != <span class="number">0</span>) &#123;</span><br><span class="line"></span><br><span class="line">            count++;</span><br><span class="line">            n = n &amp; (n - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ˜¯ä¸æ˜¯2çš„æ•´æ•°æ¬¡æ–¹"><a href="#æ˜¯ä¸æ˜¯2çš„æ•´æ•°æ¬¡æ–¹" class="headerlink" title="æ˜¯ä¸æ˜¯2çš„æ•´æ•°æ¬¡æ–¹"></a>æ˜¯ä¸æ˜¯2çš„æ•´æ•°æ¬¡æ–¹</h3><p>ç”¨ä¸€æ¡è¯­å¥åˆ¤æ–­ä¸€ä¸ªæ•´æ•°æ˜¯ä¸æ˜¯2çš„æ•´æ•°æ¬¡æ–¹ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if((n &amp; (n-1)) &#x3D;&#x3D; 0)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> è“æ¡¥ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
